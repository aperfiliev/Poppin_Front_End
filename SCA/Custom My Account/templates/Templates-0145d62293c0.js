SC.templates = {"macros":["<% registerMacro('addressFrom', function (address, options) { %>\n<% \n\tvar site_settings = SC.ENVIRONMENT.siteSettings\n\t,\tmanage = options.manage ? options.manage + '-' : ''\n\t,\tcountries = options.countries\n\t,\tquantity_countries = _.size(countries)\n\t,\tselected_country = address.get('country') || site_settings.defaultshipcountry\n\t,\tapplication = this.view.options.application || this.view.options.wizard.application;\n\n\tif (quantity_countries === 1)\n\t{\n\t\tselected_country = _.keys(countries)[0];\n\t}\n%>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>fullname\">\n\t\t\t<%= _('Full Name').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>fullname\" name=\"fullname\" value=\"<%- address.get('fullname')%>\">\n\t\t<\/div>\n\t<\/div>\n\t<% \/* \n\tTODO: the next field should be shown\/hidden depending on a feature in Setup Website > Shopping\n\tregistration has 2 fields: displaycompanyfield and showcompanyfield, not sure which to use \n\t*\/ %>\n\t<% if (site_settings.registration.displaycompanyfield === 'T') { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>company\">\n\t\t\t<%= _('Company').translate() %>\n\t\t\t<% if (site_settings.registration.companyfieldmandatory === 'T') { %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-xlarge\"\n\t\t\t\tid=\"<%= manage %>company\"\n\t\t\t\tname=\"company\"\n\t\t\t\tvalue=\"<%- address.get('company') %>\"\n\t\t\t\t<% if (site_settings.registration.companyfieldmandatory !== 'T') { %>\n\t\t\t\t\tplaceholder=\"<%= _('(optional)').translate() %>\"\n\t\t\t\t<% } %>\n\t\t\t>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>addr1\">\n\t\t\t<%= _('Address').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>addr1\" name=\"addr1\" value=\"<%- address.get('addr1') %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 1234 Main Street').translate() %>\n\t\t<\/span>\n\t<\/div>\n\n\t<div class=\"control-group control-group-big\">\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>addr2\" name=\"addr2\" value=\"<%- address.get('addr2') %>\" placeholder=\"<%= _('(optional)').translate() %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: Apt. 3 or Suite #1516').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>city\">\n\t\t\t<%= _('City').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>city\" name=\"city\" value=\"<%- address.get('city') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group <%= quantity_countries <= 1 ? 'hide' : '' %>\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>country\">\n\t\t\t<%= _('Country').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<%= SC.macros.countriesDropdown(countries, selected_country, manage) %>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<%= SC.macros.statesDropdown({\n\t\t\tcountries: options.countries\n\t\t,\tselectedCountry: selected_country\n\t\t,\tselectedState: address.get('state')\n\t\t,\tmanage: manage\n\t\t}) %>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>zip\">\n\t\t\t<%= _('Zip Code').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-medium\" id=\"<%= manage %>zip\" name=\"zip\" value=\"<%- address.get('zip') %>\" data-type=\"zip\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 94117').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>phone\">\n\t\t\t<%= _('Phone Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"tel\" class=\"input-xlarge\" id=\"<%= manage %>phone\" name=\"phone\" value=\"<%- address.get('phone') %>\" data-type=\"phone\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 555-123-1234').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>isresidential\" value=\"T\" data-unchecked-value=\"F\" name=\"isresidential\" <%= address.get('isresidential') === 'T' ? 'checked' : '' %>>\n\t\t\t\t<%= _('This is a Residential Address').translate() %>\n\t\t\t\t<a href=\"#\" rel=\"tooltip\" data-toggle=\"tooltip\" title=\"<%= _('Indicating that this is a residential address will help us determine the best delivery method for your items.').translate() %>\">\n\t\t\t\t\t<i class=\"icon-question-sign\"><\/i>\n\t\t\t\t<\/a>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% if (!options.hideDefaults) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\">\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultbilling\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultbilling\" <%= address.get('defaultbilling') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Save as my primary billing address').translate() : _('Make this my default billing address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n\n\t<% if (!options.hideDefaults) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\">\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultshipping\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultshipping\" <%= address.get('defaultshipping') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Save as my primary shipping address').translate() : _('Make this my default shipping address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n<\/fieldset>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('address', function (address, options) { \n\toptions = options || {}; \n\n\tvar label = address.get('label')\n\t,\tcompany = (SC.ENVIRONMENT.siteSettings.registration.displaycompanyfield === 'T') ? address.get('company') : null\n\t,\tfullname = address.get('fullname')\n\t,\tcountries = SC.ENVIRONMENT.siteSettings.countries\n\t,\tcountry_object = countries[address.get('country')]\n\t,\tcountry = (country_object)? country_object.name : address.get('country')\n\t,\tstate_object = (country_object && country_object.states)? _.findWhere(countries[address.get('country')].states, {code: address.get('state')}): null\n\t,\tstate = (state_object)? state_object.name: address.get('state');\n\n\t\n\n%>\n<article class=\"address\">\n\t<address class=\"\">\n\t\t<span class=\"address-line address-title summary-header\">\n\t\t\t<%= label || company || fullname %>\n\t\t<\/span>\n\n\t\t<% if (label && company) { %>\n\t\t\t<span class=\"address-line address-company\">\n\t\t\t\t<%= company %>\n\t\t\t<\/span>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } else if (label ? !company : company ) { %>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line address-addr1\">\n\t\t\t<%= address.get('addr1') %>\n\t\t<\/span>\n\t\t<% if (address.get('addr2')) { %>\n\t\t\t<span class=\"address-line address-addr2\">\n\t\t\t\t<%= address.get('addr2') %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line\">\n\t\t\t<span class=\"address-city\">\n\t\t\t\t<%= address.get('city') %>\n\t\t\t<\/span>\n\t\t\t<% if (address.get('state')) { %>\n\t\t\t\t<span class=\"address-state\">\n\t\t\t\t\t<%= state %>\n\t\t\t\t<\/span>\n\t\t\t<% } %>\n\t\t\t<span class=\"address-zip\">\n\t\t\t\t<%= address.get('zip') %>\n\t\t\t<\/span>\n\t\t<\/span>\n\t\t<span class=\"address-line address-country\">\n\t\t\t<%= country %>\n\t\t<\/span>\n\t\t<span class=\"address-line address-phone\">\n\t\t\t<%= address.get('phone') %>\n\t\t<\/span>\n\t<\/address>\n\t\t\n\t<% if (!options.hideDefaults) { %>\n\t\t<% if (address.get('defaultshipping') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Shipping Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t\t<% if (address.get('defaultbilling') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Billing Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-primary btn-block\" data-action=\"select\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= options.selectMessage || _('Select this address').translate() %>\n\t\t<\/button>\n\t<% } %>\n\n\t<% if (!options.hideActions) { %>\n\t<p class=\"actions\">\n\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/<%- address.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t<%= _('Edit Address').translate() %>\n\t\t<\/a>\n\n\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= _('Remove').translate() %>\n\t\t<\/button>\n\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('addressFrom', function (address, options) { %>\n<% \n\tvar site_settings = SC.ENVIRONMENT.siteSettings\n\t,\tmanage = options.manage ? options.manage + '-' : ''\n\t,\tcountries = options.countries\n\t,\tquantity_countries = _.size(countries)\n\t,\tselected_country = address.get('country') || site_settings.defaultshipcountry\n\t,\tapplication = this.view.options.application || this.view.options.wizard.application;\n\n\tif (quantity_countries === 1)\n\t{\n\t\tselected_country = _.keys(countries)[0];\n\t}\n%>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>fullname\">\n\t\t\t<%= _('Full Name').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>fullname\" name=\"fullname\" value=\"<%- address.get('fullname')%>\">\n\t\t<\/div>\n\t<\/div>\n\t<% \/* \n\tTODO: the next field should be shown\/hidden depending on a feature in Setup Website > Shopping\n\tregistration has 2 fields: displaycompanyfield and showcompanyfield, not sure which to use \n\t*\/ %>\n\t<% if (site_settings.registration.displaycompanyfield === 'T') { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>company\">\n\t\t\t<%= _('Company').translate() %>\n\t\t\t<% if (site_settings.registration.companyfieldmandatory === 'T') { %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-xlarge\"\n\t\t\t\tid=\"<%= manage %>company\"\n\t\t\t\tname=\"company\"\n\t\t\t\tvalue=\"<%- address.get('company') %>\"\n\t\t\t\t<% if (site_settings.registration.companyfieldmandatory !== 'T') { %>\n\t\t\t\t\tplaceholder=\"<%= _('(optional)').translate() %>\"\n\t\t\t\t<% } %>\n\t\t\t>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>addr1\">\n\t\t\t<%= _('Address').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>addr1\" name=\"addr1\" value=\"<%- address.get('addr1') %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 1234 Main Street').translate() %>\n\t\t<\/span>\n\t<\/div>\n\n\t<div class=\"control-group control-group-big\">\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>addr2\" name=\"addr2\" value=\"<%- address.get('addr2') %>\" placeholder=\"<%= _('(optional)').translate() %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: Apt. 3 or Suite #1516').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>city\">\n\t\t\t<%= _('City').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>city\" name=\"city\" value=\"<%- address.get('city') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group <%= quantity_countries <= 1 ? 'hide' : '' %>\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>country\">\n\t\t\t<%= _('Country').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<%= SC.macros.countriesDropdown(countries, selected_country, manage) %>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<%= SC.macros.statesDropdown({\n\t\t\tcountries: options.countries\n\t\t,\tselectedCountry: selected_country\n\t\t,\tselectedState: address.get('state')\n\t\t,\tmanage: manage\n\t\t}) %>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>zip\">\n\t\t\t<%= _('Zip Code').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-medium\" id=\"<%= manage %>zip\" name=\"zip\" value=\"<%- address.get('zip') %>\" data-type=\"zip\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 94117').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>phone\">\n\t\t\t<%= _('Phone Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"tel\" class=\"input-xlarge\" id=\"<%= manage %>phone\" name=\"phone\" value=\"<%- address.get('phone') %>\" data-type=\"phone\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 555-123-1234').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>isresidential\" value=\"T\" data-unchecked-value=\"F\" name=\"isresidential\" <%= address.get('isresidential') === 'T' ? 'checked' : '' %>>\n\t\t\t\t<%= _('This is a Residential Address').translate() %>\n\t\t\t\t<a href=\"#\" rel=\"tooltip\" data-toggle=\"tooltip\" title=\"<%= _('Indicating that this is a residential address will help us determine the best delivery method for your items.').translate() %>\">\n\t\t\t\t\t<i class=\"icon-question-sign\"><\/i>\n\t\t\t\t<\/a>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% if (!options.hideDefaults) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\">\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultbilling\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultbilling\" <%= address.get('defaultbilling') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Save as my primary billing address').translate() : _('Make this my default billing address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n\n\t<% if (!options.hideDefaults) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\">\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultshipping\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultshipping\" <%= address.get('defaultshipping') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Save as my primary shipping address').translate() : _('Make this my default shipping address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n<\/fieldset>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('address', function (address, options) { \n\toptions = options || {}; \n\n\tvar label = address.get('label')\n\t,\tcompany = (SC.ENVIRONMENT.siteSettings.registration.displaycompanyfield === 'T') ? address.get('company') : null\n\t,\tfullname = address.get('fullname')\n\t,\tcountries = SC.ENVIRONMENT.siteSettings.countries\n\t,\tcountry_object = countries[address.get('country')]\n\t,\tcountry = (country_object)? country_object.name : address.get('country')\n\t,\tstate_object = (country_object && country_object.states)? _.findWhere(countries[address.get('country')].states, {code: address.get('state')}): null\n\t,\tstate = (state_object)? state_object.name: address.get('state');\n\n\t\n\n%>\n<article class=\"address\">\n\t<address class=\"\">\n\t\t<span class=\"address-line address-title summary-header\">\n\t\t\t<%= label || company || fullname %>\n\t\t<\/span>\n\n\t\t<% if (label && company) { %>\n\t\t\t<span class=\"address-line address-company\">\n\t\t\t\t<%= company %>\n\t\t\t<\/span>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } else if (label ? !company : company ) { %>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line address-addr1\">\n\t\t\t<%= address.get('addr1') %>\n\t\t<\/span>\n\t\t<% if (address.get('addr2')) { %>\n\t\t\t<span class=\"address-line address-addr2\">\n\t\t\t\t<%= address.get('addr2') %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line\">\n\t\t\t<span class=\"address-city\">\n\t\t\t\t<%= address.get('city') %>\n\t\t\t<\/span>\n\t\t\t<% if (address.get('state')) { %>\n\t\t\t\t<span class=\"address-state\">\n\t\t\t\t\t<%= state %>\n\t\t\t\t<\/span>\n\t\t\t<% } %>\n\t\t\t<span class=\"address-zip\">\n\t\t\t\t<%= address.get('zip') %>\n\t\t\t<\/span>\n\t\t<\/span>\n\t\t<span class=\"address-line address-country\">\n\t\t\t<%= country %>\n\t\t<\/span>\n\t\t<span class=\"address-line address-phone\">\n\t\t\t<%= address.get('phone') %>\n\t\t<\/span>\n\t<\/address>\n\t\t\n\t<% if (!options.hideDefaults) { %>\n\t\t<% if (address.get('defaultshipping') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Shipping Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t\t<% if (address.get('defaultbilling') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Billing Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-primary btn-block\" data-action=\"select\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= options.selectMessage || _('Select this address').translate() %>\n\t\t<\/button>\n\t<% } %>\n\n\t<% if (!options.hideActions) { %>\n\t<p class=\"actions\">\n\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/<%- address.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t<%= _('Edit Address').translate() %>\n\t\t<\/a>\n\n\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= _('Remove').translate() %>\n\t\t<\/button>\n\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcard', function (creditcard, options) { %>\n<%\n\tvar payment_name = creditcard.get('paymentmethod').name\n\t,\texpiration_month = creditcard.get('expmonth')\n\t,\ticons = options.icons;\n%>\n<article class=\"creditcard\">\n\t<% if (options.showSecurityCodeForm) { %>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span6\">\n\t<% } %>\n\t\t\t<h4 class=\"summary-header\">\n\t\t\t<% if (payment_name in icons) { %>\n\t\t\t\t<img class=\"credit-card-icon\" src=\"<%- icons[payment_name] %>\" alt=\"<%- payment_name %>\">\n\t\t\t<% } else { %>\n\t\t\t\t<%= payment_name %>\n\t\t\t<% } %> &ndash; \n\t\t\t<%= _('Ending in $(0)').translate(creditcard.get('ccnumber').replace(\/\\*\/g, '')) %>\n\t\t\t<\/h4>\n\t\t\t<p>\n\t\t\t\t<%= creditcard.get('ccname') %> <br>\n\t\t\t\t<%= _('Expires').translate() + ' ' + (expiration_month < 10 ? '0' : '') + expiration_month + '\/' + creditcard.get('expyear') %>\n\t\t\t<\/p>\n\t\t\t<% if (options.showDefaults) { %>\n\t\t\t<p>\n\t\t\t\t<% if (creditcard.get('ccdefault') === 'T') { %>\n\t\t\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t\t\t<%= _('Default Credit Card').translate() %>\n\t\t\t\t<% } %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<% if (options.showSecurityCodeForm) { %>\n\t\t<\/div>\n\t\t<div class=\"span6\">\n\t\t\t<%= SC.macros.creditcardSecurityNumberForm({\n\t\t\t\terror: options.securityNumberError\n            ,   value: options.ccsecuritycode\n\t\t\t}) %>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-primary btn-block\" data-action=\"select\" data-id=\"<%- creditcard.get('internalid')%>\">\n\t\t\t<%= options.selectMessage %>\n\t\t<\/button>\n\t<% } %>\n\n\t<% if (options.showActions) { %>\n\t\t<p class=\"actions\">\n\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/<%= creditcard.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Edit Card').translate() %>\n\t\t\t<\/a>\n\t\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- creditcard.get('internalid') %>\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/button>\n\t\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardForm', function (creditcard, options) { %>\n<% var application = options.application %>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<%\n\t\t\t\tvar icons = application.getConfig('creditCardIcons')\n\t\t\t\t,\tselected_payment_method = creditcard.get('paymentmethod')\n\t\t\t\t,\tcreditcards = _.where(application.getConfig('siteSettings.paymentmethods'), {ispaypal : 'F'});\n\t\t\t%>\n\t\t\t<input type=\"hidden\" id=\"paymentmethod\" name=\"paymentmethod\" value=\"<%- selected_payment_method && selected_payment_method.internalid %>\"\/>\n\t\t\t<% _.each(creditcards, function (paymentmethod) { %>\n\t\t\t\t<img\n\t\t\t\t\tclass=\"credit-card-icon <%- creditcard.isNew() || selected_payment_method && paymentmethod.internalid === selected_payment_method.internalid ? '' : 'hidden' %>\"\n\t\t\t\t\tsrc=\"<%- icons[paymentmethod.name] %>\"\n\t\t\t\t\tdata-value=\"<%- paymentmethod.internalid %>\"\n\t\t\t\t\talt=\"<%- paymentmethod.name %>\"\n\t\t\t\t\tdata-image=\"creditcard-icon\"\n\t\t\t\t\/>\n\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"ccnumber\">\n\t\t\t<%= _('Credit Card Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"ccnumber\" name=\"ccnumber\" value=\"<%- creditcard.get('ccnumber') %>\" <%= !creditcard.isNew() ? 'disabled':'' %> >\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"expmonth\">\n\t\t\t<%= _('Expiration Date').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<select class=\"input-mini\" id=\"expmonth\" name=\"expmonth\">\t\t\t\t\t\n\t\t\t\t<% var currentMonth = creditcard.get('expmonth') ? creditcard.get('expmonth') : options.currentMonth  %>\n\t\t\t\t<% _.each(options.months, function (month, index) { %>\n\t\t\t\t\t<option value=\"<%- month %>\" <%= month == currentMonth ? 'selected' : '' %>>\n\t\t\t\t\t\t<%= month %>\n\t\t\t\t\t<\/option>\n\t\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t\t<select class=\"input-small\" id=\"expyear\" name=\"expyear\">\n\t\t\t\t<% _.each(options.years, function (year, index) { %>\n\t\t\t\t\t<option value=\"<%- year %>\" <%= year == creditcard.get('expyear') ? 'selected' : '' %> <%= options.expyear == year ? 'disabled' : '' %>>\n\t\t\t\t\t\t<%= year %>\n\t\t\t\t\t<\/option>\n\t\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% if (options.showSecurityCodeForm) { %>\n\t\t<%= SC.macros.creditcardSecurityNumberForm() %>\n\t<% } %>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"ccname\">\n\t\t\t<%= _('Name on Card').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"ccname\" name=\"ccname\" maxlength=\"26\" value=\"<%- creditcard.get('ccname') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<% if (application.getUser().get('isGuest') !== 'T' && options.showDefaults) { %>\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tid=\"ccdefault\"\n\t\t\t\t\tvalue=\"T\"\n\t\t\t\t\tdata-unchecked-value=\"F\"\n\t\t\t\t\tname=\"ccdefault\"\n\t\t\t\t\t<%= creditcard.get('ccdefault') === 'T' ? 'checked' : '' %>\n\t\t\t\t>\n\t\t\t\t<%= _('Make this my default credit card').translate() %>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n<\/fieldset>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcard', function (creditcard, options) { %>\n<%\n\tvar payment_name = creditcard.get('paymentmethod').name\n\t,\texpiration_month = creditcard.get('expmonth')\n\t,\ticons = options.icons;\n%>\n<article class=\"creditcard\">\n\t<% if (options.showSecurityCodeForm) { %>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span6\">\n\t<% } %>\n\t\t\t<h4 class=\"summary-header\">\n\t\t\t<% if (payment_name in icons) { %>\n\t\t\t\t<img class=\"credit-card-icon\" src=\"<%- icons[payment_name] %>\" alt=\"<%- payment_name %>\">\n\t\t\t<% } else { %>\n\t\t\t\t<%= payment_name %>\n\t\t\t<% } %> &ndash; \n\t\t\t<%= _('Ending in $(0)').translate(creditcard.get('ccnumber').replace(\/\\*\/g, '')) %>\n\t\t\t<\/h4>\n\t\t\t<p>\n\t\t\t\t<%= creditcard.get('ccname') %> <br>\n\t\t\t\t<%= _('Expires').translate() + ' ' + (expiration_month < 10 ? '0' : '') + expiration_month + '\/' + creditcard.get('expyear') %>\n\t\t\t<\/p>\n\t\t\t<% if (options.showDefaults) { %>\n\t\t\t<p>\n\t\t\t\t<% if (creditcard.get('ccdefault') === 'T') { %>\n\t\t\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t\t\t<%= _('Default Credit Card').translate() %>\n\t\t\t\t<% } %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<% if (options.showSecurityCodeForm) { %>\n\t\t<\/div>\n\t\t<div class=\"span6\">\n\t\t\t<%= SC.macros.creditcardSecurityNumberForm({\n\t\t\t\terror: options.securityNumberError\n            ,   value: options.ccsecuritycode\n\t\t\t}) %>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-primary btn-block\" data-action=\"select\" data-id=\"<%- creditcard.get('internalid')%>\">\n\t\t\t<%= options.selectMessage %>\n\t\t<\/button>\n\t<% } %>\n\n\t<% if (options.showActions) { %>\n\t\t<p class=\"actions\">\n\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/<%= creditcard.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Edit Card').translate() %>\n\t\t\t<\/a>\n\t\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- creditcard.get('internalid') %>\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/button>\n\t\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardForm', function (creditcard, options) { %>\n<% var application = options.application %>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<%\n\t\t\t\tvar icons = application.getConfig('creditCardIcons')\n\t\t\t\t,\tselected_payment_method = creditcard.get('paymentmethod')\n\t\t\t\t,\tcreditcards = _.where(application.getConfig('siteSettings.paymentmethods'), {ispaypal : 'F'});\n\t\t\t%>\n\t\t\t<input type=\"hidden\" id=\"paymentmethod\" name=\"paymentmethod\" value=\"<%- selected_payment_method && selected_payment_method.internalid %>\"\/>\n\t\t\t<% _.each(creditcards, function (paymentmethod) { %>\n\t\t\t\t<img\n\t\t\t\t\tclass=\"credit-card-icon <%- creditcard.isNew() || selected_payment_method && paymentmethod.internalid === selected_payment_method.internalid ? '' : 'hidden' %>\"\n\t\t\t\t\tsrc=\"<%- icons[paymentmethod.name] %>\"\n\t\t\t\t\tdata-value=\"<%- paymentmethod.internalid %>\"\n\t\t\t\t\talt=\"<%- paymentmethod.name %>\"\n\t\t\t\t\tdata-image=\"creditcard-icon\"\n\t\t\t\t\/>\n\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"ccnumber\">\n\t\t\t<%= _('Credit Card Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"ccnumber\" name=\"ccnumber\" value=\"<%- creditcard.get('ccnumber') %>\" <%= !creditcard.isNew() ? 'disabled':'' %> >\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"expmonth\">\n\t\t\t<%= _('Expiration Date').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<select class=\"input-mini\" id=\"expmonth\" name=\"expmonth\">\t\t\t\t\t\n\t\t\t\t<% var currentMonth = creditcard.get('expmonth') ? creditcard.get('expmonth') : options.currentMonth  %>\n\t\t\t\t<% _.each(options.months, function (month, index) { %>\n\t\t\t\t\t<option value=\"<%- month %>\" <%= month == currentMonth ? 'selected' : '' %>>\n\t\t\t\t\t\t<%= month %>\n\t\t\t\t\t<\/option>\n\t\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t\t<select class=\"input-small\" id=\"expyear\" name=\"expyear\">\n\t\t\t\t<% _.each(options.years, function (year, index) { %>\n\t\t\t\t\t<option value=\"<%- year %>\" <%= year == creditcard.get('expyear') ? 'selected' : '' %> <%= options.expyear == year ? 'disabled' : '' %>>\n\t\t\t\t\t\t<%= year %>\n\t\t\t\t\t<\/option>\n\t\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% if (options.showSecurityCodeForm) { %>\n\t\t<%= SC.macros.creditcardSecurityNumberForm() %>\n\t<% } %>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"ccname\">\n\t\t\t<%= _('Name on Card').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"ccname\" name=\"ccname\" maxlength=\"26\" value=\"<%- creditcard.get('ccname') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<% if (application.getUser().get('isGuest') !== 'T' && options.showDefaults) { %>\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tid=\"ccdefault\"\n\t\t\t\t\tvalue=\"T\"\n\t\t\t\t\tdata-unchecked-value=\"F\"\n\t\t\t\t\tname=\"ccdefault\"\n\t\t\t\t\t<%= creditcard.get('ccdefault') === 'T' ? 'checked' : '' %>\n\t\t\t\t>\n\t\t\t\t<%= _('Make this my default credit card').translate() %>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n<\/fieldset>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('modal', function (page_header) { %>\n<div id=\"modal\" class=\"modal fade\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n\t\t\t\t\t&times;\n\t\t\t\t<\/button>\n\t\t\t\t<h3 class=\"modal-title\">\n\t\t\t\t\t<%= page_header || '&nbsp;' %>\n\t\t\t\t<\/h3>\n\t\t\t<\/div>\n\t\t\t<div id=\"modal-body\" class=\"modal-body\"><\/div>\n\t\t<\/div><!-- \/.modal-content -->\n\t<\/div><!-- \/.modal-dialog -->\n<\/div><!-- \/.modal -->\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('message', function ( message, type, closable ) { %>\n<div class=\"alert <%= type ? 'alert-'+ type : '' %>\">\n\t<% if ( closable ) { %>\n\t\t<button class=\"close\" data-dismiss=\"alert\">&times;<\/button>\n\t<% } %>\n\t<% if ( _.isObject( message ) ) { %>\n\t\t<ul>\n\t\t<% _.each(message, function(item, index) { %>\n\t\t\t<li><%= item %><\/li>\n\t\t<% }) %>\n\t\t<ul>\n\t<% } else { %>\n\t\t<%= message %>\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('backToTop', function () { %>\n<div id=\"back-to-top\" class=\"text-center back-to-top\">\n\t<a href=\"#\" data-action=\"back-to-top\">\n\t\t<i class=\"icon-arrow-up\"><\/i>\n\t\t<%= _('Top').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('formatPaymentMethod', function (payment, creditCardIcons) {\n\t%><span class=\"payment-method-formatted payment-method-formatted-<%=payment.get('type')%>\"><%\n\tswitch (payment.get('type')){\n\t\tcase 'creditcard':\n\t\t\tvar creditcard = payment.get('creditcard');\n\t\t\tif(creditcard){\n\t\t\t\tvar ccpname = creditcard.paymentmethod ? creditcard.paymentmethod.name : ''; %> \n\t\t\t\t<b class=\"credit-card-icon\"> \n\t\t\t\t\t<% if(creditCardIcons && ccpname in creditCardIcons){ %>\n\t\t\t\t\t\t<img class=\"credit-card-icon\" src=\"<%= creditCardIcons[ccpname] %>\" alt=\"<%= ccpname %>\">\n\t\t\t\t\t<% }else{ %>\n\t\t\t\t\t\t<%= ccpname %>\t\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<span>&nbsp;-&nbsp;<\/span>\n\t\t\t\t\t<%= _('Ending in $(0)').translate(creditcard.ccnumber.replace(\/\\*\/g, '')) %>\n\t\t\t\t<\/b>\n\t\t\t\t<br>\n\t\t\t\t<b class=\"credit-card-name\">\n\t\t\t\t\t<%= creditcard.ccname %>\n\t\t\t\t<\/b>\n\t\t\t\t<br>\n\t\t\t\t<span class=\"credit-card-expiredate\">\n\t\t\t\t\t<%= _('Expires ').translate() + creditcard.ccexpiredate %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'giftcertificate':\n\t\t\tvar code_length = payment.get('giftcertificate').code.length; %>\t\t\t\t\t\n\t\t\t<%= _('Ending in: $(0)').translate(payment.get('giftcertificate').code.substring(code_length - 4, code_length)) %>\n\t\t\t<% break;\n\t\tcase 'invoice': %>\n\t\t\t<b class=\"payment-method-formatted-invoice-terms\">\n\t\t\t\t<%= _('Invoice: Terms $(0)').translate(payment.get('paymentterms').name) %>\n\t\t\t<\/b> \n\t\t\t<% if(payment.get('purchasenumber')) { %>\n\t\t\t\t<br\/> \n\t\t\t\t<span class=\"payment-method-formatted-invoice-purchasenumber\">\n\t\t\t\t\t<%= _('Purchase Number: $(0)').translate(payment.get('purchasenumber')) %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'paypal': %>\n\t\t\t<b>\n\t\t\t\t<%= _('Payment via Paypal').translate() %>\n\t\t\t<\/b>\n\t\t\t<%\n\t\t\tbreak;\n\t\tdefault: %>\n\t\t<%= payment.get('type') %><%\n\t}\n\t%><\/span><%\n}) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('pagination', function (configuration) { %>\n<%\n\t\/\/ Pagination Macro\n\t\/\/ ================\n\t\/\/ Displays a pagination component based on the configuration object.\n\t\/\/ The configuration object understands the following keys: \n\t\/\/ * currentPage: (Required) The page you are currently showing.\n\t\/\/ * totalPages: (Required) The total amount of pages you can show (This is not items, you need to do the math of items\/items_per_page outside this macro).\n\t\/\/ * pager: (Required) a function that recives a page number as parameter and returns the url that the mentioned page number should point to.\n\t\/\/ * showPageList: a boolean to show or hide the pages list portion of this component, defauts to true.\n\t\/\/ * pagesToShow: The amount of pages you want to be displayed in the pages list, defaults to 4.\n\t\/\/ * showPageIndicator: a boolean to show or hide a note on which page you have selected and how many pages are there, defaults to false\n\t\/\/ * extraClass: a string that will be added to the class attribute to the component\n\n\n\tvar current_page = parseInt(configuration.currentPage, 10)\n\t,\ttotal_pages = parseInt(configuration.totalPages, 10)\n\t,\tpager = configuration.pager\n\t,\tpages_to_show = parseInt(configuration.pagesToShow, 10) || 4\n\t,\trange_start = 1\n\t,\trange_end = total_pages\n\t,\tpadding_left = (pages_to_show % 2 === 0) ? (pages_to_show \/ 2) - 1 : parseInt(pages_to_show \/ 2, 10) \/\/ ;)\n\t,\tshow_page_list = (_.isBoolean(configuration.showPageList)) ? configuration.showPageList : true\n\t,\tshow_page_indicator = configuration.showPageIndicator || false; \n\n\t\n\tif (show_page_list && pages_to_show < total_pages)\n\t{\n\t\t\/\/ if we are getting closer to the end we need to compute from the end to the begingn \n\t\tif (pages_to_show - padding_left > total_pages - current_page)\n\t\t{\n\t\t\trange_start = total_pages + 1 - pages_to_show;\n\t\t\trange_end = total_pages + 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\trange_start = current_page - padding_left < 1 ? 1 : current_page - padding_left;\n\t\t\trange_end = range_start + pages_to_show > total_pages ? total_pages : range_start + pages_to_show;\n\t\t}\n\t}\n\telse if (show_page_list)\n\t{\n\t\trange_end = total_pages + 1;\n\t}\n\tvar pages = _.range(range_start, range_end);\n%>\n\n<% if (total_pages >= current_page && current_page > 0 && pages.length > 1) { %>\n<div class=\"pagination <%= configuration.extraClass || '' %>\">\n\n\t<% if (show_page_indicator) { %>\n\t\t<ul class=\"pagination-page-indicator\">\n\t\t\t<li>\n\t\t\t\t<span class=\"\">\n\t\t\t\t\t<%= _('$(0) of $(1)').translate(current_page, total_pages) %>\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t\n\t<% } %>\n\n\t<ul class=\"pagination-links <% if (!show_page_list) { %>pagination-links-compact<% } %>\">\n\t<% if (current_page !== 1) { %>\n\t\t<li>\n\t\t\t<a rel=\"prev\" href=\"<%- _(pager(current_page-1)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t\n\t<% if (show_page_list) { %>\n\t\t<% if (range_start > 1) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\n\t\t<% _.each(pages, function (page) { %>\n\t\t\t<% if (current_page !== page) { %>\n\t\t\t\t<li><a href=\"<%- pager(page) %>\"><%= page %><\/a><\/li>\n\t\t\t<% } else { %>\n\t\t\t\t<li class=\"active\"><a href=\"<%- _(pager(page)).fixUrl() %>\"><%= page %><\/a><\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\n\t\t<% if (range_end < total_pages) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (current_page !== total_pages){ %>\n\t\t<li>\n\t\t\t<a rel=\"next\" href=\"<%- _(pager(current_page+1)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t<\/ul>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('breadcrumb', function(pages) { %>\n<% pages = _.isUndefined(pages) || _.isArray(pages) ? pages : [pages]; %>\n<div id=\"banner-breadcrumb-top\" class=\"content-banner banner-breadcrumb-top\"><\/div>\n<ul class=\"breadcrumb\" itemprop=\"breadcrumb\">\n<% _.each(pages, function(link, index) { %>\n\t<% if (link) { %>\n\t\t<% if (index < pages.length - 1) { %>\n\t\t\t<li>\n\t\t\t\t<a <%= _.objectToAtrributes(link) %>><%= link.text %><\/a>\n\t\t\t\t<span class=\"divider\">\/<\/span>\n\t\t\t<\/li>\n\t\t<% } else { %>\n\t\t\t<li class=\"active\">\n\t\t\t\t<%= link.text %>\n\t\t\t<\/li>\n\t\t<% } %>\n\t<% } %>\n<% }) %>\n<\/ul>\n<div id=\"banner-breadcrumb-bottom\" class=\"content-banner banner-breadcrumb-bottom\"><\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('currencySelector', function (currencies, selected_code) { %>\n<% if (currencies && currencies.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<%= SC.ENVIRONMENT.siteSettings.shopperCurrency.symbol %>\n\t<\/span>\n\t<select data-toggle=\"currency-selector\" class=\"input-medium\">\n\t<% _.each(currencies, function (currency) { %>\n\t\t<option value=\"<%- currency.code %>\" <%= selected_code === currency.code ? 'selected' : '' %>>\n\t\t\t<%= currency.title || currency.name %>\n\t\t<\/option>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('countriesDropdown', function (countries, selected_country, manage) { %>\n<select class=\"input-xlarge\" id=\"<%= manage ? manage : ''%>country\" name=\"country\" data-type=\"country\">\n\t<option value=\"\">\n\t\t<%= _('-- Select --').translate() %>\n\t<\/option>\n\t<% _.each(_.values(countries), function (country, index) { %>\n\t\t<option value=\"<%- country.code %>\" <%= country.code === selected_country ? 'selected' : '' %>>\n\t\t\t<%= country.name %>\n\t\t<\/option>\n\t<% }) %>\n<\/select>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('displayInRows', function(items, macro, items_per_row) { %>\n\t<% items_per_row = parseInt(items_per_row, 10) || 3 %>\n\t<% var span = 12 \/ items_per_row %>\n\t<div class=\"row-fluid\">\n\t<% _.each(items, function (item, index){ %>\n\t\t<% if ((index % items_per_row) == 0 && index > 0){ %>\n\t\t\t<\/div>\n\t\t\t<div class=\"row-fluid\">\n\t\t<% } %>\n\t\t<div class=\"span<%= span %>\">\n\t\t\t<% if (_.isFunction(macro)){ %>\n\t\t\t\t<%= macro(item) %>\n\t\t\t<% }else{ %>\n\t\t\t\t<%= item %>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<% }) %>\n\t<\/div>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('languageSelector', function (languages, selected_locale) { %>\n<% if (languages && languages.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"lenguage-selector\" class=\"input-medium\">\n\t<% _.each(languages, function(language) { %>\n\t\t<option value=\"<%- language.locale %>\" <%= language.locale === selected_locale ? 'selected' : '' %>>\n\t\t\t<%= language.title || language.name %>\n\t\t<\/option>\n\t<%})%>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('hostSelector', function (hosts, current_host) { %>\n<% if (hosts && hosts.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"host-selector\" class=\"input-medium\">\n\t<% _.each(hosts, function(host) { %>\n\t\t<% if (host.languages && host.languages.length) { %>\n\t\t\t<optgroup label=\"<%- host.title %>\">\n\t\t\t<% _.each(host.languages, function(language) { %>\n\t\t\t\t<option value=\"<%- language.host %>\" <%= language.host === current_host ? 'selected' : '' %>>\n\t\t\t\t\t<%= language.title || language.name %>\n\t\t\t\t<\/option>\n\t\t\t<%})%>\n\t\t\t<\/optgroup>\n\t\t<% } %>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('relatedItem', function (item, application) { %>\n<div class=\"item-cell item-cell-grid\">\n\t<a class=\"thumbnail\" href=\"<%= item.get('_url') %>\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img src=\"<%= application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t<\/a>\n\t<h5>\n\t\t<a href=\"<%= item.get('_url') %>\">\n\t\t\t<%= item.get('_name') %>\n\t\t<\/a>\n\t<\/h5>\n\t<a class=\"btn btn-small btn-primary\" href=\"<%= item.get('_url') %>\">\n\t\t<%= _('See more').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('statesDropdown', function (options) { %>\n<%\n\tvar country = options.selectedCountry && options.countries[options.selectedCountry]\n\t,\tstates = country && country.states;\n%>\n<% if (country && states) { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State').translate() %>\n\t\t<small><%= _('(required)').translate() %><\/small>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<select class=\"input-xlarge\" id=\"<%= options.manage ? options.manage : ''%>state\" name=\"state\" data-type=\"state\">\n\t\t\t<option value=\"\">\n\t\t\t\t<%= _('-- Select --').translate() %>\n\t\t\t<\/option>\n\t\t\t<% _.each(states, function (state) { %>\n\t\t\t<option value=\"<%- state.code %>\" <%= state.code === options.selectedState ? 'selected' : '' %>>\n\t\t\t\t<%= state.name %>\n\t\t\t<\/option>\n\t\t\t<% }) %>\n\t\t<\/select>\n\t<\/div>\n<% } else { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State\/Province\/Region').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tid=\"<%= options.manage ? options.manage : ''%>state\"\n\t\t\tname=\"state\"\n\t\t\tclass=\"input-xlarge\"\n\t\t\tvalue=\"<%- options.selectedState %>\"\n\t\t\tdata-type=\"state\"\n\t\t\tplaceholder=\"<%- _('(optional)').translate() %>\"\n\t\t>\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('message', function ( message, type, closable ) { %>\n<div class=\"alert <%= type ? 'alert-'+ type : '' %>\">\n\t<% if ( closable ) { %>\n\t\t<button class=\"close\" data-dismiss=\"alert\">&times;<\/button>\n\t<% } %>\n\t<% if ( _.isObject( message ) ) { %>\n\t\t<ul>\n\t\t<% _.each(message, function(item, index) { %>\n\t\t\t<li><%= item %><\/li>\n\t\t<% }) %>\n\t\t<ul>\n\t<% } else { %>\n\t\t<%= message %>\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('modal', function (page_header) { %>\n<div id=\"modal\" class=\"modal fade\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n\t\t\t\t\t&times;\n\t\t\t\t<\/button>\n\t\t\t\t<h3 class=\"modal-title\">\n\t\t\t\t\t<%= page_header || '&nbsp;' %>\n\t\t\t\t<\/h3>\n\t\t\t<\/div>\n\t\t\t<div id=\"modal-body\" class=\"modal-body\"><\/div>\n\t\t<\/div><!-- \/.modal-content -->\n\t<\/div><!-- \/.modal-dialog -->\n<\/div><!-- \/.modal -->\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('backToTop', function () { %>\n<div id=\"back-to-top\" class=\"text-center back-to-top\">\n\t<a href=\"#\" data-action=\"back-to-top\">\n\t\t<i class=\"icon-arrow-up\"><\/i>\n\t\t<%= _('Top').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('formatPaymentMethod', function (payment, creditCardIcons) {\n\t%><span class=\"payment-method-formatted payment-method-formatted-<%=payment.get('type')%>\"><%\n\tswitch (payment.get('type')){\n\t\tcase 'creditcard':\n\t\t\tvar creditcard = payment.get('creditcard');\n\t\t\tif(creditcard){\n\t\t\t\tvar ccpname = creditcard.paymentmethod ? creditcard.paymentmethod.name : ''; %> \n\t\t\t\t<b class=\"credit-card-icon\"> \n\t\t\t\t\t<% if(creditCardIcons && ccpname in creditCardIcons){ %>\n\t\t\t\t\t\t<img class=\"credit-card-icon\" src=\"<%= creditCardIcons[ccpname] %>\" alt=\"<%= ccpname %>\">\n\t\t\t\t\t<% }else{ %>\n\t\t\t\t\t\t<%= ccpname %>\t\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<span>&nbsp;-&nbsp;<\/span>\n\t\t\t\t\t<%= _('Ending in $(0)').translate(creditcard.ccnumber.replace(\/\\*\/g, '')) %>\n\t\t\t\t<\/b>\n\t\t\t\t<br>\n\t\t\t\t<b class=\"credit-card-name\">\n\t\t\t\t\t<%= creditcard.ccname %>\n\t\t\t\t<\/b>\n\t\t\t\t<br>\n\t\t\t\t<span class=\"credit-card-expiredate\">\n\t\t\t\t\t<%= _('Expires ').translate() + creditcard.ccexpiredate %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'giftcertificate':\n\t\t\tvar code_length = payment.get('giftcertificate').code.length; %>\t\t\t\t\t\n\t\t\t<%= _('Ending in: $(0)').translate(payment.get('giftcertificate').code.substring(code_length - 4, code_length)) %>\n\t\t\t<% break;\n\t\tcase 'invoice': %>\n\t\t\t<b class=\"payment-method-formatted-invoice-terms\">\n\t\t\t\t<%= _('Invoice: Terms $(0)').translate(payment.get('paymentterms').name) %>\n\t\t\t<\/b> \n\t\t\t<% if(payment.get('purchasenumber')) { %>\n\t\t\t\t<br\/> \n\t\t\t\t<span class=\"payment-method-formatted-invoice-purchasenumber\">\n\t\t\t\t\t<%= _('Purchase Number: $(0)').translate(payment.get('purchasenumber')) %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'paypal': %>\n\t\t\t<b>\n\t\t\t\t<%= _('Payment via Paypal').translate() %>\n\t\t\t<\/b>\n\t\t\t<%\n\t\t\tbreak;\n\t\tdefault: %>\n\t\t<%= payment.get('type') %><%\n\t}\n\t%><\/span><%\n}) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('breadcrumb', function(pages) { %>\n<% pages = _.isUndefined(pages) || _.isArray(pages) ? pages : [pages]; %>\n<div id=\"banner-breadcrumb-top\" class=\"content-banner banner-breadcrumb-top\"><\/div>\n<ul class=\"breadcrumb\" itemprop=\"breadcrumb\">\n<% _.each(pages, function(link, index) { %>\n\t<% if (link) { %>\n\t\t<% if (index < pages.length - 1) { %>\n\t\t\t<li>\n\t\t\t\t<a <%= _.objectToAtrributes(link) %>><%= link.text %><\/a>\n\t\t\t\t<span class=\"divider\">\/<\/span>\n\t\t\t<\/li>\n\t\t<% } else { %>\n\t\t\t<li class=\"active\">\n\t\t\t\t<%= link.text %>\n\t\t\t<\/li>\n\t\t<% } %>\n\t<% } %>\n<% }) %>\n<\/ul>\n<div id=\"banner-breadcrumb-bottom\" class=\"content-banner banner-breadcrumb-bottom\"><\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('pagination', function (configuration) { %>\n<%\n\t\/\/ Pagination Macro\n\t\/\/ ================\n\t\/\/ Displays a pagination component based on the configuration object.\n\t\/\/ The configuration object understands the following keys: \n\t\/\/ * currentPage: (Required) The page you are currently showing.\n\t\/\/ * totalPages: (Required) The total amount of pages you can show (This is not items, you need to do the math of items\/items_per_page outside this macro).\n\t\/\/ * pager: (Required) a function that recives a page number as parameter and returns the url that the mentioned page number should point to.\n\t\/\/ * showPageList: a boolean to show or hide the pages list portion of this component, defauts to true.\n\t\/\/ * pagesToShow: The amount of pages you want to be displayed in the pages list, defaults to 4.\n\t\/\/ * showPageIndicator: a boolean to show or hide a note on which page you have selected and how many pages are there, defaults to false\n\t\/\/ * extraClass: a string that will be added to the class attribute to the component\n\n\n\tvar current_page = parseInt(configuration.currentPage, 10)\n\t,\ttotal_pages = parseInt(configuration.totalPages, 10)\n\t,\tpager = configuration.pager\n\t,\tpages_to_show = parseInt(configuration.pagesToShow, 10) || 4\n\t,\trange_start = 1\n\t,\trange_end = total_pages\n\t,\tpadding_left = (pages_to_show % 2 === 0) ? (pages_to_show \/ 2) - 1 : parseInt(pages_to_show \/ 2, 10) \/\/ ;)\n\t,\tshow_page_list = (_.isBoolean(configuration.showPageList)) ? configuration.showPageList : true\n\t,\tshow_page_indicator = configuration.showPageIndicator || false; \n\n\t\n\tif (show_page_list && pages_to_show < total_pages)\n\t{\n\t\t\/\/ if we are getting closer to the end we need to compute from the end to the begingn \n\t\tif (pages_to_show - padding_left > total_pages - current_page)\n\t\t{\n\t\t\trange_start = total_pages + 1 - pages_to_show;\n\t\t\trange_end = total_pages + 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\trange_start = current_page - padding_left < 1 ? 1 : current_page - padding_left;\n\t\t\trange_end = range_start + pages_to_show > total_pages ? total_pages : range_start + pages_to_show;\n\t\t}\n\t}\n\telse if (show_page_list)\n\t{\n\t\trange_end = total_pages + 1;\n\t}\n\tvar pages = _.range(range_start, range_end);\n%>\n\n<% if (total_pages >= current_page && current_page > 0 && pages.length > 1) { %>\n<div class=\"pagination <%= configuration.extraClass || '' %>\">\n\n\t<% if (show_page_indicator) { %>\n\t\t<ul class=\"pagination-page-indicator\">\n\t\t\t<li>\n\t\t\t\t<span class=\"\">\n\t\t\t\t\t<%= _('$(0) of $(1)').translate(current_page, total_pages) %>\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t\n\t<% } %>\n\n\t<ul class=\"pagination-links <% if (!show_page_list) { %>pagination-links-compact<% } %>\">\n\t<% if (current_page !== 1) { %>\n\t\t<li>\n\t\t\t<a rel=\"prev\" href=\"<%- _(pager(current_page-1)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t\n\t<% if (show_page_list) { %>\n\t\t<% if (range_start > 1) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\n\t\t<% _.each(pages, function (page) { %>\n\t\t\t<% if (current_page !== page) { %>\n\t\t\t\t<li><a href=\"<%- pager(page) %>\"><%= page %><\/a><\/li>\n\t\t\t<% } else { %>\n\t\t\t\t<li class=\"active\"><a href=\"<%- _(pager(page)).fixUrl() %>\"><%= page %><\/a><\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\n\t\t<% if (range_end < total_pages) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (current_page !== total_pages){ %>\n\t\t<li>\n\t\t\t<a rel=\"next\" href=\"<%- _(pager(current_page+1)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t<\/ul>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('currencySelector', function (currencies, selected_code) { %>\n<% if (currencies && currencies.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<%= SC.ENVIRONMENT.siteSettings.shopperCurrency.symbol %>\n\t<\/span>\n\t<select data-toggle=\"currency-selector\" class=\"input-medium\">\n\t<% _.each(currencies, function (currency) { %>\n\t\t<option value=\"<%- currency.code %>\" <%= selected_code === currency.code ? 'selected' : '' %>>\n\t\t\t<%= currency.title || currency.name %>\n\t\t<\/option>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('countriesDropdown', function (countries, selected_country, manage) { %>\n<select class=\"input-xlarge\" id=\"<%= manage ? manage : ''%>country\" name=\"country\" data-type=\"country\">\n\t<option value=\"\">\n\t\t<%= _('-- Select --').translate() %>\n\t<\/option>\n\t<% _.each(_.values(countries), function (country, index) { %>\n\t\t<option value=\"<%- country.code %>\" <%= country.code === selected_country ? 'selected' : '' %>>\n\t\t\t<%= country.name %>\n\t\t<\/option>\n\t<% }) %>\n<\/select>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('displayInRows', function(items, macro, items_per_row) { %>\n\t<% items_per_row = parseInt(items_per_row, 10) || 3 %>\n\t<% var span = 12 \/ items_per_row %>\n\t<div class=\"row-fluid\">\n\t<% _.each(items, function (item, index){ %>\n\t\t<% if ((index % items_per_row) == 0 && index > 0){ %>\n\t\t\t<\/div>\n\t\t\t<div class=\"row-fluid\">\n\t\t<% } %>\n\t\t<div class=\"span<%= span %>\">\n\t\t\t<% if (_.isFunction(macro)){ %>\n\t\t\t\t<%= macro(item) %>\n\t\t\t<% }else{ %>\n\t\t\t\t<%= item %>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<% }) %>\n\t<\/div>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('languageSelector', function (languages, selected_locale) { %>\n<% if (languages && languages.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"lenguage-selector\" class=\"input-medium\">\n\t<% _.each(languages, function(language) { %>\n\t\t<option value=\"<%- language.locale %>\" <%= language.locale === selected_locale ? 'selected' : '' %>>\n\t\t\t<%= language.title || language.name %>\n\t\t<\/option>\n\t<%})%>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('hostSelector', function (hosts, current_host) { %>\n<% if (hosts && hosts.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"host-selector\" class=\"input-medium\">\n\t<% _.each(hosts, function(host) { %>\n\t\t<% if (host.languages && host.languages.length) { %>\n\t\t\t<optgroup label=\"<%- host.title %>\">\n\t\t\t<% _.each(host.languages, function(language) { %>\n\t\t\t\t<option value=\"<%- language.host %>\" <%= language.host === current_host ? 'selected' : '' %>>\n\t\t\t\t\t<%= language.title || language.name %>\n\t\t\t\t<\/option>\n\t\t\t<%})%>\n\t\t\t<\/optgroup>\n\t\t<% } %>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('relatedItem', function (item, application) { %>\n<div class=\"item-cell item-cell-grid\">\n\t<a class=\"thumbnail\" href=\"<%= item.get('_url') %>\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img src=\"<%= application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t<\/a>\n\t<h5>\n\t\t<a href=\"<%= item.get('_url') %>\">\n\t\t\t<%= item.get('_name') %>\n\t\t<\/a>\n\t<\/h5>\n\t<a class=\"btn btn-small btn-primary\" href=\"<%= item.get('_url') %>\">\n\t\t<%= _('See more').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('statesDropdown', function (options) { %>\n<%\n\tvar country = options.selectedCountry && options.countries[options.selectedCountry]\n\t,\tstates = country && country.states;\n%>\n<% if (country && states) { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State').translate() %>\n\t\t<small><%= _('(required)').translate() %><\/small>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<select class=\"input-xlarge\" id=\"<%= options.manage ? options.manage : ''%>state\" name=\"state\" data-type=\"state\">\n\t\t\t<option value=\"\">\n\t\t\t\t<%= _('-- Select --').translate() %>\n\t\t\t<\/option>\n\t\t\t<% _.each(states, function (state) { %>\n\t\t\t<option value=\"<%- state.code %>\" <%= state.code === options.selectedState ? 'selected' : '' %>>\n\t\t\t\t<%= state.name %>\n\t\t\t<\/option>\n\t\t\t<% }) %>\n\t\t<\/select>\n\t<\/div>\n<% } else { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State\/Province\/Region').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tid=\"<%= options.manage ? options.manage : ''%>state\"\n\t\t\tname=\"state\"\n\t\t\tclass=\"input-xlarge\"\n\t\t\tvalue=\"<%- options.selectedState %>\"\n\t\t\tdata-type=\"state\"\n\t\t\tplaceholder=\"<%- _('(optional)').translate() %>\"\n\t\t>\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('homePayment', function(view) { %>\n\t<article class=\"well home-payment\">\n\t\t<div class=\"well-header\">\n\t\t\t<h4><%= _('Payment').translate() %><\/h4>\n\t\t<\/div>\n\t\t<div class=\"well-body\">\n\t\t<% if (!view.defaultCreditCard) { %>\n\t\t\t<p><%= _('We have no default credit card on file for this account.').translate() %><\/p>\n\t\t\t<a href=\"\/creditcards\/new\" data-toggle=\"show-in-modal\"><%= _('Add a Credit Card').translate() %><\/a>\n\t\t<\/div>\n\t\t<% } else { %>\n\t\t\t<%= SC.macros.creditcard(view.defaultCreditCard, {icons: view.application.getConfig('creditCardIcons')}) %>\n\t\t<\/div>\n\t\t<div class=\"well-footer\">\n\t\t\t<a href=\"\/creditcards\/<%= view.defaultCreditCard.get('internalid') %>\" data-toggle=\"show-in-modal\"><%= _('Edit').translate() %><\/a>\n\t\t<\/div>\n\t\t<% } %>\n\n\t<\/article>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('homeProfile', function(view) { %>\n\t<article class=\"well home-profile\">\n\t\t<div class=\"well-header\"><h4><%= _('Profile').translate() %><\/h4><\/div>\n\t\t<div class=\"well-body\">\n\t\t\t<p><%= view.model.get('firstname') || '' %> <%= view.model.get('middlename') || '' %> <%= view.model.get('lastname') || '' %><\/p>\n\t\t\t<p><%= view.model.get('companyname') || '' %><\/p>\n\t\t\t<p><%= view.model.get('email') %><\/p>\n\t\t\t<p><%= _.formatPhone(view.model.get('phone') || '', view.application.getConfig('siteSettings.phoneformat')) %><\/p>\n\t\t<\/div>\n\t\t<div class=\"well-footer\">\n\t\t\t<a class=\"box-btn editProfileInformation\" href=\"\/profileinformation\"><%= _('Edit').translate() %><\/a>\n\t\t<\/div>\n\t<\/article>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<%\nregisterMacro('homeBanner', function (config_banners)\n{\n\tvar banners = _.isArray( config_banners ) ? config_banners : [ config_banners ]\n\t,\trandom_banner = banners[ Math.floor( Math.random() * banners.length ) ];\n\n\tif ( random_banner ) {\n\t\tif ( random_banner.linkUrl ) {\n%>\n\t<a href=\"<%= random_banner.linkUrl %>\" target=\"<%= random_banner.linkTarget %>\"><img src=\"<%= random_banner.imageSource %>\"><\/a>\n<%\t\t} else { %>\n\t<img src=\"<%= random_banner.imageSource %>\">\n<%\t\t} %>\n\t<hr>\n<%\n\t}\n})\n%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('recentOrdersWidget', function ( ordersToShow ) { %>\n<div class=\"recentOrdersWidget\" data-permissions=\"transactions.tranFind.1,transactions.tranSalesOrd.1\">\n\t<div>\n\t\t<a href=\"\/ordershistory\" class=\"pull-right\"><%= _('View All Order History').translate() %> &gt;<\/a>\n\t\t<h4><%= _('Recent Orders').translate() %><\/h4>\n\t<\/div>\n\t<hr>\n\t<% if ( ordersToShow.length ) { %>\n\t\t<table class=\"table\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><%= _('Order Date').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Order Number').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Order Total').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Status').translate() %><\/th>\n\t\t\t\t\t<th><\/th>\n\t\t\t\t<\/tr>\n\t\t\t<\/thead>\n\t\t\t<tbody>\n\t\t\t<% _.each(ordersToShow, function (order, index) { %>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><%= order.get('date') %><\/td>\n\t\t\t\t\t<td><%= order.get('order_number') %><\/td>\n\t\t\t\t\t<td><%= order.get('summary').total_formatted %><\/td>\n\t\t\t\t\t<td><%= order.get('status') %><\/td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<a href=\"\/ordershistory\/view\/<%= order.get('internalid') %>\"><%= _('View Order Details').translate() %><\/a>\n\t\t\t\t\t<\/td>\n\t\t\t\t<\/tr>\n\t\t\t<% }) %>\n\t\t\t<\/tbody>\n\t\t<\/table>\n\t<% } else { %>\n\t\t<p><%= _('We have no orders on file for this account.').translate() %><\/p>\n\t<% } %>\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('homeShipping', function(view) { %>\n\t<article class=\"well home-shipping\">\n\t\t<div class=\"well-header\">\n\t\t\t<h4><%= _('Shipping').translate() %><\/h4>\n\t\t<\/div>\n\t\t<%  %>\n\t\t<div class=\"well-body\">\n\t\t<% if (!view.defaultShippingAddress) { %>\n\t\t\t<p><%= _('We have no default address on file for this account.').translate() %><\/p>\n\t\t\t<a href=\"\/addressbook\/new\" data-toggle=\"show-in-modal\"><%= _('Create New Address').translate() %><\/a>\n\t\t<% } else { %>\n\t\t\t<%= SC.macros.address(view.defaultShippingAddress, {\n\t\t\t\t\thideDefaults: true\n\t\t\t\t, \thideActions: true\n\t\t\t}) %>\n\t\t<\/div>\n\t\t<div class=\"well-footer\">\n\t\t\t<a href=\"\/addressbook\/<%= view.defaultShippingAddress.get('internalid') %>\" data-toggle=\"show-in-modal\"><%= _('Edit').translate() %><\/a>\n\t\t<\/div>\n\t\t<% } %>\n\t<\/article>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('homePayment', function(view) { %>\n\t<article class=\"well home-payment\">\n\t\t<div class=\"well-header\">\n\t\t\t<h4><%= _('Payment').translate() %><\/h4>\n\t\t<\/div>\n\t\t<div class=\"well-body\">\n\t\t<% if (!view.defaultCreditCard) { %>\n\t\t\t<p><%= _('We have no default credit card on file for this account.').translate() %><\/p>\n\t\t\t<a href=\"\/creditcards\/new\" data-toggle=\"show-in-modal\"><%= _('Add a Credit Card').translate() %><\/a>\n\t\t<\/div>\n\t\t<% } else { %>\n\t\t\t<%= SC.macros.creditcard(view.defaultCreditCard, {icons: view.application.getConfig('creditCardIcons')}) %>\n\t\t<\/div>\n\t\t<div class=\"well-footer\">\n\t\t\t<a href=\"\/creditcards\/<%= view.defaultCreditCard.get('internalid') %>\" data-toggle=\"show-in-modal\"><%= _('Edit').translate() %><\/a>\n\t\t<\/div>\n\t\t<% } %>\n\n\t<\/article>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('homeProfile', function(view) { %>\n\t<article class=\"well home-profile\">\n\t\t<div class=\"well-header\"><h4><%= _('Profile').translate() %><\/h4><\/div>\n\t\t<div class=\"well-body\">\n\t\t\t<p><%= view.model.get('firstname') || '' %> <%= view.model.get('middlename') || '' %> <%= view.model.get('lastname') || '' %><\/p>\n\t\t\t<p><%= view.model.get('companyname') || '' %><\/p>\n\t\t\t<p><%= view.model.get('email') %><\/p>\n\t\t\t<p><%= _.formatPhone(view.model.get('phone') || '', view.application.getConfig('siteSettings.phoneformat')) %><\/p>\n\t\t<\/div>\n\t\t<div class=\"well-footer\">\n\t\t\t<a class=\"box-btn editProfileInformation\" href=\"\/profileinformation\"><%= _('Edit').translate() %><\/a>\n\t\t<\/div>\n\t<\/article>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<%\nregisterMacro('homeBanner', function (config_banners)\n{\n\tvar banners = _.isArray( config_banners ) ? config_banners : [ config_banners ]\n\t,\trandom_banner = banners[ Math.floor( Math.random() * banners.length ) ];\n\n\tif ( random_banner ) {\n\t\tif ( random_banner.linkUrl ) {\n%>\n\t<a href=\"<%= random_banner.linkUrl %>\" target=\"<%= random_banner.linkTarget %>\"><img src=\"<%= random_banner.imageSource %>\"><\/a>\n<%\t\t} else { %>\n\t<img src=\"<%= random_banner.imageSource %>\">\n<%\t\t} %>\n\t<hr>\n<%\n\t}\n})\n%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('recentOrdersWidget', function ( ordersToShow ) { %>\n<div class=\"recentOrdersWidget\" data-permissions=\"transactions.tranFind.1,transactions.tranSalesOrd.1\">\n\t<div>\n\t\t<a href=\"\/ordershistory\" class=\"pull-right\"><%= _('View All Order History').translate() %> &gt;<\/a>\n\t\t<h4><%= _('Recent Orders').translate() %><\/h4>\n\t<\/div>\n\t<hr>\n\t<% if ( ordersToShow.length ) { %>\n\t\t<table class=\"table\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th><%= _('Order Date').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Order Number').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Order Total').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Status').translate() %><\/th>\n\t\t\t\t\t<th><\/th>\n\t\t\t\t<\/tr>\n\t\t\t<\/thead>\n\t\t\t<tbody>\n\t\t\t<% _.each(ordersToShow, function (order, index) { %>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><%= order.get('date') %><\/td>\n\t\t\t\t\t<td><%= order.get('order_number') %><\/td>\n\t\t\t\t\t<td><%= order.get('summary').total_formatted %><\/td>\n\t\t\t\t\t<td><%= order.get('status') %><\/td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<a href=\"\/ordershistory\/view\/<%= order.get('internalid') %>\"><%= _('View Order Details').translate() %><\/a>\n\t\t\t\t\t<\/td>\n\t\t\t\t<\/tr>\n\t\t\t<% }) %>\n\t\t\t<\/tbody>\n\t\t<\/table>\n\t<% } else { %>\n\t\t<p><%= _('We have no orders on file for this account.').translate() %><\/p>\n\t<% } %>\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('homeShipping', function(view) { %>\n\t<article class=\"well home-shipping\">\n\t\t<div class=\"well-header\">\n\t\t\t<h4><%= _('Shipping').translate() %><\/h4>\n\t\t<\/div>\n\t\t<%  %>\n\t\t<div class=\"well-body\">\n\t\t<% if (!view.defaultShippingAddress) { %>\n\t\t\t<p><%= _('We have no default address on file for this account.').translate() %><\/p>\n\t\t\t<a href=\"\/addressbook\/new\" data-toggle=\"show-in-modal\"><%= _('Create New Address').translate() %><\/a>\n\t\t<% } else { %>\n\t\t\t<%= SC.macros.address(view.defaultShippingAddress, {\n\t\t\t\t\thideDefaults: true\n\t\t\t\t, \thideActions: true\n\t\t\t}) %>\n\t\t<\/div>\n\t\t<div class=\"well-footer\">\n\t\t\t<a href=\"\/addressbook\/<%= view.defaultShippingAddress.get('internalid') %>\" data-toggle=\"show-in-modal\"><%= _('Edit').translate() %><\/a>\n\t\t<\/div>\n\t\t<% } %>\n\t<\/article>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerProfile', function (Profile) { %>\n<% if (Profile.get('isLoggedIn') === 'T' &&  Profile.get('isGuest') === 'F') { %>\n\t<li class=\"welcome\"><a><%= _('Welcome $(0)').translate(Profile.get('firstname') || Profile.get('companyname'))  %><\/a><\/li>\n\t<li id=\"my-account-container\" class=\"dropdown my-account-container\">\n\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" data-touchpoint=\"customercenter\">\n\t\t\t<span class=\"my-account-title\"><%= _('Your Account').translate() %><\/span>\n\t\t\t<b class=\"caret\"><\/b>\n\t\t<\/a>\n\t\t<ul class=\"dropdown-menu\">\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#overview\">\n\t\t\t\t\t<%= _('Overview').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#profileinformation\">\n\t\t\t\t\t<%= _('Profile Information').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#addressbook\">\n\t\t\t\t\t<%= _('Address Book').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#creditcards\">\n\t\t\t\t\t<%= _('Credit Cards').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\" data-permissions=\"transactions.tranFind.1,transactions.tranSalesOrd.1\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#ordershistory\">\n\t\t\t\t\t<%= _('Order History & Returns').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#emailpreferences\">\n\t\t\t\t\t<%= _('Email Preferences').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\" data-permissions=\"transactions.tranFind.1,transactions.tranSalesOrd.1\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#reorderItems\">\n\t\t\t\t\t<%= _('Reorder Items').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#updateyourpassword\">\n\t\t\t\t\t<%= _('Update Your Password').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"divider\"><\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"logout\">\n\t\t\t\t\t<%= _('Sign Out').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<\/ul>\n\t<\/li>\t\n<% } else { %>\n\t<li><a href=\"#\" data-touchpoint=\"login\"><%= _('Login').translate() %><\/a><\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li><a href=\"#\" data-touchpoint=\"register\"><%= _('Register').translate() %><\/a><\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('siteSearch', function (name, view) { %>\n<% var maxLength = view.application.getConfig('searchPrefs.maxLength') || 0; %>\n<form class=\"form-search site-search\" method=\"GET\" action=\"\/search\">\n\t<div class=\"input-append\">\n\t\t<input class=\"input-medium search-query\" placeholder=\"<%- _('Search').translate() %>\" type=\"search\" name=\"<%- name %>\" autocomplete=\"off\"\n\t\t\t<%= maxLength > 0 ? 'maxlength=\"'+maxLength+'\"' : '' %>\t>\n\t\t<button type=\"submit\" class=\"btn\">\n\t\t\t<i class=\"icon-search\"><\/i>\n\t\t<\/button>\n\t<\/div>\n<\/form>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('typeahead', function (item, query, application) { %>\n<div class=\"typeahead-item clearfix\">\n\t<div class=\"typeahead-item-head\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img class=\"typeahead-image\" src=\"<%- application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t<div class=\"typeahead-title\"><%= _.highlightKeyword(item.get('_name'), query) %><\/div>\n\t<\/div>\n<\/div>\n<%})%> \n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('miniCart', function (cart, application) { %>\n<%\n\tvar lines = cart.get('lines')\n\t,\thas_cart_router = application.modulesMountToAppResult.Cart instanceof application.modules.Cart.Router\n\t,\tcurrent_touchpoint = application.Configuration.currentTouchpoint\n\t,\ttotal_items = _.reduce(lines.pluck('quantity'), function (memo, quantity) {\n\t\t\treturn memo + (parseFloat(quantity) || 1);\n\t\t}, 0);\n%>\n<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n\t<%= SC.macros.miniCartSummary(total_items) %>\n\t<b class=\"caret\"><\/b>\n<\/a>\n<div class=\"dropdown-menu\">\n<% if (lines.length) { %>\n\t<ul class=\"cart-summary-items mini-cart-items\">\n\t\t<% var thumbnail = '', item = null; %>\n\t\t<% lines.each(function (line) { %>\n\t\t\t<%\n\t\t\t\titem = line.get('item');\n\t\t\t\tthumbnail = item.get('_thumbnail');\n\t\t\t%>\n\t\t\t<li class=\"cart-summary-item-cell mini-cart-item-cell\">\n\t\t\t\t<a href=\"#\" class=\"row-fluid\" data-touchpoint=\"home\" data-hashtag=\"#<%= _(item.get('_url')).fixUrl() %>\">\n\t\t\t\t\t<div class=\"span3 thumbnail mini-cart-item-thumbnail\">\n\t\t\t\t\t\t<img src=\"<%- application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"span9 mini-cart-item-details\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<strong><%= item.get('_name') %><\/strong>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<!-- Renders the selected options for the item -->\n\t\t\t\t\t\t<%= item.renderAllOptionSelected() %>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<%= _('Quantity: $(0)').translate( line.get('quantity') ) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<%= _('Price: $(0)').translate( line.get('total_formatted') ) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t<% }) %>\n\t<\/ul>\n\t<ul class=\"summary\">\n\t\t<li class=\"mini-cart-summary-container\">\n\t\t\t<p class=\"mini-cart-summary\">\n\t\t\t\t<span class=\"pull-right mini-cart-subtotal\">\n\t\t\t\t\t<%= _('Subtotal: <b>$(0)<\/b>').translate( cart.get('summary').subtotal_formatted ) %>\n\t\t\t\t<\/span>\n\t\t\t\t<span class=\"item-count\">\n\t\t\t\t<% if ( total_items !== 1 ) { %>\n\t\t\t\t\t<%= _('$(0) items').translate( total_items ) %>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%= _('1 item').translate() %>\n\t\t\t\t<% } %>\n\t\t\t\t<\/span>\n\t\t\t<\/p>\n\t\t\t<div class=\"mini-cart-actions\">\n\t\t\t\t<a href=\"\/cart\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\" class=\"btn btn-view-cart\">\n\t\t\t\t\t<%= _('View Cart').translate() %>\n\t\t\t\t<\/a>\n\t\t\t\t<a href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\" class=\"btn btn-primary btn-checkout\">\n\t\t\t\t\t<%= _('Checkout').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/div>\n\t\t\t<div id=\"mini-cart-bottom-banner\" class=\"mini-cart-bottom-banner\"><\/div>\n\t\t<\/li>\n\t<\/ul>\n<% } else { %>\n\t<ul class=\"items mini-cart-empty\">\n\t\t<li>\n\t\t\t<a href=\"#\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\">\n\t\t\t\t<%= _('Your cart is empty').translate() %>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<\/ul>\n<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerTopNav', function (view) { %>\n<%\n\tvar application = view.application\n\t,\tenvironment = SC.ENVIRONMENT\n\t,\tmacros = SC.macros\n\n\t,\thosts = environment.availableHosts\n\t,\thas_multiple_hosts = hosts.length > 1\n\n\t,\tlanguages = environment.availableLanguages\n\t,\thas_multiple_languages = languages.length > 1\n\n\t,\thas_hosts_or_languages = has_multiple_hosts || has_multiple_languages\n\n\t,\tcurrencies = environment.availableCurrencies\n\t,\thas_multiple_currencies = currencies.length > 1;\n%>\n<nav class=\"navbar navbar-inverse navbar-static-top site-header-top-nav\">\n\t<div class=\"navbar-inner\">\n\t\t<div class=\"container\">\n\t\t\t<% if (has_hosts_or_languages || has_multiple_currencies) { %>\n\t\t\t\t<ul class=\"nav customer-site-settings\">\n\t\t\t\t<% if (has_hosts_or_languages) { %>\n\t\t\t\t\t<li id=\"language-selector-container\" class=\"language-selector-container\">\n\t\t\t\t\t\t<form action=\"\" class=\"navbar-form\">\n\t\t\t\t\t\t\t<% if (has_multiple_hosts) { %>\n\t\t\t\t\t\t\t\t<%= macros.hostSelector(hosts, environment.currentHostString) %>\n\t\t\t\t\t\t\t<% } else if (has_multiple_languages) { %>\n\t\t\t\t\t\t\t\t<%= macros.languageSelector(languages, environment.currentLanguage.locale) %>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (has_hosts_or_languages && has_multiple_currencies) { %>\n\t\t\t\t\t<li class=\"divider-vertical\"><\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (has_multiple_currencies) { %>\n\t\t\t\t\t<li id=\"currency-selector-container\" class=\"currency-selector-container\">\n\t\t\t\t\t\t<form action=\"\" class=\"navbar-form\">\n\t\t\t\t\t\t\t<%= macros.currencySelector(currencies, environment.currentCurrency.code) %>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<\/ul>\n\t\t\t<% } %>\n\t\t\t<!-- TODO: should the following be inside a macro? -->\n\t\t\t<ul class=\"nav pull-right\">\n\t\t\t\t<%= macros[application.getConfig('profileMacro')](application.getUser()) %>\n\t\t\t\t<li id=\"mini-cart-container\" class=\"dropdown mini-cart-container\">\n\t\t\t\t\t<%= macros.miniCart(application.getCart(), application) %>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t<\/div>\n<\/nav>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('header', function (view) { %>\n<%\n\tvar application = view.application\n\t,\tcart = application.getCart()\n\t,\tmacros = SC.macros\n\t,\tprofile = macros[application.getConfig('profileMacro')](application.getUser())\n\t,\thas_cart_router = application.modulesMountToAppResult.Cart instanceof application.modules.Cart.Router\n\t,\tcurrent_touchpoint = application.Configuration.currentTouchpoint;\n%>\n<header id=\"site-header\" class=\"site-header\">\n\t<%= macros.headerTopNav(view) %>\n\t<div class=\"container\">\n\t\t<div data-type=\"message-placeholder\"><\/div>\n\t\t<div class=\"row-fluid site-branding\">\n\t\t\t<div class=\"span3\">\n\t\t\t\t<%= macros.siteLogo(application) %>\n\t\t\t\t<!-- MOBILE -->\n\t\t\t\t<div class=\"navbar navbar-inverse mobile-nav\">\n\t\t\t\t\t<div class=\"navbar-inner\">\n\t\t\t\t\t\t<div class=\"container\">\n\t\t\t\t\t\t\t<ul class=\"nav pull-right\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"#\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\" class=\"mini-cart-summary\">\n\t\t\t\t\t\t\t\t\t\t<%= macros.miniCartSummary(cart.getTotalItemCount()) %>\n\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t<a href=\"#\" class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".main-nav\">\n\t\t\t\t\t\t\t\t<span class=\"icon-bar\"><\/span>\n\t\t\t\t\t\t\t\t<span class=\"icon-bar\"><\/span>\n\t\t\t\t\t\t\t\t<span class=\"icon-bar\"><\/span>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<nav class=\"navbar collapse visible-phone main-nav site-header-main-nav\">\n\t\t\t\t\t<div class=\"navbar-inner\">\n\t\t\t\t\t\t<ul class=\"nav\">\n\t\t\t\t\t\t<% _.each(application.getConfig('navigationTabs', []), function (item) { %>\n\t\t\t\t\t\t\t<%= macros.navigationTabs(item, true) %>\n\t\t\t\t\t\t<% }) %>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<ul class=\"nav mobile-profile\">\n\t\t\t\t\t\t\t<%= profile %>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/nav>\n\t\t\t\t<!-- \/MOBILE -->\n\t\t\t<\/div>\n\t\t\t<div class=\"span6 header-banner\">\n\t\t\t\t<div id=\"banner-header-top\" class=\"content-banner banner-header-top\"><\/div>\n\t\t\t\t&nbsp;\n\t\t\t<\/div>\n\t\t\t<div id=\"site-search-container\" class=\"span3 site-search-container\">\n\t\t\t\t<%= macros.siteSearch('keywords', view) %>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<nav class=\"navbar hidden-phone main-nav site-header-main-nav\">\n\t\t\t<div class=\"navbar-inner\">\n\t\t\t\t<ul class=\"nav\">\n\t\t\t\t<% _.each(application.getConfig('navigationTabs', []), function (item) { %>\n\t\t\t\t\t<%= macros.navigationTabs(item, true) %>\n\t\t\t\t<% }) %>\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t<\/nav>\n\t\t<div id=\"banner-header-bottom\"  class=\"content-banner banner-header-bottom\"><\/div>\n\t<\/div>\n<\/header>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('miniCartSummary', function (total_items) { %>\n<i class=\"icon-shopping-cart icon-white\"><\/i>\n<span class=\"item-count\">\n<% if (total_items !== 1) { %>\n\t<%= _('<b>$(0)<\/b> items').translate(total_items) %>\n<% } else { %>\n\t<%= _('<b>1<\/b> item').translate() %>\n<% } %>\n<\/span>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('siteLogo', function (application, remove_home_link) { %>\n<%\n\tvar logoUrl = application.getConfig('logoUrl')\n\t,\tsiteName = application.getConfig('siteSettings.displayname');\n%>\n<div id=\"site-logo\" class=\"site-logo content-banner\">\n<% if (remove_home_link){ %>\n\t<a>\n<% } else { %>\n\t<a href=\"\/\" data-touchpoint=\"home\" data-hashtag=\"\">\n<% } %>\t\n\t<% if (logoUrl) { %>\n\t\t<img src=\"<%- logoUrl %>\" alt=\"<%- siteName %>\">\n\t<% } else { %>\n\t\t<span>\n\t\t\t<%= siteName %>\n\t\t<\/span>\n\t<% } %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('navigationTabs', function (item, is_top) {\n\tif (!item.data)\n\t{\n\t\titem.data = {};\n\t}\n\t\/\/ we want all navbar links to preserve current url option 'display'\n\titem.data['keep-options'] = 'display';\n\t%>\n<% if (item.categories && item.categories.length) {\n\t%>\n\t<% if (is_top) { %>\n\t\t<li class=\"dropdown\">\n\t\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t\t\t<%= item.text %>\n\t\t\t\t<b class=\"caret\"><\/b>\n\t\t\t<\/a>\n\t\t\t<ul class=\"dropdown-menu\">\n\t\t\t\t<% _.each(item.categories, function (sub) { %>\n\t\t\t\t\t<%= SC.macros.navigationTabs(sub) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/ul>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"dropdown-submenu\">\n\t\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t\t\t<%= item.text %>\n\t\t\t<\/a>\n\t\t\t<ul class=\"dropdown-menu\">\n\t\t\t\t<% _.each(item.categories, function (sub) { %>\n\t\t\t\t\t<%= SC.macros.navigationTabs(sub) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/ul>\n\t\t<\/li>\n\t<% } %>\n<% } else { %>\n<li>\n\t<a <%= _.objectToAtrributes(item) %>>\n\t\t<%= item.text %>\n\t<\/a>\n<\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerSimpleProfile', function (Profile) { %>\n<% if (Profile.get('isLoggedIn') === 'T' &&  Profile.get('isGuest') === 'F') { %>\n\t<li class=\"welcome\"><a><%= _('Welcome $(0)').translate(Profile.get('firstname') || Profile.get('companyname'))  %><\/a><\/li>\n\t<li class=\"my-account-title\">\n\t\t<a href=\"#\" data-touchpoint=\"customercenter\">\n\t\t\t<%= _('Your Account').translate() %>\n\t\t<\/a>\n\t<\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li class=\"logout\">\n\t\t<a href=\"#\" data-touchpoint=\"logout\">\n\t\t\t<%= _('Sign Out').translate() %>\n\t\t<\/a>\n\t<\/li>\t\n<% } else { %>\n\t<li><a href=\"#\" data-touchpoint=\"login\"><%= _('Login').translate() %><\/a><\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li><a href=\"#\" data-touchpoint=\"register\"><%= _('Register').translate() %><\/a><\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerProfile', function (Profile) { %>\n<% if (Profile.get('isLoggedIn') === 'T' &&  Profile.get('isGuest') === 'F') { %>\n\t<li class=\"welcome\"><a><%= _('Welcome $(0)').translate(Profile.get('firstname') || Profile.get('companyname'))  %><\/a><\/li>\n\t<li id=\"my-account-container\" class=\"dropdown my-account-container\">\n\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" data-touchpoint=\"customercenter\">\n\t\t\t<span class=\"my-account-title\"><%= _('Your Account').translate() %><\/span>\n\t\t\t<b class=\"caret\"><\/b>\n\t\t<\/a>\n\t\t<ul class=\"dropdown-menu\">\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#overview\">\n\t\t\t\t\t<%= _('Overview').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#profileinformation\">\n\t\t\t\t\t<%= _('Profile Information').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#addressbook\">\n\t\t\t\t\t<%= _('Address Book').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#creditcards\">\n\t\t\t\t\t<%= _('Credit Cards').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\" data-permissions=\"transactions.tranFind.1,transactions.tranSalesOrd.1\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#ordershistory\">\n\t\t\t\t\t<%= _('Order History & Returns').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#emailpreferences\">\n\t\t\t\t\t<%= _('Email Preferences').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\" data-permissions=\"transactions.tranFind.1,transactions.tranSalesOrd.1\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#reorderItems\">\n\t\t\t\t\t<%= _('Reorder Items').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#updateyourpassword\">\n\t\t\t\t\t<%= _('Update Your Password').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"divider\"><\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"logout\">\n\t\t\t\t\t<%= _('Sign Out').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<\/ul>\n\t<\/li>\t\n<% } else { %>\n\t<li><a href=\"#\" data-touchpoint=\"login\"><%= _('Login').translate() %><\/a><\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li><a href=\"#\" data-touchpoint=\"register\"><%= _('Register').translate() %><\/a><\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('siteSearch', function (name, view) { %>\n<% var maxLength = view.application.getConfig('searchPrefs.maxLength') || 0; %>\n<form class=\"form-search site-search\" method=\"GET\" action=\"\/search\">\n\t<div class=\"input-append\">\n\t\t<input class=\"input-medium search-query\" placeholder=\"<%- _('Search').translate() %>\" type=\"search\" name=\"<%- name %>\" autocomplete=\"off\"\n\t\t\t<%= maxLength > 0 ? 'maxlength=\"'+maxLength+'\"' : '' %>\t>\n\t\t<button type=\"submit\" class=\"btn\">\n\t\t\t<i class=\"icon-search\"><\/i>\n\t\t<\/button>\n\t<\/div>\n<\/form>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('typeahead', function (item, query, application) { %>\n<div class=\"typeahead-item clearfix\">\n\t<div class=\"typeahead-item-head\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img class=\"typeahead-image\" src=\"<%- application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t<div class=\"typeahead-title\"><%= _.highlightKeyword(item.get('_name'), query) %><\/div>\n\t<\/div>\n<\/div>\n<%})%> \n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('miniCart', function (cart, application) { %>\n<%\n\tvar lines = cart.get('lines')\n\t,\thas_cart_router = application.modulesMountToAppResult.Cart instanceof application.modules.Cart.Router\n\t,\tcurrent_touchpoint = application.Configuration.currentTouchpoint\n\t,\ttotal_items = _.reduce(lines.pluck('quantity'), function (memo, quantity) {\n\t\t\treturn memo + (parseFloat(quantity) || 1);\n\t\t}, 0);\n%>\n<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n\t<%= SC.macros.miniCartSummary(total_items) %>\n\t<b class=\"caret\"><\/b>\n<\/a>\n<div class=\"dropdown-menu\">\n<% if (lines.length) { %>\n\t<ul class=\"cart-summary-items mini-cart-items\">\n\t\t<% var thumbnail = '', item = null; %>\n\t\t<% lines.each(function (line) { %>\n\t\t\t<%\n\t\t\t\titem = line.get('item');\n\t\t\t\tthumbnail = item.get('_thumbnail');\n\t\t\t%>\n\t\t\t<li class=\"cart-summary-item-cell mini-cart-item-cell\">\n\t\t\t\t<a href=\"#\" class=\"row-fluid\" data-touchpoint=\"home\" data-hashtag=\"#<%= _(item.get('_url')).fixUrl() %>\">\n\t\t\t\t\t<div class=\"span3 thumbnail mini-cart-item-thumbnail\">\n\t\t\t\t\t\t<img src=\"<%- application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"span9 mini-cart-item-details\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<strong><%= item.get('_name') %><\/strong>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<!-- Renders the selected options for the item -->\n\t\t\t\t\t\t<%= item.renderAllOptionSelected() %>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<%= _('Quantity: $(0)').translate( line.get('quantity') ) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<%= _('Price: $(0)').translate( line.get('total_formatted') ) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t<% }) %>\n\t<\/ul>\n\t<ul class=\"summary\">\n\t\t<li class=\"mini-cart-summary-container\">\n\t\t\t<p class=\"mini-cart-summary\">\n\t\t\t\t<span class=\"pull-right mini-cart-subtotal\">\n\t\t\t\t\t<%= _('Subtotal: <b>$(0)<\/b>').translate( cart.get('summary').subtotal_formatted ) %>\n\t\t\t\t<\/span>\n\t\t\t\t<span class=\"item-count\">\n\t\t\t\t<% if ( total_items !== 1 ) { %>\n\t\t\t\t\t<%= _('$(0) items').translate( total_items ) %>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%= _('1 item').translate() %>\n\t\t\t\t<% } %>\n\t\t\t\t<\/span>\n\t\t\t<\/p>\n\t\t\t<div class=\"mini-cart-actions\">\n\t\t\t\t<a href=\"\/cart\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\" class=\"btn btn-view-cart\">\n\t\t\t\t\t<%= _('View Cart').translate() %>\n\t\t\t\t<\/a>\n\t\t\t\t<a href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\" class=\"btn btn-primary btn-checkout\">\n\t\t\t\t\t<%= _('Checkout').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/div>\n\t\t\t<div id=\"mini-cart-bottom-banner\" class=\"mini-cart-bottom-banner\"><\/div>\n\t\t<\/li>\n\t<\/ul>\n<% } else { %>\n\t<ul class=\"items mini-cart-empty\">\n\t\t<li>\n\t\t\t<a href=\"#\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\">\n\t\t\t\t<%= _('Your cart is empty').translate() %>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<\/ul>\n<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerTopNav', function (view) { %>\n<%\n\tvar application = view.application\n\t,\tenvironment = SC.ENVIRONMENT\n\t,\tmacros = SC.macros\n\n\t,\thosts = environment.availableHosts\n\t,\thas_multiple_hosts = hosts.length > 1\n\n\t,\tlanguages = environment.availableLanguages\n\t,\thas_multiple_languages = languages.length > 1\n\n\t,\thas_hosts_or_languages = has_multiple_hosts || has_multiple_languages\n\n\t,\tcurrencies = environment.availableCurrencies\n\t,\thas_multiple_currencies = currencies.length > 1;\n%>\n<nav class=\"navbar navbar-inverse navbar-static-top site-header-top-nav\">\n\t<div class=\"navbar-inner\">\n\t\t<div class=\"container\">\n\t\t\t<% if (has_hosts_or_languages || has_multiple_currencies) { %>\n\t\t\t\t<ul class=\"nav customer-site-settings\">\n\t\t\t\t<% if (has_hosts_or_languages) { %>\n\t\t\t\t\t<li id=\"language-selector-container\" class=\"language-selector-container\">\n\t\t\t\t\t\t<form action=\"\" class=\"navbar-form\">\n\t\t\t\t\t\t\t<% if (has_multiple_hosts) { %>\n\t\t\t\t\t\t\t\t<%= macros.hostSelector(hosts, environment.currentHostString) %>\n\t\t\t\t\t\t\t<% } else if (has_multiple_languages) { %>\n\t\t\t\t\t\t\t\t<%= macros.languageSelector(languages, environment.currentLanguage.locale) %>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (has_hosts_or_languages && has_multiple_currencies) { %>\n\t\t\t\t\t<li class=\"divider-vertical\"><\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (has_multiple_currencies) { %>\n\t\t\t\t\t<li id=\"currency-selector-container\" class=\"currency-selector-container\">\n\t\t\t\t\t\t<form action=\"\" class=\"navbar-form\">\n\t\t\t\t\t\t\t<%= macros.currencySelector(currencies, environment.currentCurrency.code) %>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<\/ul>\n\t\t\t<% } %>\n\t\t\t<!-- TODO: should the following be inside a macro? -->\n\t\t\t<ul class=\"nav pull-right\">\n\t\t\t\t<%= macros[application.getConfig('profileMacro')](application.getUser()) %>\n\t\t\t\t<li id=\"mini-cart-container\" class=\"dropdown mini-cart-container\">\n\t\t\t\t\t<%= macros.miniCart(application.getCart(), application) %>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t<\/div>\n<\/nav>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('header', function (view) { %>\n<%\n\tvar application = view.application\n\t,\tcart = application.getCart()\n\t,\tmacros = SC.macros\n\t,\tprofile = macros[application.getConfig('profileMacro')](application.getUser())\n\t,\thas_cart_router = application.modulesMountToAppResult.Cart instanceof application.modules.Cart.Router\n\t,\tcurrent_touchpoint = application.Configuration.currentTouchpoint;\n%>\n<header id=\"site-header\" class=\"site-header\">\n\t<%= macros.headerTopNav(view) %>\n\t<div class=\"container\">\n\t\t<div data-type=\"message-placeholder\"><\/div>\n\t\t<div class=\"row-fluid site-branding\">\n\t\t\t<div class=\"span3\">\n\t\t\t\t<%= macros.siteLogo(application) %>\n\t\t\t\t<!-- MOBILE -->\n\t\t\t\t<div class=\"navbar navbar-inverse mobile-nav\">\n\t\t\t\t\t<div class=\"navbar-inner\">\n\t\t\t\t\t\t<div class=\"container\">\n\t\t\t\t\t\t\t<ul class=\"nav pull-right\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"#\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\" class=\"mini-cart-summary\">\n\t\t\t\t\t\t\t\t\t\t<%= macros.miniCartSummary(cart.getTotalItemCount()) %>\n\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t<a href=\"#\" class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".main-nav\">\n\t\t\t\t\t\t\t\t<span class=\"icon-bar\"><\/span>\n\t\t\t\t\t\t\t\t<span class=\"icon-bar\"><\/span>\n\t\t\t\t\t\t\t\t<span class=\"icon-bar\"><\/span>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<nav class=\"navbar collapse visible-phone main-nav site-header-main-nav\">\n\t\t\t\t\t<div class=\"navbar-inner\">\n\t\t\t\t\t\t<ul class=\"nav\">\n\t\t\t\t\t\t<% _.each(application.getConfig('navigationTabs', []), function (item) { %>\n\t\t\t\t\t\t\t<%= macros.navigationTabs(item, true) %>\n\t\t\t\t\t\t<% }) %>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<ul class=\"nav mobile-profile\">\n\t\t\t\t\t\t\t<%= profile %>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/nav>\n\t\t\t\t<!-- \/MOBILE -->\n\t\t\t<\/div>\n\t\t\t<div class=\"span6 header-banner\">\n\t\t\t\t<div id=\"banner-header-top\" class=\"content-banner banner-header-top\"><\/div>\n\t\t\t\t&nbsp;\n\t\t\t<\/div>\n\t\t\t<div id=\"site-search-container\" class=\"span3 site-search-container\">\n\t\t\t\t<%= macros.siteSearch('keywords', view) %>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<nav class=\"navbar hidden-phone main-nav site-header-main-nav\">\n\t\t\t<div class=\"navbar-inner\">\n\t\t\t\t<ul class=\"nav\">\n\t\t\t\t<% _.each(application.getConfig('navigationTabs', []), function (item) { %>\n\t\t\t\t\t<%= macros.navigationTabs(item, true) %>\n\t\t\t\t<% }) %>\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t<\/nav>\n\t\t<div id=\"banner-header-bottom\"  class=\"content-banner banner-header-bottom\"><\/div>\n\t<\/div>\n<\/header>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('miniCartSummary', function (total_items) { %>\n<i class=\"icon-shopping-cart icon-white\"><\/i>\n<span class=\"item-count\">\n<% if (total_items !== 1) { %>\n\t<%= _('<b>$(0)<\/b> items').translate(total_items) %>\n<% } else { %>\n\t<%= _('<b>1<\/b> item').translate() %>\n<% } %>\n<\/span>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('siteLogo', function (application, remove_home_link) { %>\n<%\n\tvar logoUrl = application.getConfig('logoUrl')\n\t,\tsiteName = application.getConfig('siteSettings.displayname');\n%>\n<div id=\"site-logo\" class=\"site-logo content-banner\">\n<% if (remove_home_link){ %>\n\t<a>\n<% } else { %>\n\t<a href=\"\/\" data-touchpoint=\"home\" data-hashtag=\"\">\n<% } %>\t\n\t<% if (logoUrl) { %>\n\t\t<img src=\"<%- logoUrl %>\" alt=\"<%- siteName %>\">\n\t<% } else { %>\n\t\t<span>\n\t\t\t<%= siteName %>\n\t\t<\/span>\n\t<% } %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('navigationTabs', function (item, is_top) {\n\tif (!item.data)\n\t{\n\t\titem.data = {};\n\t}\n\t\/\/ we want all navbar links to preserve current url option 'display'\n\titem.data['keep-options'] = 'display';\n\t%>\n<% if (item.categories && item.categories.length) {\n\t%>\n\t<% if (is_top) { %>\n\t\t<li class=\"dropdown\">\n\t\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t\t\t<%= item.text %>\n\t\t\t\t<b class=\"caret\"><\/b>\n\t\t\t<\/a>\n\t\t\t<ul class=\"dropdown-menu\">\n\t\t\t\t<% _.each(item.categories, function (sub) { %>\n\t\t\t\t\t<%= SC.macros.navigationTabs(sub) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/ul>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"dropdown-submenu\">\n\t\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t\t\t<%= item.text %>\n\t\t\t<\/a>\n\t\t\t<ul class=\"dropdown-menu\">\n\t\t\t\t<% _.each(item.categories, function (sub) { %>\n\t\t\t\t\t<%= SC.macros.navigationTabs(sub) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/ul>\n\t\t<\/li>\n\t<% } %>\n<% } else { %>\n<li>\n\t<a <%= _.objectToAtrributes(item) %>>\n\t\t<%= item.text %>\n\t<\/a>\n<\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerSimpleProfile', function (Profile) { %>\n<% if (Profile.get('isLoggedIn') === 'T' &&  Profile.get('isGuest') === 'F') { %>\n\t<li class=\"welcome\"><a><%= _('Welcome $(0)').translate(Profile.get('firstname') || Profile.get('companyname'))  %><\/a><\/li>\n\t<li class=\"my-account-title\">\n\t\t<a href=\"#\" data-touchpoint=\"customercenter\">\n\t\t\t<%= _('Your Account').translate() %>\n\t\t<\/a>\n\t<\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li class=\"logout\">\n\t\t<a href=\"#\" data-touchpoint=\"logout\">\n\t\t\t<%= _('Sign Out').translate() %>\n\t\t<\/a>\n\t<\/li>\t\n<% } else { %>\n\t<li><a href=\"#\" data-touchpoint=\"login\"><%= _('Login').translate() %><\/a><\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li><a href=\"#\" data-touchpoint=\"register\"><%= _('Register').translate() %><\/a><\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('footer', function (view) { %>\n<%\n\tvar environment = SC.ENVIRONMENT\n\n\t,\thosts = environment.availableHosts\n\t,\tlanguages = environment.availableLanguages\n\t,\tcurrencies = environment.availableCurrencies\n\n\t,\tnav_links = view.application.getConfig('footerNavigation', [])\n\t,\tmacros = SC.macros;\n%>\n<footer id=\"site-footer\" class=\"site-footer\">\n\t<div class=\"container\">\n\t\t<div class=\"customer-site-settings\">\n\t\t\t<form class=\"form-inline\">\n\t\t\t\t<% if (hosts.length) { %>\n\t\t\t\t\t<%= macros.hostSelector(hosts, environment.currentHostString) %>\n\t\t\t\t<% } else if (languages.length) { %>\n\t\t\t\t\t<%= macros.languageSelector(languages, environment.currentLanguage.locale) %>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (currencies.length) { %>\n\t\t\t\t\t<%= macros.currencySelector(currencies, environment.currentCurrency.code) %>\n\t\t\t\t<% } %>\n\t\t\t<\/form>\n\t\t<\/div>\n\t\t\n\t\t<% if (nav_links.length) { %>\n\t\t\t<%= macros.footerNavigation(nav_links) %>\n\t\t<% } %>\n\n\t\t<%= macros.backToTop() %>\n\t\t<div id=\"banner-footer\" class=\"content-banner banner-footer\"><\/div>\n\t<\/div>\n<\/footer>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('footerNavigation', function (nav_links) { %>\n<ul class=\"site-footer-main-nav\">\n<% _.each(nav_links, function (item) { %>\n\t<li>\n\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t<%= item.text %>\n\t\t<\/a>\n\t<\/li>\n<% }) %>\n<\/ul>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('footer', function (view) { %>\n<%\n\tvar environment = SC.ENVIRONMENT\n\n\t,\thosts = environment.availableHosts\n\t,\tlanguages = environment.availableLanguages\n\t,\tcurrencies = environment.availableCurrencies\n\n\t,\tnav_links = view.application.getConfig('footerNavigation', [])\n\t,\tmacros = SC.macros;\n%>\n<footer id=\"site-footer\" class=\"site-footer\">\n\t<div class=\"container\">\n\t\t<div class=\"customer-site-settings\">\n\t\t\t<form class=\"form-inline\">\n\t\t\t\t<% if (hosts.length) { %>\n\t\t\t\t\t<%= macros.hostSelector(hosts, environment.currentHostString) %>\n\t\t\t\t<% } else if (languages.length) { %>\n\t\t\t\t\t<%= macros.languageSelector(languages, environment.currentLanguage.locale) %>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (currencies.length) { %>\n\t\t\t\t\t<%= macros.currencySelector(currencies, environment.currentCurrency.code) %>\n\t\t\t\t<% } %>\n\t\t\t<\/form>\n\t\t<\/div>\n\t\t\n\t\t<% if (nav_links.length) { %>\n\t\t\t<%= macros.footerNavigation(nav_links) %>\n\t\t<% } %>\n\n\t\t<%= macros.backToTop() %>\n\t\t<div id=\"banner-footer\" class=\"content-banner banner-footer\"><\/div>\n\t<\/div>\n<\/footer>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('footerNavigation', function (nav_links) { %>\n<ul class=\"site-footer-main-nav\">\n<% _.each(nav_links, function (item) { %>\n\t<li>\n\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t<%= item.text %>\n\t\t<\/a>\n\t<\/li>\n<% }) %>\n<\/ul>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% \/\/TODO: use the formatted values from the backend instead of formatCurrency (eg.: total_formatted)\nregisterMacro('itemDetails', function (line) { %>\n<%\n\tline.format_options = _.map(line.options, function ( option )\n\t{\n\t\treturn option.id +'='+ option.value;\n\t}).join(',');\n\n\n\tvar link_attributes = false\n\t,\turl = line.item.get('_isPurchasable') ? line.item.get('_url') : null;\n\n\tif (url && SC.ENVIRONMENT.siteType === 'ADVANCED')\n\t{\n\t\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\t\thref: url\n\t\t,\tdata: {\n\t\t\t\ttouchpoint: 'home'\n\t\t\t,\thashtag: '#'+url\n\t\t\t}\n\t\t});\n\t}\n\telse if (url)\n\t{\n\t\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\t\thref: url\n\t\t});\n\t}\n%>\n\t<tr class=\"product-details\">\n\t\t<td class=\"product-image td-product-image\">\n \t\t<% var item_image = line.application.resizeImage(line.item.get('_thumbnail').url, 'thumbnail') %>\n \t\t<% if ( line.type !== 'Discount' ) { %>\n\t \t\t<% if ( link_attributes ) { %>\n\t \t\t\t<a <%= link_attributes %>>\n\t \t\t\t\t<img src=\"<%= item_image %>\" alt=\"<%= line.item.get('_thumbnail').altimagetext %>\">\n\t \t\t\t<\/a>\n\t \t\t<% } else { %>\n\t\t\t\t<img src=\"<%= item_image %>\" alt=\"<%= line.item.get('_thumbnail').altimagetext %>\">\n\t \t\t<% } %>\n\t\t<% } %>\n \t\t<\/td> \n\t\t<td class=\"product-name\">\n\t\t\t<% if (link_attributes) { %>\n\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t<b><%= line.item.get('_name') %><\/b>\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<b><%= line.item.get('_name') %><\/b>\n\t\t\t<% } %>\n\t\t\t<% if (line.type === 'Discount') { %>\n\t\t\t\t<p> <%= _('Discount').translate() %><\/p>\n\t\t\t<% } %>\t\t\n\t\t\t<% if ( line.options && line.options.length ) { %>\n\t\t\t\t<p><%= SC.macros.showItemOptions(line.options) %><\/p>\n\t\t\t<% } %>\n\t\t\t<% if ( line.trandate ) { %>\n\t\t\t\t<p><%= _('Last purchased on $(0)').translate(line.trandate)%><\/p>\n\t\t\t<% } %>\n\t\t\t<% if( ! line.reorder && ! line.reorder_checkbox && line.type !== 'Discount' ) {  %>\n\t\t\t\t<p class=\"alert alert-warning\"><%= _('This item is no longer available').translate() %><\/p>\n\t\t\t<% } %>\n\n\t\t<\/td>\n\t\t<% if ( !line.reorder_checkbox) { %><td class=\"product-quantity\">\n\t\t<% if ( line.type !== 'Discount') { %>\n\t\t\t<%= line.quantity || '0' %><\/td><% } %>\n\t\t<% } %>\n\t\t\n\t\t<td class=\"product-price\">\n\t\t\t<%= line.price ? _.formatCurrency( line.item.getPrice().price_formatted ) : '&nbsp;' %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned product-amount\">\n\t\t\t<% \/\/TODO: here use total as default instead of amount\n\t\t\tif (line.discount) {%>\n\t\t\t\t<small class=\"muted crossed\">\n\t\t\t\t\t<%= line.amount ? _.formatCurrency( line.amount ) : '&nbsp;' %>\n\t\t\t\t<\/small>\n\t\t\t\t<%= line.amount ? _.formatCurrency( line.total ) : '&nbsp;' %>\n\n\t\t\t<% } else { %>\n\t\t\t\t<%= line.amount ? _.formatCurrency( line.amount ) : '&nbsp;' %>\n\t\t\t<% } %>\n\t\t<\/td>\n\t\t<% if ( line.reorder_checkbox ) { %>\n\t\t\t<td class=\"right-aligned product-reorder\">\n\t\t\t\t<form action=\"\" class=\"product-reorder-form\">\n\t\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"item_id\" data-item-id=\"<%= line.item.get('_id') %>\" data-parent-id=\"<%= line.item.get('parent_internalid') %>\" data-item-options=\"<%= line.format_options %>\">\n\t\t\t\t\t\t<input type=\"number\" name=\"item_quantity\" id=\"\" data-toggle=\"quantity\" data-line-id=\"<%= line.id %>\" class=\"input-mini pull-right\" value=\"<%= line.item.get('quantity') || 1 %>\" min=\"1\" max=\"999\">\n\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\t<div style=\"clear:both\">\n\t\t\t\t\t\t\t<button class=\"btn btn-primary pull-right\"><%= _('Add to Cart').translate() %><\/button>\n\t\t\t\t\t\t<\/div>\t\t\t\t\t\t\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/form>\n\t\t\t<\/td>\n\t\t\t<!-- could not find a way to draw a line in the mobile, adding this helper -->\n\t\t\t<td class=\"product-reorder-mobile-helper\">&nbsp;<\/td>\n\t\t<% } %>\n\t<\/tr>\n\t<% if ( line.reorder ) { %>\n\t<tr class=\"re-order-item\">\n\t\t<td colspan=\"5\">\n\t\t<% if(line.item.get(\"itemtype\") != 'GiftCert') { %>\n\t\t\t<button class=\"btn-link\" data-re-order-item-link=\"<%= line.item.get('_id') %>\" data-item-id=\"<%= line.item.get('_id') %>\" data-item-quantity=\"<%= line.quantity %>\" data-parent-id=\"<%=line.item.get('parent_internalid') %>\" data-item-options=\"<%= line.format_options %>\">\n\t\t\t\t<%= line.quantity > 1 ? _('Reorder these Items').translate() : _('Reorder this Item').translate() %>\n\t\t\t<\/button>\n\t\t<% } else { %>\n\t\t\t<a data-giftcard-item-link=\"<%= line.item.get('_url') %>\" data-giftcard-item-name=\"<%= line.item.get('_sku') %>\" data-parent-id=\"<%=line.item.get('parent_internalid') %>\" data-item-options=\"<%= line.format_options %>\" href=\"#\">\n\t\t\t<\/a>\n\t\t<% } %>\n\t\t<\/td>\n\t<\/tr>\n\t<% } %>   \n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('transactionsNavigation', function ( page ) { %>\n<form action=\"#\" class=\"form-inline\">\n\t<label for=\"transaction_navigation\"><%= _('View').translate() %><\/label>\n\t<select name=\"transaction_navigation\" id=\"transaction_navigation\" class=\"input-medium\">\n\t\t<option value=\"#ordershistory\" <%= page === 'ordershistory' ? 'selected' : '' %>><%= _('All Orders').translate() %><\/option>\n\t\t<option value=\"#receiptshistory\" <%= page === 'reciptshistory' ? 'selected' : '' %>><%= _('All Receipts').translate() %><\/option>\n\t<\/select>\n<\/form>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<%\nregisterMacro('showItemOptions', function ( options )\n{\n\t_.each(options, function (option)\n\t{\n%>\n\t<div>\n\t\t<span><%= _(option.name).translate() %>: <\/span>\n\t\t<b><%= option.displayvalue || option.value %><\/b>\n\t<\/div>\n<%\n\t})\n})\n%>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('showingCurrent', function( configuration ) { %>\n\t<%\n\t\tvar total_items = configuration.total_items\n\t\t,\titems_per_page = configuration.items_per_page\n\t\t,\ttotal_pages = configuration.total_pages\n\t\t,\tcurrent_page = configuration.current_page\n\t\t,\torder_id = configuration.order_id\n\t\t,\torder_number = configuration.order_number\n\t\t, \torder_text = '';\n\n\t\tif (order_id)\n\t\t{\n\t\t\torder_text = ' ' + _('for <a href=\"\/ordershistory\/view\/$(0)\">  Order Number: #$(1)<\/a>').translate(order_id,order_number) ;\n\t\t}\n\t%>\n\t<% if (current_page == 1) { %>\n\t\t<% if (total_items <= items_per_page) { %>\n\t\t\t<div class=\"showing-current <%= configuration.extraClass || '' %>\">\t\t\n\t\t\t\t<p><%= _('Showing 1 - $(0) of $(1)').translate(total_items, total_items) + order_text %><\/p>\t\t\n\t\t\t<\/div>\n\t\t\n\t\t<% } else { %>\n\t\t\n\t\t\t<div class=\"showing-current <%= configuration.extraClass || '' %>\">\t\t\n\t\t\t\t<p><%= _('Showing 1 - $(0) of $(1)').translate(items_per_page, total_items) + order_text %><\/p>\t\t\n\t\t\t<\/div>\n\t\t<% } %>\n\t<% } else { %>\n\t\t\n\t\t<%\n\t\t\tvar first_item = ((current_page - 1) * items_per_page) + 1;\t\t\t\n\t\t%>\n\t\t<% if (total_pages == current_page) { %>\n\t\t\t<%\n\t\t\t\tvar items_in_page = total_items - (items_per_page * (current_page - 1))\n\t\t\t\t,\tlast_item = first_item + items_in_page - 1;\n\t\t\t%>\n\t\t\t<div class=\"showing-current <%= configuration.extraClass || '' %>\">\t\t\n\t\t\t\t<p><%= _('Showing $(0) - $(1) of $(2)').translate(first_item, last_item, total_items) + order_text %><\/p>\n\t\t\t<\/div>\n\t\t<% } else { %>\n\t\n\t\t\t<%\n\t\t\t\tvar last_item = first_item + items_per_page - 1;\n\t\t\t%>\n\t\t\t<div class=\"showing-current <%= configuration.extraClass || '' %>\">\t\t\n\t\t\t\t<p><%= _('Showing $(0) - $(1) of $(2)').translate(first_item, last_item, total_items) + order_text %><\/p>\n\t\t\t<\/div>\n\t\t<% } %>\n\t<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('trackingNumbers', function (view, trackingnumbers) { %>\n<ul class=\"tracking-numbers\">\n<% _.each(trackingnumbers, function (trackingnumber) { %>\n\t<li class=\"tracking-number\">\n\t\t<a target=\"_blank\" href=\"<%= view.getTrackingServiceUrl(trackingnumber) %>\">\n\t\t\t<%= trackingnumber %>\n\t\t<\/a>\n\t<\/li>\n<% }) %>\n<\/ul>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% \/\/TODO: use the formatted values from the backend instead of formatCurrency (eg.: total_formatted)\nregisterMacro('itemDetails', function (line) { %>\n<%\n\tline.format_options = _.map(line.options, function ( option )\n\t{\n\t\treturn option.id +'='+ option.value;\n\t}).join(',');\n\n\n\tvar link_attributes = false\n\t,\turl = line.item.get('_isPurchasable') ? line.item.get('_url') : null;\n\n\tif (url && SC.ENVIRONMENT.siteType === 'ADVANCED')\n\t{\n\t\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\t\thref: url\n\t\t,\tdata: {\n\t\t\t\ttouchpoint: 'home'\n\t\t\t,\thashtag: '#'+url\n\t\t\t}\n\t\t});\n\t}\n\telse if (url)\n\t{\n\t\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\t\thref: url\n\t\t});\n\t}\n%>\n\t<tr class=\"product-details\">\n\t\t<td class=\"product-image td-product-image\">\n \t\t<% var item_image = line.application.resizeImage(line.item.get('_thumbnail').url, 'thumbnail') %>\n \t\t<% if ( line.type !== 'Discount' ) { %>\n\t \t\t<% if ( link_attributes ) { %>\n\t \t\t\t<a <%= link_attributes %>>\n\t \t\t\t\t<img src=\"<%= item_image %>\" alt=\"<%= line.item.get('_thumbnail').altimagetext %>\">\n\t \t\t\t<\/a>\n\t \t\t<% } else { %>\n\t\t\t\t<img src=\"<%= item_image %>\" alt=\"<%= line.item.get('_thumbnail').altimagetext %>\">\n\t \t\t<% } %>\n\t\t<% } %>\n \t\t<\/td> \n\t\t<td class=\"product-name\">\n\t\t\t<% if (link_attributes) { %>\n\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t<b><%= line.item.get('_name') %><\/b>\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<b><%= line.item.get('_name') %><\/b>\n\t\t\t<% } %>\n\t\t\t<% if (line.type === 'Discount') { %>\n\t\t\t\t<p> <%= _('Discount').translate() %><\/p>\n\t\t\t<% } %>\t\t\n\t\t\t<% if ( line.options && line.options.length ) { %>\n\t\t\t\t<p><%= SC.macros.showItemOptions(line.options) %><\/p>\n\t\t\t<% } %>\n\t\t\t<% if ( line.trandate ) { %>\n\t\t\t\t<p><%= _('Last purchased on $(0)').translate(line.trandate)%><\/p>\n\t\t\t<% } %>\n\t\t\t<% if( ! line.reorder && ! line.reorder_checkbox && line.type !== 'Discount' ) {  %>\n\t\t\t\t<p class=\"alert alert-warning\"><%= _('This item is no longer available').translate() %><\/p>\n\t\t\t<% } %>\n\n\t\t<\/td>\n\t\t<% if ( !line.reorder_checkbox) { %><td class=\"product-quantity\">\n\t\t<% if ( line.type !== 'Discount') { %>\n\t\t\t<%= line.quantity || '0' %><\/td><% } %>\n\t\t<% } %>\n\t\t\n\t\t<td class=\"product-price\">\n\t\t\t<%= line.price ? _.formatCurrency( line.item.getPrice().price_formatted ) : '&nbsp;' %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned product-amount\">\n\t\t\t<% \/\/TODO: here use total as default instead of amount\n\t\t\tif (line.discount) {%>\n\t\t\t\t<small class=\"muted crossed\">\n\t\t\t\t\t<%= line.amount ? _.formatCurrency( line.amount ) : '&nbsp;' %>\n\t\t\t\t<\/small>\n\t\t\t\t<%= line.amount ? _.formatCurrency( line.total ) : '&nbsp;' %>\n\n\t\t\t<% } else { %>\n\t\t\t\t<%= line.amount ? _.formatCurrency( line.amount ) : '&nbsp;' %>\n\t\t\t<% } %>\n\t\t<\/td>\n\t\t<% if ( line.reorder_checkbox ) { %>\n\t\t\t<td class=\"right-aligned product-reorder\">\n\t\t\t\t<form action=\"\" class=\"product-reorder-form\">\n\t\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"item_id\" data-item-id=\"<%= line.item.get('_id') %>\" data-parent-id=\"<%= line.item.get('parent_internalid') %>\" data-item-options=\"<%= line.format_options %>\">\n\t\t\t\t\t\t<input type=\"number\" name=\"item_quantity\" id=\"\" data-toggle=\"quantity\" data-line-id=\"<%= line.id %>\" class=\"input-mini pull-right\" value=\"<%= line.item.get('quantity') || 1 %>\" min=\"1\" max=\"999\">\n\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\t<div style=\"clear:both\">\n\t\t\t\t\t\t\t<button class=\"btn btn-primary pull-right\"><%= _('Add to Cart').translate() %><\/button>\n\t\t\t\t\t\t<\/div>\t\t\t\t\t\t\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/form>\n\t\t\t<\/td>\n\t\t\t<!-- could not find a way to draw a line in the mobile, adding this helper -->\n\t\t\t<td class=\"product-reorder-mobile-helper\">&nbsp;<\/td>\n\t\t<% } %>\n\t<\/tr>\n\t<% if ( line.reorder ) { %>\n\t<tr class=\"re-order-item\">\n\t\t<td colspan=\"5\">\n\t\t<% if(line.item.get(\"itemtype\") != 'GiftCert') { %>\n\t\t\t<button class=\"btn-link\" data-re-order-item-link=\"<%= line.item.get('_id') %>\" data-item-id=\"<%= line.item.get('_id') %>\" data-item-quantity=\"<%= line.quantity %>\" data-parent-id=\"<%=line.item.get('parent_internalid') %>\" data-item-options=\"<%= line.format_options %>\">\n\t\t\t\t<%= line.quantity > 1 ? _('Reorder these Items').translate() : _('Reorder this Item').translate() %>\n\t\t\t<\/button>\n\t\t<% } else { %>\n\t\t\t<a data-giftcard-item-link=\"<%= line.item.get('_url') %>\" data-giftcard-item-name=\"<%= line.item.get('_sku') %>\" data-parent-id=\"<%=line.item.get('parent_internalid') %>\" data-item-options=\"<%= line.format_options %>\" href=\"#\">\n\t\t\t<\/a>\n\t\t<% } %>\n\t\t<\/td>\n\t<\/tr>\n\t<% } %>   \n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('transactionsNavigation', function ( page ) { %>\n<form action=\"#\" class=\"form-inline\">\n\t<label for=\"transaction_navigation\"><%= _('View').translate() %><\/label>\n\t<select name=\"transaction_navigation\" id=\"transaction_navigation\" class=\"input-medium\">\n\t\t<option value=\"#ordershistory\" <%= page === 'ordershistory' ? 'selected' : '' %>><%= _('All Orders').translate() %><\/option>\n\t\t<option value=\"#receiptshistory\" <%= page === 'reciptshistory' ? 'selected' : '' %>><%= _('All Receipts').translate() %><\/option>\n\t<\/select>\n<\/form>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<%\nregisterMacro('showItemOptions', function ( options )\n{\n\t_.each(options, function (option)\n\t{\n%>\n\t<div>\n\t\t<span><%= _(option.name).translate() %>: <\/span>\n\t\t<b><%= option.displayvalue || option.value %><\/b>\n\t<\/div>\n<%\n\t})\n})\n%>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('showingCurrent', function( configuration ) { %>\n\t<%\n\t\tvar total_items = configuration.total_items\n\t\t,\titems_per_page = configuration.items_per_page\n\t\t,\ttotal_pages = configuration.total_pages\n\t\t,\tcurrent_page = configuration.current_page\n\t\t,\torder_id = configuration.order_id\n\t\t,\torder_number = configuration.order_number\n\t\t, \torder_text = '';\n\n\t\tif (order_id)\n\t\t{\n\t\t\torder_text = ' ' + _('for <a href=\"\/ordershistory\/view\/$(0)\">  Order Number: #$(1)<\/a>').translate(order_id,order_number) ;\n\t\t}\n\t%>\n\t<% if (current_page == 1) { %>\n\t\t<% if (total_items <= items_per_page) { %>\n\t\t\t<div class=\"showing-current <%= configuration.extraClass || '' %>\">\t\t\n\t\t\t\t<p><%= _('Showing 1 - $(0) of $(1)').translate(total_items, total_items) + order_text %><\/p>\t\t\n\t\t\t<\/div>\n\t\t\n\t\t<% } else { %>\n\t\t\n\t\t\t<div class=\"showing-current <%= configuration.extraClass || '' %>\">\t\t\n\t\t\t\t<p><%= _('Showing 1 - $(0) of $(1)').translate(items_per_page, total_items) + order_text %><\/p>\t\t\n\t\t\t<\/div>\n\t\t<% } %>\n\t<% } else { %>\n\t\t\n\t\t<%\n\t\t\tvar first_item = ((current_page - 1) * items_per_page) + 1;\t\t\t\n\t\t%>\n\t\t<% if (total_pages == current_page) { %>\n\t\t\t<%\n\t\t\t\tvar items_in_page = total_items - (items_per_page * (current_page - 1))\n\t\t\t\t,\tlast_item = first_item + items_in_page - 1;\n\t\t\t%>\n\t\t\t<div class=\"showing-current <%= configuration.extraClass || '' %>\">\t\t\n\t\t\t\t<p><%= _('Showing $(0) - $(1) of $(2)').translate(first_item, last_item, total_items) + order_text %><\/p>\n\t\t\t<\/div>\n\t\t<% } else { %>\n\t\n\t\t\t<%\n\t\t\t\tvar last_item = first_item + items_per_page - 1;\n\t\t\t%>\n\t\t\t<div class=\"showing-current <%= configuration.extraClass || '' %>\">\t\t\n\t\t\t\t<p><%= _('Showing $(0) - $(1) of $(2)').translate(first_item, last_item, total_items) + order_text %><\/p>\n\t\t\t<\/div>\n\t\t<% } %>\n\t<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('trackingNumbers', function (view, trackingnumbers) { %>\n<ul class=\"tracking-numbers\">\n<% _.each(trackingnumbers, function (trackingnumber) { %>\n\t<li class=\"tracking-number\">\n\t\t<a target=\"_blank\" href=\"<%= view.getTrackingServiceUrl(trackingnumber) %>\">\n\t\t\t<%= trackingnumber %>\n\t\t<\/a>\n\t<\/li>\n<% }) %>\n<\/ul>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionDefault', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: <%= value.label %> \n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionColor', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: \n\t<% var color = option.colors && (option.colors[value.label] || option.colors.defaultColor); %>\n\t<span \n\t\t<% if (!_.isObject(color)) { %>\n\t\t\tstyle=\"background: <%= color %>\"\n\t\t<% } %>\n\t\tclass=\"cart-color-tile\">\n\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t<img \n\t\t\t\t\tsrc=\"<%- color.src %>\" \n\t\t\t\t\talt=\"<%- value.label %>\"\n\t\t\t\t\twidth=\"<%- color.width || '' %>\" \n\t\t\t\t\theight=\"<%- color.height || '' %>\">\n\t\t\t<% } %>\t\n\t<\/span> <%= value.label %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionDefault', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: <%= value.label %> \n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionColor', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: \n\t<% var color = option.colors && (option.colors[value.label] || option.colors.defaultColor); %>\n\t<span \n\t\t<% if (!_.isObject(color)) { %>\n\t\t\tstyle=\"background: <%= color %>\"\n\t\t<% } %>\n\t\tclass=\"cart-color-tile\">\n\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t<img \n\t\t\t\t\tsrc=\"<%- color.src %>\" \n\t\t\t\t\talt=\"<%- value.label %>\"\n\t\t\t\t\twidth=\"<%- color.width || '' %>\" \n\t\t\t\t\theight=\"<%- color.height || '' %>\">\n\t\t\t<% } %>\t\n\t<\/span> <%= value.label %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n"],"address_book_tmpl":"<%\n\tvar defaults = _.compact( _.uniq( [ view.collection.where({ defaultbilling: 'T' })[0], view.collection.where({ defaultshipping: 'T' })[0] ] ) )\n\t,\tother_addresses = view.collection.where({ defaultbilling: 'F', defaultshipping: 'F' });\n%>\n<section>\n\t<h3 class=\"no-margin-top\"><%= view.page_header %><\/h3>\n\t\n\t<a href=\"\/\" class=\"back-btn\"><%= _('&lt; Back to Account').translate() %><\/a>\n\t\n\t<hr class=\"divider-small\">\n\t<p><a class=\"btn btn-link\" href=\"\/addressbook\/new\" data-toggle=\"show-in-modal\"><%= _('Add New Address').translate() %><\/a><\/p>\n\t<% if ( defaults.length ) { %>\n\t\t<%= displayInRows(defaults, SC.macros['address'], view.options.application.getConfig('itemsPerRow')) %>\n\t\t<hr class=\"divider-small\">\n\t<% } %>\n\t\n\t<%= displayInRows(other_addresses, SC.macros['address'], view.options.application.getConfig('itemsPerRow')) %>\n<\/section>\n","creditcards_tmpl":"<%\n\tvar defaults = _.compact( _.uniq( [ view.collection.where({ ccdefault: 'T' })[0] ] ) )\n\t,\tother_creditcards = view.collection.where({ ccdefault: 'F' });\n%>\n<section>\n\t<h3 class=\"no-margin-top\"><%= _(view.page_header).translate() %><\/h3>\n\t<a href=\"\/\" class=\"back-btn\"><%= _('&lt; Back to Account').translate() %><\/a>\n\t<hr class=\"divider-small\">\n\t<p><a class=\"btn btn-link\" href=\"\/creditcards\/new\" data-toggle=\"show-in-modal\"><%= _('Add Credit Card').translate() %><\/a><\/p>\n\t<% \n\tvar cellWrap = function (item) { \n\t\treturn creditcard(item, {\n\t\t\ticons: view.options.application.getConfig('creditCardIcons')\n\t\t,\tshowActions: true\n\t\t,\tshowDefaults: view.options.application.getConfig('currentTouchpoint') === 'customercenter'\n\t\t}); \n\t} \n\tif ( defaults.length ) { %>\n\t\t<%= displayInRows(defaults, cellWrap, view.options.application.getConfig('itemsPerRow')) %>\n\t\t<hr class=\"divider-small\">\n\t<% } %>\n\t<%= displayInRows(other_creditcards, cellWrap, view.options.application.getConfig('itemsPerRow')) %>\n<\/section>\n","creditcard_tmpl":"<% view.model = view.model || new Backbone.Model(); %>\n<% if (!view.inModal) { %>\n\t<h3>\n\t\t<%= view.model.isNew() ? _('Add a new Credit Card').translate() : _('Edit Credit Card').translate() %>\n\t<\/h3>\n\n\t<a href=\"\/\" class=\"back-btn\">\n\t\t<%= _('&lt; Back to Account').translate() %>\n\t<\/a>\n\t\n\t<hr class=\"divider-small\">\n\t<% if (!view.collection.length) { %>\n\t\t<p><b><%= _('We have no Credit Card on file for this account.').translate() %><\/b><\/p>\n\t\t<p><%= _('For faster checkouts, please enter your payment information below').translate() %><\/p>\n\t\t<hr class=\"divider-small\">\n\t<% } %>\n<% } %>\n\n<form action=\"creditcard.ss\" method=\"POST\">\n\t<% if (view.inModal) { %>\n\t\t<div class=\"modal-body\">\n\t<% } %>\n\n\t<%= creditcardForm(view.model, view.options) %>\n\n\t<% if (view.inModal) { %>\n\t\t<\/div>\n\t<% } %>\n\n\t<div class=\"<%- view.inModal ? 'modal-footer left-aligned' : 'form-actions' %>\">\n\t\t<button type=\"submit\" class=\"btn btn-primary\">\n\t\t\t<%= view.model.isNew() ? _('Add Card').translate() : _('Update Card').translate() %>\n\t\t<\/button>\n\n\t\t<% if (view.inModal || view.collection.length) { %>\n\t\t\t<btn class=\"btn btn-link\" data-dismiss=\"modal\">\n\t\t\t\t<%= _('Cancel').translate() %>\n\t\t\t<\/btn>\n\t\t<% } %>\n\n\t\t<% if (!view.inModal) { %>\n\t\t\t<button type=\"reset\" class=\"btn btn-link hide\" data-action=\"reset\">\n\t\t\t\t<%= _('Reset').translate() %>\n\t\t\t<\/button>\n\t\t<% } %>\n\t<\/div>\n<\/form>","layout_tmpl":"<% if (view.application.getConfig('siteSettings.sitetype') === 'ADVANCED') { %>\n\t<%= header(view) %>\n<% } %>\n\n<div class=\"container main-container\">\n\t<div id=\"breadcrumb\">\n\t\t<%= breadcrumb() %>\n\t<\/div>\n\t<div class=\"layout-error-placeholder\"><\/div>\n\t<div class=\"row-fluid\">\n\t\t<nav id=\"side-nav\" class=\"span3\">\n\t\t\t<h2><%= _('My Account').translate() %><\/h2>\n\t\t\t<hr>\n\t\t\t<ul id=\"sidebar\" class=\"nav nav-tabs nav-stacked\">\n\t\t\t<% _.each(view.options.Layout.getMenuItems(), function (item, index) { %>\n\t\t\t\t<li data-label=\"<%= item.id %>\" data-permissions=\"<%= item.permission %>\">\n\t\t\t\t\t<a href=\"\/<%= item.url %>\" target=\"<%= item.target %>\">\n\t\t\t\t\t\t<%= item.name %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<% }) %>\n\t\t\t<\/ul>\n\t\t<\/nav>\n\t\t<div id=\"content\" class=\"span9\"><\/div>\n\t<\/div>\n<\/div>\n\n<% if (view.application.getConfig('siteSettings.sitetype') === 'ADVANCED') { %>\n\t<%= footer(view) %>\n<% } %>\n","home_alt_tmpl":"<section>\n<% if ( view.customerSupportURL ) { %>\n\t<div class=\"header-links\">\n\t\t<%= _('Need Help? Contact <a href=\"$(0)\">Customer Service<\/a>').translate( view.customerSupportURL ) %>\n\t<\/div>\n<% } %>\n\t<div class=\"row\">\n\t\t<div class=\"span3\">\n\t\t\t<div class=\"well\">\n\t\t\t\t<h3><%= _('Profile').translate() %><\/h3>\n\t\t\t\t<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td><%= _('Name').translate() %>:<\/td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<%= view.model.get('firstname') || '' %> <%= view.model.get('middlename') || '' %> <%= view.model.get('lastname') || '' %>\n\t\t\t\t\t\t<\/td>\n\t\t\t\t\t<\/tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td><%= _('Email').translate() %>:<\/td>\n\t\t\t\t\t\t<td><%= view.model.get('email') %><\/td>\n\t\t\t\t\t<\/tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td><%= _('Phone').translate() %>:<\/td>\n\t\t\t\t\t\t<td><%= view.model.get('phone') %><\/td>\n\t\t\t\t\t<\/tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td><%= _('Password').translate() %>:<\/td>\n\t\t\t\t\t\t<td>***********<\/td>\n\t\t\t\t\t<\/tr>\n\t\t\t\t<\/table>\n\t\t\t\t<a class=\"box-btn editProfileInformation\" href=\"\/profileinformation\"><%= _('Edit').translate() %><\/a>\n\t\t\t<\/div>\n\t\t\t<div class=\"well\">\n\t\t\t\t<h3><%= _('Shipping').translate() %><\/h3>\n\t\t\t\t<% var default_shipping = view.model.get('defaultShippingAddress') %>\n\t\t\t\t<% if ( default_shipping.isNew() || default_shipping.get('defaultshipping') !== 'T' ) { %>\n\t\t\t\t\t<p><%= _('We have no default address on file for this account.').translate() %><\/p>\n\t\t\t\t\t<a href=\"#\" class=\"box-btn editShippingAddress\"><%= _('Create New Address').translate() %><\/a>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t<%= default_shipping.get('label') || default_shipping.get('company') || default_shipping.get('fullname') %>\n\t\t\t\t\t\t<\/b>\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t<% if ( default_shipping.get('label') && default_shipping.get('company') ) { %>\n\t\t\t\t\t\t\t<%= default_shipping.get('company') %> <br>\n\t\t\t\t\t\t\t<%= default_shipping.get('fullname') %> <br>\n\t\t\t\t\t\t<% } else if ( default_shipping.get('label') ? !default_shipping.get('company') : default_shipping.get('company') ) { %><!-- label xor company -->\n\t\t\t\t\t\t\t<%= default_shipping.get('fullname') %> <br>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<%= default_shipping.get('addr1') %> <br>\n\t\t\t\t\t\t<% if ( default_shipping.get('addr2') ) { %>\n\t\t\t\t\t\t\t<%= default_shipping.get('addr2') %> <br>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<%= default_shipping.get('city') +', '+ default_shipping.get('state') +' '+ default_shipping.get('zip') %> <br>\n\t\t\t\t\t\t<%= default_shipping.get('country') %> <br>\n\t\t\t\t\t\t<%= default_shipping.get('phone') %>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<a href=\"#\" class=\"editShippingAddress\"><%= _('Edit').translate() %><\/a>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t\n\t\t\t<div class=\"well\">\n\t\t\t\t<h3><%= _('Payment').translate() %><\/h3>\n\t\t\t\t<% var default_creditcard = view.model.get('defaultCreditCard') %>\n\t\t\t\t<% if ( default_creditcard.isNew() || default_creditcard.get('ccdefault') !== 'T' ) { %>\n\t\t\t\t\t<p><%= _('We have no default credit card on file for this account.').translate() %><\/p>\n\t\t\t\t\t<a href=\"#\" class=\"editCreditCard\"><%= _('Add a Credit Card').translate() %><\/a>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<b><%= default_creditcard.get('paymentmethod').name %><\/b><br>\n\t\t\t\t\t\t<%= default_creditcard.get('ccname') %> <br>\n\t\t\t\t\t\t<%= default_creditcard.get('ccnumber') %> <br>\n\t\t\t\t\t\t<%= _('Exp Date').translate() +': '+ default_creditcard.get('expmonth') +'\/'+ default_creditcard.get('expyear') %> <br>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<a href=\"#\" class=\"box-btn editCreditCard\"><%= _('Edit').translate() %><\/a>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div class=\"span6\">\n\t\t\t${homeBanner()}\n\t\t<\/div>\n\t<\/div>\n<\/section>","address_tmpl":"<% var model = view.model || new Backbone.Model(); %>\n<% if (!view.inModal) { %>\n\t<h3>\n\t\t<%= model.isNew() ? _('Add a new Address').translate() : _('Update Address').translate() %>\n\t<\/h3>\n\n\t<a href=\"\/\" class=\"back-btn\">\n\t\t<%= _('&lt; Back to Account').translate() %>\n\t<\/a>\n\n\t<hr class=\"divider-small\">\n\t<% if (!view.collection.length) { %>\n\t\t<p><b><%= _('We have no address on file for this account.').translate() %><\/b><\/p>\n\t\t<p><%= _('For faster checkouts, please enter a shipping address bellow').translate() %><\/p>\n\t\t<hr class=\"divider-small\">\n\t<% } %>\n<% } %>\n\n<form action=\"addressbook.ss\" method=\"POST\">\n\t<% if (view.inModal) { %>\n\t\t<div class=\"modal-body\">\n\t<% } %>\n\n\t<%= addressFrom(model, {\n\t\tcountries: view.options.application.getConfig('siteSettings.countries')\n\t,\thideDefaults: view.options.application.getConfig('currentTouchpoint') !== 'customercenter' \/* only show the \"defaults\" functionality in myaccount *\/\n\t}) %>\n\n\t<% if (view.inModal) { %>\n\t\t<\/div>\n\t<% } %>\n\t<div class=\"<%- view.inModal ? 'modal-footer' : 'form-actions' %>\">\n\t\t<button type=\"submit\" class=\"btn btn-primary\">\n\t\t\t<%= model.isNew() ? _('Save Address').translate() : _('Update Address').translate() %>\n\t\t<\/button>\n\n\t\t<% if (view.inModal || view.collection.length) { %>\n\t\t\t<a class=\"btn btn-link\" data-dismiss=\"modal\">\n\t\t\t\t<%= _('Cancel').translate() %>\n\t\t\t<\/a>\n\t\t<% } %>\n\n\t\t<% if (!view.inModal) { %>\n\t\t\t<button type=\"reset\" class=\"btn btn-link hide\" data-action=\"reset\">\n\t\t\t\t<%= _('Reset').translate() %>\n\t\t\t<\/button>\n\t\t<% } %>\n\t<\/div>\n<\/form>","landing_page_tmpl":"<section>\n\t<% if (view.page_header && !view.inModal) { %>\n\t\t<h3 class=\"no-margin-top\"><%= view.page_header %><\/h3>\n\t\t<a href=\"\/\" class=\"back-btn\"><%= _('&lt; Back to Account').translate() %><\/a>\n\t\t<hr class=\"divider-small\">\n\t<% } %>\n\t<div id=\"main-banner\" class=\"main-banner\"><\/div>\n\n\t<% if (view.page && view.page.get('content')) { %>\n\t\t<div id=\"landing-page-content\" class=\"view-body landing-page-content\">\n\t\t\t<%= view.page.get('content') %>\n\t\t<\/div>\n\t<% } %>\n<\/section>","internal_error_tmpl":"<div class=\"view-header\">\n\t<% if (view.page_header) { %>\n\t<h1><%= view.page_header %><\/h1>\n\t<% } %>\n\t<div id=\"main-banner\" class=\"main-banner\"><\/div>\n<\/div>\n<div id=\"internal-error-content\" class=\"view-body internal-error-content\">\n\t<%= view.options.message || _('Sorry, we could not load the content you requested.').translate() %>\n<\/div>","receipt_details_tmpl":"<%\tvar title = view.model.get('type_name') == 'Invoice' ? _('Invoice').translate() : _('Receipt').translate();\n\tvar origin = window.location.origin ? window.location.origin : \n\t\t\t\t(window.location.protocol + \"\/\/\" + window.location.hostname + (window.location.port ? (':' + window.location.port) : ''));\n%>\n<p>\n\t<!-- Navigation Links -->\n\t<div class=\"pull-right\">\n\t\t<a target=\"_blank\" href=\"<%= origin %>\/app\/accounting\/print\/hotprint.nl?regular=T&sethotprinter=T&whence=&printtype=transaction&trantype=<%= view.model.get('trantype') %>&label=<%= encodeURIComponent( view.model.get('type_name') ) %>&id=<%= view.model.get('internalid') %>\"><%= _('Print').translate() %><\/a>\n\t<\/div>\n\t<!-- Navigation Links Ends -->\n\t<div><%= _('$(0) Number: <b>$(1)<\/b>').translate( title, view.model.get('order_number')) %><\/div>\n<\/p>\n<!-- Recipt Header -->\n<table class=\"table table-bordered order-details\">\n\t<col class=\"order-details-col1\">\n\t<col class=\"order-details-col2\">\n\t<col class=\"order-details-col3\">\n\t<tr class=\"alternate\">\n\t\t<td>\n\t\t\t<p>\n\t\t\t\t<b><%= _('$(0) Date').translate( title ) %><\/b>\n\t\t\t<\/p>\n\t\t\t<%= view.model.get('date') %>\n\t\t<\/td>\n\t\t<td>\n\t\t\t<p>\n\t\t\t\t<b><%= _('$(0) Total').translate( title ) %><\/b>\n\t\t\t<\/p>\n\t\t\t<%= view.model.get('summary').total_formatted  %>\n\t\t<\/td>\n\t\t<td>\n\t\t\t<p>\n\t\t\t\t<b><%= _('$(0) Status').translate( title ) %><\/b>\n\t\t\t<\/p>\n\t\t\t<%= view.model.get('status') || _('Deposited').translate() %>\n\t\t<\/td>\n\t<\/tr>\n<\/table>\n<!-- Recipt Header Ends -->\n<!-- Fullfillment -->\n<table class=\"table table-bordered order-details\">\n\t<!-- Fullfillment Title -->\n\t<tr>\n\t\t<td colspan=\"3\">\n\t\t\t<h3><%= _('Payment Information').translate() %><\/h3>\n\t\t<\/td>\n\t<\/tr>\n\t<!-- Fullfillment Lines -->\n\t<tr>\n\t\t<td colspan=\"3\">\n\t\t\t<table class=\"table order-lines\">\n\t\t\t\t<col class=\"order-items-col1\">\n\t\t\t\t<col class=\"order-items-col2\">\n\t\t\t\t<col class=\"order-items-col3\">\n\t\t\t\t<col class=\"order-items-col4\">\n\t\t\t\t<col class=\"order-items-col5\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th><%= _('Image').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Name').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Qty').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Price').translate() %><\/th>\n\t\t\t\t\t<th><%= _('Amount').translate() %><\/th>\n\t\t\t\t<\/tr>\n\t\t\t\t<%\n\t\t\t\t\t_.each(view.model.get('lines').models, function (line, index)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar\titem_details = {\n\t\t\t\t\t\t\t\titem: line.get('item')\n\t\t\t\t\t\t\t,\toptions: line.get('options')\n\t\t\t\t\t\t\t,\tquantity: line.get('quantity')\n\t\t\t\t\t\t\t,\tprice: line.get('rate')\n\t\t\t\t\t\t\t,\tamount: line.get('amount')\n\t\t\t\t\t\t\t,\treorder: line.get('item').get('_isPurchasable')\n\t\t\t\t\t\t\t,\tapplication: view.options.application\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t,\tshipgroup_subtotal = shipgroup_subtotal + item_details.amount\n\t\t\t\t%>\n\t\t\t\t\t<%= itemDetails(item_details) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/table>\n\t\t<\/td>\n\t<\/tr>\n<\/table>\n<!-- Shipping Groups Ends -->\n<!-- Payment Information -->\n<table class=\"table table-bordered order-details\">\n\t<col class=\"order-details-col1\">\n\t<col class=\"order-details-col2\">\n\t<col class=\"order-details-col3\">\n\t<!-- Payment Information Title -->\n\t<tr>\n\t\t<td colspan=\"3\">\n\t\t\t<h3><%= _('Payment Information').translate() %><\/h3>\n\t\t<\/td>\n\t<\/tr>\n\t<!-- Payment Information Title Ends -->\n\t<tr>\n\t\t<td>\n\t\t\t<p><b><%= _('Billing To').translate() %><\/b><\/p>\n\t\t\t<% var billaddress = view.model.get('addresses').get(view.model.get('billaddress')); %>\n\t\t\t<p><%= ( ( billaddress && billaddress.getFormattedAddress() ) || _('N\/A').translate()).replace(\/\\n\/g, '<br>') %><\/p>\n\t\t<\/td>\n\t\t<td>\n\t\t\t<p><b><%= _('Payment Method').translate() %><\/b><\/p>\n\t\t\t<p>\n\t\t\t<% var paymentmethod = view.model.get('paymentmethods') && view.model.get('paymentmethods').findWhere({primary: true}); %>\n\t\t\t<% if (paymentmethod) { %>\n\t\t\t\t<%= SC.macros.formatPaymentMethod(paymentmethod, view.application.getConfig('creditCardIcons')) %>\n\t\t\t<% } else { %>\n\t\t\t\t<%= _('N\/A').translate() %>\n\t\t\t<% } %>\n\t\t\t<\/p>\n\t\t<\/td>\n\t\t<td>\n\t\t\t<p><b><%= _('$(0) Summary').translate( title ) %><\/b><\/p>\n\t\t\t<p>\n\t\t\t\t<table class=\"table table-condensed order-sumary\">\n\t\t\t\t\t<col class=\"order-sumary-names\">\n\t\t\t\t\t<col class=\"order-sumary-values\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('$(0) Subtotal').translate( title ) %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').subtotal_formatted  %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% if ( parseFloat( view.model.get('summary').discounttotal ) ) { %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('$(0) Discount').translate( title ) %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').discounttotal_formatted  %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<% if ( parseFloat( view.model.get('summary').shippingcost ) ) { %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Shipping Total').translate() %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').shippingcost_formatted %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<% if ( parseFloat( view.model.get('summary').handlingcost ) ) { %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Handling Total').translate() %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').handlingcost_formatted %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<% if ( view.model.get('promocode') ) { %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Promo Code').translate() %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('promocode').code %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Tax Total').translate() %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').taxtotal_formatted %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th class=\"order-sumary-name\"><%= _('$(0) Total').translate( title ) %><\/th>\n\t\t\t\t\t\t\t<th class=\"order-sumary-value\"><%= view.model.get('summary').total_formatted %><\/th>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t<\/tbody>\t\t\t\t\t\n\t\t\t\t<\/table>\n\t\t\t<\/p>\n\t\t<\/td>\n\t<\/tr>\n<\/table>\n","email_preferences_tmpl":"<% var subscriptions = view.model.get('campaignsubscriptions') || []; %>\n<section>\n\t<h3 class=\"no-margin-top\"><%= view.page_header %><\/h3>\n\t<a href=\"\/\" class=\"back-btn\"><%= _('&lt; Back to Account').translate() %><\/a>\n\t<hr class=\"divider-small\">\n\t<div data-type=\"alert-placeholder\"><\/div>\n\t<form>\n\t\t<fieldset>\n\t\t\t<legend class=\"no-margin-bottom\">\n\t\t\t\t<%= _('Newsletter').translate() %>\n\t\t\t<\/legend>\n\t\t\t<div class=\"control-group\">\n\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"emailsubscribe\" value=\"T\" data-unchecked-value=\"F\" name=\"emailsubscribe\" <%= view.model.get('emailsubscribe') == 'T' ? 'checked' : '' %>>\n\t\t\t\t\t\t<%= _('Yes, I would like to sign up for your Newsletter.').translate() %>\n\t\t\t\t\t<\/label>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/fieldset>\n\t\t<% if ( view.options.application.getConfig('siteSettings.campaignsubscriptions') && subscriptions.length ) { %>\n\t\t<hr class=\"divider-small\">\n\t\t<fieldset>\n\t\t\t<legend class=\"no-margin-bottom\">\n\t\t\t\t<%= _('Subscriptions').translate() %>\n\t\t\t<\/legend>\n\t\t\t<% _.each(subscriptions, function (subscription, index) { %>\n\t\t\t\t<% var internalid = subscription.internalid; %>\n\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"subscription-<%= internalid %>\" class=\"subscription\" value=\"T\" data-unchecked-value=\"F\" name=\"subscription-<%= internalid %>\" <%= view.model.get('emailsubscribe') == 'T' ? '' : 'disabled' %> <%= subscription.subscribed ? 'checked' : '' %>>\n\t\t\t\t\t\t\t<%= _( subscription.name ).translate() %>\n\t\t\t\t\t\t<\/label>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<% }) %>\n\t\t<\/fieldset>\n\t\t<% } %>\n\t\t<div class=\"form-actions\">\n\t\t\t<button type=\"submit\" class=\"btn btn-primary\"><%= _('Update').translate() %><\/button>\n\t\t\t<button type=\"reset\"  class=\"btn btn-link hide\" data-action=\"reset\"><%= _('Cancel').translate() %><\/button>\n\t\t<\/div>\n\t<\/form>\n<\/section>\n","home_tmpl":"<% if ( view.customerSupportURL ) { %>\n\t<div class=\"header-links pull-right\">\n\t\t<%= _('Need Help? Contact <a href=\"$(0)\">Customer Service<\/a>').translate( view.customerSupportURL ) %>\n\t<\/div>\n<% } %>\n<h3 class=\"no-margin-top\"><%= _('Welcome $(0)!').translate(view.application.getUser().get('firstname') || view.application.getUser().get('companyname')) %><\/h3>\n<hr class=\"divider-small\">\n<section>\n\t<%= recentOrdersWidget( view.recentOrders ) %>\n<\/section>\n<section>\n\t<h4><%= _('My Settings').translate() %><\/h4>\n\t<hr>\n\t<% var homeItems = []; \n\t\thomeItems.push(SC.macros.homeProfile(view));\n\t\thomeItems.push(SC.macros.homeShipping(view));\n\t\thomeItems.push(SC.macros.homePayment(view));\n\t%>\n\t<%= displayInRows(homeItems, null, view.application.getConfig('itemsPerRow')) %>\n<\/section>\n<%= homeBanner(view.application.getConfig('homeBanners')) %>","order_history_tmpl":"<h3><%= view.page_header %><\/h3>\n<a href=\"\/\" class=\"back-btn\">\n\t<%= _('&lt; Back to Account').translate() %>\n<\/a>\n<div class=\"header-links pull-right\">\n\t<%= transactionsNavigation('ordershistory') %>\n<\/div>\n<hr class=\"divider-small\">\n<% if (view.collection.models.length) { %>\n <div class=\"showing-current pull-left\">\n <p>Total Found: <%= view.collection.totalRecordsFound %><\/p>\n <\/div>\n\t<% \/*= showingCurrent({\n\t\t\tcurrent_page: view.options.page\n\t\t,\titems_per_page: view.collection.recordsPerPage\n\t\t,\ttotal_items: view.collection.totalRecordsFound\n\t\t,\ttotal_pages: Math.ceil(view.collection.totalRecordsFound \/ view.collection.recordsPerPage)\n\t\t,\textraClass: 'pull-left'\n\t}) *\/%>\n\t<%\n\t\tvar pagination_result = pagination(_.extend({}, \n\t\t\tview.options.application.getConfig('defaultPaginationSettings'), \n\t\t\t{\n\t\t\t\tcurrentPage: view.options.page\n\t\t\t,\ttotalPages: Math.ceil(view.collection.totalRecordsFound \/ view.collection.recordsPerPage)\n\t\t\t,\textraClass: 'pagination-small pull-right'\n\t\t\t,\tpager: function (page) {\n\t\t\t\t\treturn (page === 1) ? '\/ordershistory' : '\/ordershistory?page='+page;\n\t\t\t\t}\n\t\t\t}\n\t\t))\n\t%>\n\t<%\/\/= pagination_result %>\n\t<table class=\"table\">\n\t<% _.each(view.collection.models, function (order_item) { %>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Order Date').translate() %><br>\n\t\t\t\t\t<b><%= order_item.get('date') %><\/b>\n\t\t\t\t<\/p>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Order Number').translate() %><br>\n\t\t\t\t\t<b><%= order_item.get('order_number') %><\/b>\n\t\t\t\t<\/p>\n\t\t\t<\/td>\n\t\t\t<td>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Order Total').translate() %><br>\n\t\t\t\t\t<b><%= order_item.get('summary').total_formatted %><\/b>\n\t\t\t\t<\/p>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Status').translate() %><br>\n\t\t\t\t\t<b><%= order_item.get('status') %><\/b>\n\t\t\t\t<\/p>\n\t\t\t<\/td>\n\t\t\t<td class=\"summary\">\n\t\t\t\t<ul class=\"nav-list unstyled\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"\/ordershistory\/view\/<%= order_item.get('internalid') %>\">\n\t\t\t\t\t\t\t<%= _('View Order Details').translate() %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class=\"divider\"><\/li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"\/reorderItems?order_id=<%= order_item.get('internalid') %>\">\n\t\t\t\t\t\t\t<%= _('Reorder Items').translate() %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class=\"divider\"><\/li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<% var trackingnumbers = order_item.get('trackingnumbers') || [] %>\n\t\t\t\t\t\t<% if (!trackingnumbers.length) { %>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<%= _('Track Items').translate() %>\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<% } else if (trackingnumbers.length == 1) { %>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"<%= view.getTrackingServiceUrl(trackingnumbers[0]) %>\">\n\t\t\t\t\t\t\t\t<%= _('Track Items').translate() %>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<a href=\"#\" rel=\"clickover\" data-placement=\"left\"\n\t\t\t\t\t\t\t\tdata-html=\"true\"\n\t\t\t\t\t\t\t\tdata-content-selector=\"#traking-numbers-<%= order_item.get('internalid') %>\"\n\t\t\t\t\t\t\t\tdata-original-title=\"<%= _('Shipments').translate() %>\">\n\t\t\t\t\t\t\t\t<%= _('Track Items').translate() %>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t<span id=\"traking-numbers-<%= order_item.get('internalid') %>\" style=\"display: none\">\n\t\t\t\t\t\t\t\t<%= trackingNumbers(view, trackingnumbers) %>\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t<\/li>\n\t\t\t\t<\/ul>\n\t\t\t<\/td>\n\t\t<\/tr>\n\t<% }) %>\n\t<\/table>\n\n\t\t<%= pagination_result %>\n\n\t<% } else { %>\n\t<p><%= _('We have no orders on file for this account.').translate() %><\/p>\n\t<p><a class=\"btn\" href=\"#\" data-touchpoint=\"home\"><%= _('Shop Now').translate() %><\/a><\/p>\n<% } %>\n","iframe_tmpl":"<iframe src=\"<%- view.src %>\" class=\"modalIFrame\"><\/iframe>\n<script type=\"text\/javascript\">\n\t\/\/TODO: Search for an alternative to this fix of issue 271237\n\tif(navigator.userAgent.match(\/iPhone\/i)){\n\t\tjQuery('.modalIFrame').attr('scrolling','no');\n\t}\n<\/script>","reorder_items_tmpl":"<h3 class=\"no-margin-top\"><%= view.page_header %><\/h3>\n<a href=\"\/\" class=\"back-btn\"><%= _('&lt; Back to Account').translate() %><\/a>\n\n<% if (view.collection.totalRecordsFound && !view.options.order_id) { %>\n<div class=\"header-links pull-right\">\n\t<form action=\"#\" class=\"form-inline\">\n\t\t<label for=\"sortBy\"><%= _('Sort By').translate() %><\/label>\n\t\t<select name=\"sortBy\" id=\"sortBy\" class=\"input-big\">\n\t\t\t<option value=\"#reorderItems<%= view.page ? '\/'+ view.page : '' %>?sort=quantity-desc\" <%= view.options.sort === 'quantity-desc' ? 'selected' : '' %>> <%= _('Frequently Purchased').translate() %> <\/option>\n\t\t\t<option value=\"#reorderItems<%= view.page ? '\/'+ view.page : '' %>?sort=date-desc\" <%= view.options.sort === 'date-desc' ? 'selected' : '' %>> <%= _('Most Recently Purchased').translate() %> <\/option>\n\t\t\t<option value=\"#reorderItems<%= view.page ? '\/'+ view.page : '' %>?sort=price-desc\" <%= view.options.sort === 'price-desc' ? 'selected' : '' %>> <%= _('Price High to Low').translate() %> <\/option>\n\t\t\t<option value=\"#reorderItems<%= view.page ? '\/'+ view.page : '' %>?sort=price-asc\" <%= view.options.sort === 'price-asc' ? 'selected' : '' %>> <%= _('Price Low to High').translate() %> <\/option>\n\t\t\t<option value=\"#reorderItems<%= view.page ? '\/'+ view.page : '' %>?sort=name-asc\" <%= view.options.sort === 'name-asc' ? 'selected' : '' %>> <%= _('Name A to Z').translate() %> <\/option>\n\t\t\t<option value=\"#reorderItems<%= view.page ? '\/'+ view.page : '' %>?sort=name-desc\" <%= view.options.sort === 'name-desc' ? 'selected' : '' %>> <%= _('Name Z to A').translate() %> <\/option>\n\t\t<\/select>\n\t<\/form>\n<\/div>\n<% } %>\n\n<hr class=\"divider-small\">\n<% if ( view.collection.totalRecordsFound ) { %>\n\t<%= showingCurrent({\n\t\t\tcurrent_page: view.options.page\n\t\t,\titems_per_page: view.collection.recordsPerPage\n \t\t,\ttotal_items: view.collection.totalRecordsFound\n\t\t,\ttotal_pages: Math.ceil(view.collection.totalRecordsFound \/ view.collection.recordsPerPage)\n\t\t,\textraClass: 'pull-left'\n\t\t,\torder_id: view.options.order_id\n\t\t,\torder_number: view.collection.at(0).get('tranid')\n\t}) %>\n\n\t<% var pagination_result = pagination(_.extend(\n\t\t{}, \n\t\tview.options.application.getConfig('defaultPaginationSettings'), \n\t\t{\n\t\t\tcurrentPage: view.options.page\n\t\t,\ttotalPages: Math.ceil(view.collection.totalRecordsFound \/ view.collection.recordsPerPage)\n\t\t,\textraClass: 'pagination-small pull-right no-margin-top'\n\t\t,\tpager: function (page) {\n\t\t\t\tvar url = (page === 1) ? '\/reorderItems' : '\/reorderItems?page='+page\n\n\t\t\t\tif (view.options.sort)\n\t\t\t\t{\n\t\t\t\t\turl += (page===1?'?':'&') + 'sort=' + view.options.sort; \n\t\t\t\t}\n\n\t\t\t\tif (view.options.order_id)\n\t\t\t\t{\n\t\t\t\t\turl += (page===1 && !view.options.sort ? '?':'&') + 'order_id=' + view.options.order_id; \n\t\t\t\t}\n\n\t\t\t\treturn  url;\n\t\t\t}\n\t\t}\n\t)) %>\n\n\t<%= pagination_result %>\n\n\t<table class=\"table order-lines\">\n\t\t<col class=\"re-order-items-col1\">\n\t\t<col class=\"re-order-items-col2\">\n\t\t<col class=\"re-order-items-col3\">\n\t\t<col class=\"re-order-items-col4\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th colspan=\"2\"><%= _('Item').translate() %><\/th>\n\t\t\t\t<th colspan=\"2\"><%= _('Price').translate() %><\/th>\n\t\t\t<\/tr>\n\t\t<\/thead>\n\t\t<tbody>\n\t\t<%\n\t\t\t_.each(view.collection.models, function (line, index)\n\t\t\t{\n\t\t\t\tvar\titem_details = {\n\t\t\t\t\t\titem: line.get('item')\n\t\t\t\t\t,\toptions: line.get('options_object')\n\t\t\t\t\t,\tquantity: false\n\t\t\t\t\t,\tid : line.id\n\t\t\t\t\t,\tprice: line.get('item').get('_price') \n\t\t\t\t\t,\tamount: false\n\t\t\t\t\t,\treorder_checkbox: true\n\t\t\t\t\t,\ttrandate: line.get('trandate')\n\t\t\t\t\t,\tapplication: view.options.application\n\t\t\t\t};\n\t\t%>\n\t\t\t<%= itemDetails( item_details ) %>\n\t\t<% }) %>\n\t\t<\/tbody>\n\t<\/table>\n\t\n\t<%= pagination_result %>\n\n<% } else { %>\n\t<p><%= _('You have not bought anything yet.').translate() %><\/p>\n\t<p><a class=\"btn\" href=\"#\" data-touchpoint=\"home\"><%= _('Shop Now').translate() %><\/a><\/p>\n<% } %>\n","profile_information_tmpl":"<h3 class=\"no-margin-top\"><%= view.page_header %><\/h3>\n<a href=\"\/\" class=\"back-btn\"><%= _('&lt; Back to Account').translate() %><\/a>\n<hr class=\"divider-small\">\n<% view.model = view.model || { get: function () { return ''; } } %>\n<div data-type=\"alert-placeholder\"><\/div>\n<section class=\"row-fluid\">\n\t<div class=\"span12\">\n\t\t<form class=\"contact_info\">\n\t\t\t<fieldset>\n\t\t\t\t<% if ( view.model.get('type') !== 'COMPANY' ) { %>\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<label class=\"control-label\" for=\"firstname\"><%= _('First Name').translate() %><\/label>\n\t\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"input-large\" id=\"firstname\" name=\"firstname\" value=\"<%- view.model.get('firstname') || '' %>\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<label class=\"control-label\" for=\"lastname\"><%= _('Last Name').translate() %><\/label>\n\t\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"input-large\" id=\"lastname\" name=\"lastname\" value=\"<%- view.model.get('lastname') || '' %>\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<% } %>\n\n\t\t\t\t<% if ( view.model.get('type') === 'COMPANY' || view.options.application.getConfig('siteSettings.registration.showcompanyfield') === 'T' ) { %>\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<label class=\"control-label\" for=\"companyname\"><%= _('Company Name').translate() %><\/label>\n\t\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"input-large\" id=\"companyname\" name=\"companyname\" value=\"<%- view.model.get('companyname') || '' %>\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<% } %>\n\n\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t<label class=\"control-label\" for=\"phone\">\n\t\t\t\t\t\t<% var phone_format = view.options.application.getConfig('siteSettings.phoneformat') %>\n\t\t\t\t\t\t<% if ( phone_format ) { %>\n\t\t\t\t\t\t\t<%= _('Phone Number (ex\/$(0))').translate( phone_format ) %>\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<%= _('Phone Number').translate() %>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t<\/label>\n\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t<input type=\"tel\" class=\"input-large\" id=\"phone\" name=\"phone\" data-type=\"phone\" value=\"<%- view.model.get('phone') || '' %>\">\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\n\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t<label class=\"control-label\" for=\"email\"><%= _('Email').translate() %><\/label>\n\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t<p><%- view.model.get('email') || '' %><\/p>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\n\t\t\t<\/fieldset>\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\"><%= _('Update').translate() %><\/button>\n\t\t\t\t<button type=\"reset\" class=\"btn btn-link hide\" data-action=\"reset\"><%= _('Cancel').translate() %><\/button>\n\t\t\t<\/div>\n\t\t<\/form>\n\t<\/div>\n<\/section>\n","page_not_found_tmpl":"<div class=\"view-header\">\n\t<% if (view.page_header) { %>\n\t<h1><%= view.page_header %><\/h1>\n\t<% } %>\n\t<div id=\"main-banner\" class=\"main-banner\"><\/div>\n<\/div>\n<div id=\"page-not-found-content\" class=\"view-body page-not-found-content\">\n\t<%= _('Sorry, we could not load the content you requested.').translate() %>\n<\/div>","forbidden_error_tmpl":"<div class=\"view-header\">\n\t<% if (view.page_header) { %>\n\t<h1><%= view.page_header %><\/h1>\n\t<% } %>\n\t<div id=\"main-banner\" class=\"main-banner\"><\/div>\n<\/div>\n<div id=\"forbidden-error-content\" class=\"view-body forbidden-error-content\">\n\t<p><%= _('Sorry! You have no permission to view this page.').translate() %><\/p>\n\t<p><%= _('Please contact the website administrator, click <a href=\"\/\">here<\/a> to continue.').translate() %><\/p>\n<\/div>","profile_update_your_password_tmpl":"<h3 class=\"no-margin-top\"><%= view.page_header %><\/h3>\n<a href=\"\/\" class=\"back-btn\"><%= _('&lt; Back to Account').translate() %><\/a>\n<hr class=\"divider-small\">\n<% view.model = view.model || { get: function () { return ''; } } %>\n<div data-type=\"alert-placeholder\"><\/div>\n<section class=\"row-fluid\">\n\t<div class=\"span12\">\n\t\t<form class=\"update_password\">\n\t\t\t<fieldset>\n\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t<label class=\"control-label\" for=\"current_password\"><%= _('Current Password').translate() %><\/label>\n\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t<input type=\"password\" class=\"input-large\" id=\"current_password\" name=\"current_password\" value=\"\">\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t\n\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t<label class=\"control-label\" for=\"password\"><%= _('New Password').translate() %><\/label>\n\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t<input type=\"password\" class=\"input-large\" id=\"password\" name=\"password\" value=\"\">\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\n\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t<label class=\"control-label\" for=\"confirm_password\"><%= _('Confirm Password').translate() %><\/label>\n\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t<input type=\"password\" class=\"input-large\" id=\"confirm_password\" name=\"confirm_password\" value=\"\">\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/fieldset>\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\"><%= _('Update').translate() %><\/button>\n\t\t\t\t<button type=\"reset\" class=\"btn hide\" data-action=\"reset\"><%= _('Reset').translate() %><\/button>\n\t\t\t<\/div>\n\t\t<\/form>\n\t<\/div>\n<\/section>","receipt_history_tmpl":"<h3 class=\"no-margin-top\"><%= view.page_header %><\/h3>\n<a href=\"\/\" class=\"back-btn\"><%= _('&lt; Back to Account').translate() %><\/a>\n\n<div class=\"header-links pull-right\">\n\t<%= transactionsNavigation('reciptshistory') %>\n<\/div>\n\n<hr class=\"divider-small\">\n<% if ( view.collection.models.length ) { %>\n\t<%= showingCurrent({\n\t\t\tcurrent_page: view.options.page\n\t\t,\titems_per_page: view.collection.recordsPerPage\n\t\t,\ttotal_items: view.collection.totalRecordsFound\n\t\t,\ttotal_pages: Math.ceil(view.collection.totalRecordsFound \/ view.collection.recordsPerPage)\n\t\t,\textraClass: 'pull-left'\n\t}) %>\n\n\t<% var pagination_result = pagination(_.extend(\n\t\t{}, \n\t\tview.options.application.getConfig('defaultPaginationSettings'), \n\t\t{\n\t\t\tcurrentPage: view.options.page\n\t\t,\ttotalPages: Math.ceil(view.collection.totalRecordsFound \/ view.collection.recordsPerPage)\n\t\t,\textraClass: 'pagination-small pull-right'\n\t\t,\tpager: function (page) {\n\t\t\t\treturn (page === 1) ? '\/receiptshistory' : '\/receiptshistory?page='+page;\n\t\t\t}\n\t\t}\n\t)) %>\n\t<%= pagination_result %>\n\n\t<table class=\"table\">\n\t<% _.each(view.collection.models, function (receipt_item, index) { %>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Receipt Date').translate() %><br>\n\t\t\t\t\t<b><%= receipt_item.get('date') %><\/b>\n\t\t\t\t<\/p>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Receipt Numer').translate() %><br>\n\t\t\t\t\t<b><%= receipt_item.get('order_number') %><\/b>\n\t\t\t\t<\/p>\n\t\t\t<\/td>\n\t\t\t<td>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Receipt Total').translate() %><br>\n\t\t\t\t\t<b><%= receipt_item.get('summary').total_formatted %><\/b>\n\t\t\t\t<\/p>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Status').translate() %><br>\n\t\t\t\t\t<b><%= receipt_item.get('status') %><\/b>\n\t\t\t\t<\/p>\n\t\t\t<\/td>\n\t\t\t<td class=\"summary\">\n\t\t\t\t<a href=\"\/receiptshistory\/view\/<%= receipt_item.get('internalid') %>\">\n\t\t\t\t\t<%= _('View Receipt Details').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/td>\n\t\t<\/tr>\n\t<% }) %>\n\t<\/table>\n\n\t<%= pagination_result %>\n\n<% } else { %>\n\t<p><%= _('You do not have any recent receipts.').translate() %><\/p>\n<% } %>\n","order_details_tmpl":"<h3 class=\"no-margin-top\"><%= view.page_header %><\/h3>\n<div data-type=\"alert-placeholder\"><\/div>\n<a href=\"\/ordershistory\" class=\"back-btn\"><%= _('&lt; Back to Order History').translate() %><\/a>\n<hr class=\"divider-small\">\n<% \tvar return_policy_URL = view.options.application.getConfig('returnPolicyURL'); \n\tvar origin = window.location.origin ? window.location.origin : \n\t\t\t\t(window.location.protocol + \"\/\/\" + window.location.hostname + (window.location.port ? (':' + window.location.port) : ''));\n%>\n\n<!-- Order Header Alternative, this one is used for the mobile version -->\n<div class=\"visible-phone alternate-order-header\">\n\t<div class=\"order-summary-data order-date\">\n\t\t<span><%= _('Order Date').translate() %><\/span>\n\t\t<b><%= view.model.get('date') %><\/b>\n\t<\/div>\n\n\t<div class=\"order-summary-data order-total\">\n\t\t<span><%= _('Order Total').translate() %><\/span>\n\t\t<b><%= view.model.get('summary').total_formatted %><\/b>\n\t<\/div>\n\n\t<div class=\"order-summary-data order-number\">\n\t\t<span><%= _('Order Number').translate() %><\/span>\n\t\t<b><%= view.model.get('order_number') %><\/b>\n\t<\/div>\n\n\t\t\n\t<div class=\"order-summary-data order-status\">\n\t\t<span><%= _('Order Status').translate() %><\/span>\n\t\t<b><%= view.model.get('status') %><\/b>\n\t<\/div>\n<\/div>\n\n<!-- Navigation Links -->\n<div class=\"pull-right order-navigation-links\">\n\t<% if (view.model.get('lines').any(function(line){return line.get('item').get('_isPurchasable')}) && \n\t\t! view.model.get('lines').all(function(line){return line.get('item').get(\"itemtype\") == 'GiftCert'})) { %>\n\t\t<button class=\"re-order-all-items btn-link\"><%= _('Reorder All Items').translate() %><\/button>\n\t<% } %>\n\t<% if (return_policy_URL) { %>\n\t\t<span class=\"separator\"> | <\/span><a href=\"<%= return_policy_URL %>\" class=\"return-items\"><%= _('Return Items').translate() %><\/a>\n\t<% } %>\n\t<span class=\"separator\"> | <\/span><a target=\"_blank\" class=\"return-items\" href=\"<%= origin %>\/app\/accounting\/print\/hotprint.nl?regular=T&sethotprinter=T&whence=&printtype=transaction&trantype=salesord&label=Sales%20Order&id=<%= view.model.get('internalid') %>\"><%= _('Print').translate() %><\/a>\n<\/div>\n\n<!-- Navigation Links Ends -->\n<!-- Order Header, this one is used for the descktop version -->\n<div class=\"hidden-phone order-header\">\n\t<p><%= _('Order Number: <b>$(0)<\/b>').translate(view.model.get('order_number')) %><\/p>\n\t<table class=\"table table-bordered order-details order-details-header\">\n\t\t<col class=\"order-details-col1\">\n\t\t<col class=\"order-details-col2\">\n\t\t<col class=\"order-details-col3\">\n\t\t<tr class=\"alternate\">\n\t\t\t<td>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Order Date').translate() %>\n\t\t\t\t<\/p>\n\t\t\t\t<b><%= view.model.get('date') %><\/b>\n\t\t\t<\/td>\n\t\t\t<td>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Order Total').translate() %>\n\t\t\t\t<\/p>\n\t\t\t\t<b><%= view.model.get('summary').total_formatted %><\/b>\n\t\t\t<\/td>\n\t\t\t<td>\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Order Status').translate() %>\n\t\t\t\t<\/p>\n\t\t\t\t<b><%= view.model.get('status') %><\/b>\n\t\t\t<\/td>\n\t\t<\/tr>\n\t<\/table>\n<\/div>\n\n<!-- Order Header Ends -->\n<% if (view.model.get('returnauthorizations') && view.model.get('returnauthorizations').models.length) { %>\n\t<div class=\"returnauthorizations-warning alert alert-warning\"><%=_('You have returns asociated with this order. <a href=\"#\">View Details<\/a>').translate()%><\/div>\n<% } %>\n\n<!-- Shipping Groups -->\n<% _.each(view.shipgroups, function (ship_group, index) { %>\n\t<!-- Fullfillment -->\n\t<table class=\"table table-bordered order-details order-details-body\">\n\t\t<col class=\"order-details-col1\">\n\t\t<col class=\"order-details-col2\">\n\t\t<col class=\"order-details-col3\">\n\t\t<tr class=\"alternate order-details-shipping-info\">\n\t\t\t<td>\n\t\t\t\t<p><b><%= _('Ship To').translate() %><\/b><\/p>\n\t\t\t\t<% var shipaddress = view.model.get('addresses').get(ship_group.shipaddress); %>\n\t\t\t\t<p><%= ( ( shipaddress && shipaddress.getFormattedAddress() ) || _('N\/A').translate()).replace(\/\\n\/g, '<br>') %><\/p>\n\t\t\t<\/td>\n\t\t\t<td colspan=\"2\">\n\t\t\t\t<p><b><%= _('Delivery Method').translate() %><\/b><\/p>\n\t\t\t\t<p>\n\t\t\t\t<% if (ship_group.tracking_numbers_summary.length) { %>\n\t\t\t\t\t<% _.each(ship_group.tracking_numbers_summary, function (tracking_number, index) { %>\n\t\t\t\t\t\t<%= _('$(0) - Shipment #$(1) $(2)').translate(tracking_number.method || 'N\/A', tracking_number.shipment_index, tracking_number.trackingnumber) %> <br>\n\t\t\t\t\t<% }) %>\n\t\t\t\t<% } else if (ship_group.shipaddress && ship_group.shipmethod && view.model.get('shipmethods').get(ship_group.shipmethod)) { %>\n\t\t\t\t\t<%= view.model.get('shipmethods').get(ship_group.shipmethod).getFormattedShipmethod() %>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%= _('No Delivery Method Selected').translate() %>\n\t\t\t\t<% } %>\n\t\t\t\t<\/p>\n\t\t\t<\/td>\n\t\t<\/tr>\n\t\t<% var shipment_index = 0; %>\n\t\t<% _.each(ship_group.fulfillments, function (fulfillment, index) { %>\n\t\t<% shipment_index++; %>\n\t\t\t<!-- Fullfillment Title -->\n\t\t\t<tr class=\"alternate order-details-items-summary\">\n\t\t\t\t<td colspan=\"3\">\n\t\t\t\t\t<b>\n\t\t\t\t\t\t<% if (fulfillment.get('is_pending')) { %>\n\t\t\t\t\t\t\t<%= _('Item Processing').translate() %>\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<span class=\"ship-index\">\n\t\t\t\t\t\t\t\t<%= _('Shipment #$(0)').translate(shipment_index) %>\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t<span>:<\/span> \n\t\t\t\t\t\t\t<span class=\"ship-date\">\n\t\t\t\t\t\t\t\t<%= _('Shipped on $(0)').translate(fulfillment.get('date')) %>\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t<% var trackingnumbers = fulfillment.get('trackingnumbers') || [] %>\n\t\t\t\t\t\t\t<% if (trackingnumbers.length) { %>\n\t\t\t\t\t\t\t\t<div class=\"pull-right\">\n\t\t\t\t\t\t\t\t\t<%= _('Tracking Numbers:').translate() %>\n\t\t\t\t\t\t\t\t\t<% _.each(trackingnumbers, function (number, index) { %>\n\t\t\t\t\t\t\t\t\t\t<%= index ? ', ' : '' %>\n\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\" href=\"<%= view.getTrackingServiceUrl(number) %>\"><%= number %><\/a>\n\t\t\t\t\t\t\t\t\t<% }) %>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t<\/b>\n\t\t\t\t<\/td>\n\t\t\t<\/tr>\n\t\t\t<!-- Fullfillment Lines -->\n\t\t\t<tr class=\"order-details-items-items\">\n\t\t\t\t<td colspan=\"3\">\n\t\t\t\t\t<table class=\"table order-lines\">\n\t\t\t\t\t\t<col class=\"order-items-col1\">\n\t\t\t\t\t\t<col class=\"order-items-col2\">\n\t\t\t\t\t\t<col class=\"order-items-col3\">\n\t\t\t\t\t\t<col class=\"order-items-col4\">\n\t\t\t\t\t\t<col class=\"order-items-col5\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colspan=\"2\"><%= _('Items').translate() %><\/th>\n\t\t\t\t\t\t\t\t<th><%= _('Qty').translate() %><\/th>\n\t\t\t\t\t\t\t\t<th><%= _('Price').translate() %><\/th>\n\t\t\t\t\t\t\t\t<th class=\"right-aligned\"><%= _('Total').translate() %><\/th>\n\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<\/thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<% \n\t\t\t\t\t\t\t\t_.each(fulfillment.get('lines'), function (fulfillment_line, index)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvar line = view.model.get('lines').get(fulfillment_line.line_id);\n\t\t\t\t\t\t\t\t\tvar item_details = line && {\n\t\t\t\t\t\t\t\t\t\t\titem: line.get('item')\n\t\t\t\t\t\t\t\t\t\t,\toptions: line.get('options')\n\t\t\t\t\t\t\t\t\t\t,\tquantity: fulfillment_line.quantity\n\t\t\t\t\t\t\t\t\t\t,\tprice: line.get('rate')\n\t\t\t\t\t\t\t\t\t\t,\tamount: fulfillment_line.rate || line.get('amount')\n\t\t\t\t\t\t\t\t\t\t,\ttotal: line.get('total')\n\t\t\t\t\t\t\t\t\t\t,\tdiscount: line.get('discount')\n\t\t\t\t\t\t\t\t\t\t,\treorder: line.get('item').get('_isPurchasable') \n\t\t\t\t\t\t\t\t\t\t,\tapplication: view.options.application\n\t\t\t\t\t\t\t\t\t\t,\ttype: line.get('type')\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t,\tshipgroup_subtotal = shipgroup_subtotal + (item_details ? item_details.amount : 0);\n\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t<%= item_details && itemDetails(item_details) %>\n\t\t\t\t\t\t\t<% }) %>\n\t\t\t\t\t\t<\/tbody>\n\t\t\t\t\t<\/table>\n\t\t\t\t<\/td>\n\t\t\t<\/tr>\n\t\t\t<!-- Fullfillment Lines Ends -->\n\t\t<% }) %>\n\t\t<!-- Fullfillment Ends -->\n\t<\/table>\n<% }) %>\n\n<!-- Payment Information -->\n<table class=\"table table-bordered order-details order-details-payment\">\n\t<col class=\"order-details-col1\">\n\t<col class=\"order-details-col2\">\n\t<col class=\"order-details-col3\">\n\t<!-- Payment Information Title -->\n\t<tr>\n\t\t<td colspan=\"3\">\n\t\t\t<h3><%= _('Payment Information').translate() %><\/h3>\n\t\t<\/td>\n\t<\/tr>\n\n\t<!-- Payment Information Title Ends -->\n\t<tr class=\"billing-info\">\n\t\t<td>\n\t\t\t<p><b><%= _('Billing To').translate() %><\/b><\/p>\n\t\t\t<% var billaddress = view.model.get('addresses').get(view.model.get('billaddress')); %>\n\t\t\t<p><%= ( ( billaddress && billaddress.getFormattedAddress() ) || _('N\/A').translate()).replace(\/\\n\/g, '<br>') %><\/p>\n\t\t<\/td>\n\t\t<td>\n\t\t\t<% var paymentmethod = view.model.get('paymentmethods') && view.model.get('paymentmethods').findWhere({primary: true}); %>\n\t\t\t<% var receipts = view.model.get('receipts'); %>\n\t\t\t\n\t\t\t<% if (paymentmethod && paymentmethod.get('type')) { %>\n\t\t\t\t<p><b><%= _('Payment Method').translate() %><\/b><\/p>\n\t\t\t\t<%= SC.macros.formatPaymentMethod(paymentmethod, view.application.getConfig('creditCardIcons')) %>\n\t\t\t<% } else if (!receipts || receipts && !receipts.length) { %>\n\t\t\t\t<p><b><%= _('Payment Method').translate() %><\/b><\/p>\n\t\t\t\t<%= _('N\/A').translate() %>\n\t\t\t<% } %>\n\n\t\t\t<% if (receipts && receipts.length) { %>\n\t\t\t\t<p><b><%= _('Payment Transactions').translate() %><\/b><\/p>\n\t\t\t\t<% _.each(receipts.models, function (receipt, index) { %>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<%= receipt.type === 'cashsale' ? receipt.get('paymentmethod').get('type') : _('Invoice: #$(0)').translate(receipt.get('order_number'))%> <br>\n\t\t\t\t\t\t<%= receipt.get('date') +' '+ receipt.get('summary').total_formatted  %> <a href=\"\/receiptshistory\/view\/<%= receipt.get('internalid') %>\">View<\/a>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% }) %>\n\t\t\t<% } %>\n\t\t<\/td>\n\n\t\t<td class=\"billing-info-order-sumary\">\n\t\t\t<p class=\"order-summary-header\"><b><%= _('Order Summary').translate() %><\/b><\/p>\n\t\t\t<table class=\"table table-condensed order-sumary\">\n\t\t\t\t<col class=\"order-sumary-names\">\n\t\t\t\t<col class=\"order-sumary-values\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Order Subtotal').translate() %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').subtotal_formatted  %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% \n\t\t\t\t\t\tvar discounttotal = parseFloat(view.model.get('summary').discounttotal);\n\t\t\t\t\t\tif (discounttotal || view.model.get('promocode')) { %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Order Discount').translate() %>\n\t\t\t\t\t\t\t\t<% if (view.model.get('promocode')) { %>\n\t\t\t\t\t\t\t\t\t<p><small><%= _('Promo Code').translate() + ': ' + view.model.get('promocode').code %><\/small><\/p>\n\t\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= discounttotal ? view.model.get('summary').discounttotal_formatted : '&nbsp;' %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<% if (parseFloat(view.model.get('summary').shippingcost)) { %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Shipping Total').translate() %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').shippingcost_formatted %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<% if (parseFloat(view.model.get('summary').handlingcost)) { %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Handling Total').translate() %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').handlingcost_formatted %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% } %>\n\n\t\t\t\t\t\t<% if (parseFloat(view.model.get('summary').giftcertapplied)) { %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Gift Cert Total').translate() %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').giftcertapplied_formatted %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"order-sumary-name\"><%= _('Tax Total').translate() %><\/td>\n\t\t\t\t\t\t\t<td class=\"order-sumary-value\"><%= view.model.get('summary').taxtotal_formatted %><\/td>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th class=\"order-sumary-name\"><%= _('Order Total').translate() %><\/th>\n\t\t\t\t\t\t\t<th class=\"order-sumary-value\"><%= view.model.get('summary').total_formatted %><\/th>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t<\/tbody>\t\t\t\t\t\t\t\t\t\t\n\t\t\t<\/table>\n\t\t<\/td>\n\t<\/tr>\n<\/table>\n<!-- Shipping Groups Ends -->\n\n<!-- Returns Authorizations -->\n<% var return_authorizations = view.model.get('returnauthorizations').models %>\n\n<% if (return_authorizations.length) { %>\n<table class=\"table table-bordered\" id=\"returnauthorizations-details\">\n\t<col class=\"order-details-col1\">\n\t<col class=\"order-details-col2\">\n\t<col class=\"order-details-col3\">\n\t<!-- Payment Information Title -->\n\t<thead id=\"returnauthorizations-details-header\">\n\t\t<tr>\n\t\t\t<td colspan=\"3\">\n\t\t\t\t<h3>\n\t\t\t\t\t<div class=\"caret\"><\/div>\n\t\t\t\t\t<%= _('Returns').translate() %>\n\t\t\t\t<\/h3>\n\t\t\t<\/td>\n\t\t<\/tr>\n\t<\/thead>\n\t<tbody id=\"returnauthorizations-details-body\">\n\t\t<% _.each(return_authorizations, function (returnauthorization, index) { %>\n\t\t<!-- Authorization Header -->\n\t\t<tr class=\"alternate returnauthorizations-summary\">\n\t\t\t<td<% if (!returnauthorization.get('order_number')){ %> colspan=\"3\"<% } %>>\n\t\t\t\t<p>\n\t\t\t\t\t<b><%= _('Status').translate() %><\/b>\n\t\t\t\t<\/p>\n\t\t\t\t<%= returnauthorization.get('status') %>\n\t\t\t<\/td>\n\n\t\t\t<% if (returnauthorization.get('order_number')) { %>\n\t\t\t\t<td>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<b><%= _('Authorization Number').translate() %><\/b>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t#<%= returnauthorization.get('order_number') %>\n\t\t\t\t<\/td>\n\t\t\t\t<td>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<b><%= _('Return To').translate() %><\/b>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<% if (returnauthorization.get('return_address')) { %>\n\t\t\t\t\t\t<%= returnauthorization.get('return_address') %>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<%= _('N\/A').translate() %>\n\t\t\t\t\t<% } %>\n\n\t\t\t\t<\/td>\n\t\t\t<% } %>\n\t\t<\/tr>\n\t\t<!-- Authorization Header Ends -->\n\t\t<!-- Authorization Lines -->\n\t\t<tr>\n\t\t\t<td colspan=\"3\">\n\t\t\t\t<table class=\"table order-lines\">\n\t\t\t\t\t<col class=\"order-items-col1\">\n\t\t\t\t\t<col class=\"order-items-col2\">\n\t\t\t\t\t<col class=\"order-items-col3\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th colspan=\"2\"><%= _('Item').translate() %><\/th>\n\t\t\t\t\t\t\t<th><%= _('Qty').translate() %><\/th>\n\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t<\/thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t<%\n\t\t\t\t\t\t_.each(returnauthorization.get('lines').models, function (line, index)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar item_details = {\n\t\t\t\t\t\t\t\t\titem: line.get('item')\n\t\t\t\t\t\t\t\t,\toptions: line.get('options')\n\t\t\t\t\t\t\t\t,\tquantity: Math.abs(line.get('quantity'))\n\t\t\t\t\t\t\t\t,\tprice: false\n\t\t\t\t\t\t\t\t,\tamount: false\n\t\t\t\t\t\t\t\t,\treorder: line.get('item').get('_isPurchasable') \n\t\t\t\t\t\t\t\t,\tapplication: view.options.application\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t%>\n\t\t\t\t\t\t<%= itemDetails(item_details) %>\n\t\t\t\t\t<% }) %>\n\t\t\t\t\t<\/tbody>\n\t\t\t\t<\/table>\n\t\t\t<\/td>\n\t\t<\/tr>\n\t\t<!-- Authorization Lines Ends -->\n\t\t<% }) %>\n\t<\/tbody>\n<\/table>\n<% } %>\n<!-- Returns Authorizations Ends -->\n"};