SC.templates = {"order_wizard_register_guest_module_tmpl":"<h3><%= _('Create an account (optional):').translate() %><\/h3>\n<form>\n\n\t<%= registerFormFields({view:view}) %>\n\t\n\t<p>\n\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t<%= _('Create Account').translate() %>\n\t\t<\/button>\n\t<\/p>\n<\/form>","macros":["<% registerMacro('message', function ( message, type, closable ) { %>\n\n<div class=\"alert <%= type ? 'alert-'+ type : '' %>\">\n\t<% if ( closable ) { %>\n\t\t<button class=\"close\" data-dismiss=\"alert\">&times;<\/button>\n\t<% } %>\n\t<% if ( _.isObject( message ) ) { %>\n\t\t<ul>\n\t\t<% _.each(message, function(item, index) { %>\n\t\t\t<li><%= item %><\/li>\n\t\t<% }) %>\n\t\t<ul>\n\t<% } else { %>\n\t\t<%= message %>\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('modal', function (page_header) { %>\n<div id=\"modal\" class=\"modal fade\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n\t\t\t\t\t&times;\n\t\t\t\t<\/button>\n\t\t\t\t<h3 class=\"modal-title\">\n\t\t\t\t\t<%= page_header || '&nbsp;' %>\n\t\t\t\t<\/h3>\n\t\t\t<\/div>\n\t\t\t<div id=\"modal-body\" class=\"modal-body\"><\/div>\n\t\t<\/div><!-- \/.modal-content -->\n\t<\/div><!-- \/.modal-dialog -->\n<\/div><!-- \/.modal -->\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('backToTop', function () { %>\n<div id=\"back-to-top\" class=\"text-center back-to-top\">\n\t<a href=\"#\" data-action=\"back-to-top\">\n\t\t<i class=\"icon-arrow-up\"><\/i>\n\t\t<%= _('Top').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('formatPaymentMethod', function (payment, creditCardIcons) {\n\t%><span class=\"payment-method-formatted payment-method-formatted-<%=payment.get('type')%>\"><%\n\tswitch (payment.get('type')){\n\t\tcase 'creditcard':\n\t\t\tvar creditcard = payment.get('creditcard');\n\t\t\tif(creditcard){\n\t\t\t\tvar ccpname = creditcard.paymentmethod ? creditcard.paymentmethod.name : ''; %> \n\t\t\t\t<span class=\"credit-card-icon\" style=\"font-size: 17px;\"> \n\t\t\t\t\t<% if(creditCardIcons && ccpname in creditCardIcons){ %>\n\t\t\t\t\t\t<img class=\"credit-card-icon\" src=\"<%= creditCardIcons[ccpname] %>\" alt=\"<%= ccpname %>\">\n\t\t\t\t\t<% }else{ %>\n\t\t\t\t\t\t<%= ccpname %>\t\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<span>&nbsp;-&nbsp;<\/span>\n\t\t\t\t\t<%= _('ending in $(0)').translate(creditcard.ccnumber.replace(\/\\*\/g, '')) %>\n\t\t\t\t<\/span>\n\t\t\t\t<br>\n\t\t\t\t<!--<span class=\"credit-card-expiredate\">\n\t\t\t\t\t<%= _('exp ').translate() + creditcard.ccexpiredate %>\n\t\t\t\t<\/span>-->\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'giftcertificate':\n\t\t\tvar code_length = payment.get('giftcertificate').code.length; %>\t\t\t\t\t\n\t\t\t<%= _('$(0)').translate(payment.get('giftcertificate').code.substring(code_length - 4, code_length)) %>\n\t\t\t<% break;\n\t\tcase 'invoice': %>\n\t\t\t<b class=\"payment-method-formatted-invoice-terms\">\n\t\t\t\t<%= _('Invoice: Terms $(0)').translate(payment.get('paymentterms').name) %>\n\t\t\t<\/b> \n\t\t\t<% if(payment.get('purchasenumber')) { %>\n\t\t\t\t<br\/> \n\t\t\t\t<span class=\"payment-method-formatted-invoice-purchasenumber\">\n\t\t\t\t\t<%= _('Purchase Number: $(0)').translate(payment.get('purchasenumber')) %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'paypal': %>\n\t\t\t<b>\n\t\t\t\t<%= _('Payment via Paypal').translate() %>\n\t\t\t<\/b>\n\t\t\t<%\n\t\t\tbreak;\n\t\tdefault: %>\n\t\t<%= payment.get('type') %><%\n\t}\n\t%><\/span><%\n}) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('pagination', function (configuration) { %>\n<%\n\t\/\/ Pagination Macro\n\t\/\/ ================\n\t\/\/ Displays a pagination component based on the configuration object.\n\t\/\/ The configuration object understands the following keys: \n\t\/\/ * currentPage: (Required) The page you are currently showing.\n\t\/\/ * totalPages: (Required) The total amount of pages you can show (This is not items, you need to do the math of items\/items_per_page outside this macro).\n\t\/\/ * pager: (Required) a function that recives a page number as parameter and returns the url that the mentioned page number should point to.\n\t\/\/ * showPageList: a boolean to show or hide the pages list portion of this component, defauts to true.\n\t\/\/ * pagesToShow: The amount of pages you want to be displayed in the pages list, defaults to 4.\n\t\/\/ * showPageIndicator: a boolean to show or hide a note on which page you have selected and how many pages are there, defaults to false\n\t\/\/ * extraClass: a string that will be added to the class attribute to the component\n\n\n\tvar current_page = parseInt(configuration.currentPage, 10)\n\t,\ttotal_pages = parseInt(configuration.totalPages, 10)\n\t,\tpager = configuration.pager\n\t,\tpages_to_show = parseInt(configuration.pagesToShow, 10) || 4\n\t,\trange_start = 1\n\t,\trange_end = total_pages\n\t,\tpadding_left = (pages_to_show % 2 === 0) ? (pages_to_show \/ 2) - 1 : parseInt(pages_to_show \/ 2, 10) \/\/ ;)\n\t,\tshow_page_list = (_.isBoolean(configuration.showPageList)) ? configuration.showPageList : true\n\t,\tshow_page_indicator = configuration.showPageIndicator || false; \n\n\t\n\tif (show_page_list && pages_to_show < total_pages)\n\t{\n\t\t\/\/ if we are getting closer to the end we need to compute from the end to the begingn \n\t\tif (pages_to_show - padding_left > total_pages - current_page)\n\t\t{\n\t\t\trange_start = total_pages + 1 - pages_to_show;\n\t\t\trange_end = total_pages + 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\trange_start = current_page - padding_left < 1 ? 1 : current_page - padding_left;\n\t\t\trange_end = range_start + pages_to_show > total_pages ? total_pages : range_start + pages_to_show;\n\t\t}\n\t}\n\telse if (show_page_list)\n\t{\n\t\trange_end = total_pages + 1;\n\t}\n\tvar pages = _.range(range_start, range_end);\n%>\n\n<% if (total_pages >= current_page && current_page > 0 && pages.length > 1) { %>\n<div class=\"pagination <%= configuration.extraClass || '' %>\">\n\n\t<% if (show_page_indicator) { %>\n\t\t<ul class=\"pagination-page-indicator\">\n\t\t\t<li>\n\t\t\t\t<span class=\"\">\n\t\t\t\t\t<%= _('$(0) of $(1)').translate(current_page, total_pages) %>\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t\n\t<% } %>\n\n\t<ul class=\"pagination-links <% if (!show_page_list) { %>pagination-links-compact<% } %>\">\n\t<% if (current_page !== 1) { %>\n\t\t<li>\n\t\t\t<a rel=\"prev\" href=\"<%- _(pager(current_page-1)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t\n\t<% if (show_page_list) { %>\n\t\t<% if (range_start > 1) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\n\t\t<% _.each(pages, function (page) { %>\n\t\t\t<% if (current_page !== page) { %>\n\t\t\t\t<li><a href=\"<%- pager(page) %>\"><%= page %><\/a><\/li>\n\t\t\t<% } else { %>\n\t\t\t\t<li class=\"active\"><a href=\"<%- _(pager(page)).fixUrl() %>\"><%= page %><\/a><\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\n\t\t<% if (range_end < total_pages) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (current_page !== total_pages){ %>\n\t\t<li>\n\t\t\t<a rel=\"next\" href=\"<%- _(pager(current_page+1)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t<\/ul>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('breadcrumb', function(pages) { %>\n<% pages = _.isUndefined(pages) || _.isArray(pages) ? pages : [pages]; %>\n<div id=\"banner-breadcrumb-top\" class=\"content-banner banner-breadcrumb-top\"><\/div>\n<ul itemprop=\"breadcrumb\" class=\"breadcrumb\">\n<% _.each(pages, function(link, index) { %>\n\t<% if (link) { %>\n\t\t<% if (index < pages.length - 1) { %>\n\t\t\t<li>\n\t\t\t\t<a <%= _.objectToAtrributes(link) %>><%= link.text %><\/a>\n\t\t\t\t<span class=\"divider\">\/<\/span>\n\t\t\t<\/li>\n\t\t<% } else { %>\n\t\t\t<li class=\"active\"><%= link.text %><\/li>\n\t\t<% } %>\n\t<% } %>\n<% }) %>\n<\/ul>\n<div id=\"banner-breadcrumb-bottom\" class=\"content-banner banner-breadcrumb-bottom\"><\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('currencySelector', function (currencies, selected_code) { %>\n<% if (currencies && currencies.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\"><%= SC.ENVIRONMENT.siteSettings.shopperCurrency.symbol %><\/span>\n\t<select data-toggle=\"currency-selector\" class=\"input-medium\">\n\t<% _.each(currencies, function (currency) { %>\n\t\t<option value=\"<%- currency.code %>\" <%= selected_code === currency.code ? 'selected' : '' %>>\n\t\t\t<%= currency.title || currency.name %>\n\t\t<\/option>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('showItemPrice', function (item) {%>\n<% var price = item.getPrice(); %>\n<% if (price.min && price.max) { %>\n\t<!-- Price Range -->\n\t<strong class=\"lead-price\">\n\t\t<%= _('$(0) to $(1)').translate(_.formatCurrency(price.min.price), _.formatCurrency(price.max.price)) %>\n\t<\/strong>\n\t<meta itemprop=\"lowPrice\" content=\"<%- _.formatCurrency(price.min.price)%>\" \/>\n\t<meta itemprop=\"highPrice\" content=\"<%- _.formatCurrency(price.max.price)%>\" \/>   \n\t<meta itemprop=\"priceCurrency\" content=\"<%- SC.ENVIRONMENT.currentCurrency.code %>\" \/>     \n\t<% if (price.max.price < price.compare_price) { %>\n\t\t<small class=\"muted crossed\"><%= _.formatCurrency(price.compare_price) %><\/small>\n\t<% } %>\n<% } else { %>\n\t<!-- Single -->\n\t<!--<strong class=\"lead-price\" style=\"color: #616161;\">-->\n\t\t<%= _.formatCurrency(price.price) %>\n\t<!--<\/strong>-->\n\t<meta itemprop=\"price\" content=\"<%- _.formatCurrency(price.price)%>\" \/> \n\t<meta itemprop=\"priceCurrency\" content=\"<%- SC.ENVIRONMENT.currentCurrency.code %>\" \/> \n\t<% if (price.price < price.compare_price) { %>\n\t\t\n\t<% } %>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('countriesDropdown', function (countries, selected_country, manage) { %>\n<select class=\"input-xlarge\" id=\"<%= manage ? manage : ''%>country\" name=\"country\" data-type=\"country\">\n\t<option value=\"\">\n\t\t<%= _('-- Select --').translate() %>\n\t<\/option>\n\t<% _.each(_.values(countries), function (country, index) { %>\n\t\t<option value=\"<%- country.code %>\" <%= country.code === selected_country ? 'selected' : '' %>>\n\t\t\t<%= country.name %>\n\t\t<\/option>\n\t<% }) %>\n<\/select>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('displayInRows', function(items, macro, items_per_row) { %>\n\t<% items_per_row = parseInt(items_per_row, 10) || 3 %>\n\t<% var span = 12 \/ items_per_row %>\n\t<div class=\"row-fluid\">\n\t<% _.each(items, function (item, index){ %>\n\t\t<% if ((index % items_per_row) == 0 && index > 0){ %>\n\t\t\t<\/div>\n\t\t\t<div class=\"row-fluid\">\n\t\t<% } %>\n\t\t<div class=\"span<%= span %>\">\n\t\t\t<% if (_.isFunction(macro)){ %>\n\t\t\t\t<%= macro(item) %>\n\t\t\t<% }else{ %>\n\t\t\t\t<%= item %>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<% }) %>\n\t<\/div>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('languageSelector', function (languages, selected_locale) { %>\n<% if (languages && languages.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"lenguage-selector\" class=\"input-medium\">\n\t<% _.each(languages, function(language) { %>\n\t\t<option value=\"<%- language.locale %>\" <%= language.locale === selected_locale ? 'selected' : '' %>>\n\t\t\t<%= language.title || language.name %>\n\t\t<\/option>\n\t<%})%>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('hostSelector', function (hosts, current_host) { %>\n<% if (hosts && hosts.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"host-selector\" class=\"input-medium\">\n\t<% _.each(hosts, function(host) { %>\n\t\t<% if (host.languages && host.languages.length) { %>\n\t\t\t<optgroup label=\"<%- host.title %>\">\n\t\t\t<% _.each(host.languages, function(language) { %>\n\t\t\t\t<option value=\"<%- language.host %>\" <%= language.host === current_host ? 'selected' : '' %>>\n\t\t\t\t\t<%= language.title || language.name %>\n\t\t\t\t<\/option>\n\t\t\t<%})%>\n\t\t\t<\/optgroup>\n\t\t<% } %>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('relatedItem', function (item, application) { %>\n<div class=\"item-cell item-cell-grid\">\n\t<a class=\"thumbnail\" href=\"<%= item.get('_url') %>\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img src=\"<%= application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t<\/a>\n\t<h5>\n\t\t<a href=\"<%= item.get('_url') %>\">\n\t\t\t<%= item.get('_name') %>\n\t\t<\/a>\n\t<\/h5>\n\t<a class=\"btn btn-small btn-primary\" href=\"<%= item.get('_url') %>\">\n\t\t<%= _('See more').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('statesDropdown', function (options) { %>\n<%\n\tvar country = options.selectedCountry && options.countries[options.selectedCountry]\n\t,\tstates = country && country.states;\n%>\n<% if (country && states) { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State').translate() %>\n\t\t<small><%= _('(required)').translate() %><\/small>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<select class=\"input-small\"  style=\"height:30px;\" id=\"<%= options.manage ? options.manage : ''%>state\" name=\"state\" data-type=\"state\">\n\t\t\t<option value=\"\">\n\t\t\t\t<%= _(' ').translate() %>\n\t\t\t<\/option>\n\t\t\t<% _.each(states, function (state) { %>\n\t\t\t<option value=\"<%- state.code %>\" <%= state.code === options.selectedState ? 'selected' : '' %>>\n\t\t\t\t<%= state.code %>\n\t\t\t<\/option>\n\t\t\t<% }) %>\n\t\t<\/select>\n\t<\/div>\n<% } else { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State\/Province\/Region').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tid=\"<%= options.manage ? options.manage : ''%>state\"\n\t\t\tname=\"state\"\n\t\t\tclass=\"input-small\"\n\t\t\tvalue=\"<%- options.selectedState %>\"\n\t\t\tdata-type=\"state\"\n\t\t\tplaceholder=\"<%- _('(optional)').translate() %>\"\n\t\t>\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('message', function ( message, type, closable ) { %>\n\n<div class=\"alert <%= type ? 'alert-'+ type : '' %>\">\n\t<% if ( closable ) { %>\n\t\t<button class=\"close\" data-dismiss=\"alert\">&times;<\/button>\n\t<% } %>\n\t<% if ( _.isObject( message ) ) { %>\n\t\t<ul>\n\t\t<% _.each(message, function(item, index) { %>\n\t\t\t<li><%= item %><\/li>\n\t\t<% }) %>\n\t\t<ul>\n\t<% } else { %>\n\t\t<%= message %>\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('modal', function (page_header) { %>\n<div id=\"modal\" class=\"modal fade\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n\t\t\t\t\t&times;\n\t\t\t\t<\/button>\n\t\t\t\t<h3 class=\"modal-title\">\n\t\t\t\t\t<%= page_header || '&nbsp;' %>\n\t\t\t\t<\/h3>\n\t\t\t<\/div>\n\t\t\t<div id=\"modal-body\" class=\"modal-body\"><\/div>\n\t\t<\/div><!-- \/.modal-content -->\n\t<\/div><!-- \/.modal-dialog -->\n<\/div><!-- \/.modal -->\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('backToTop', function () { %>\n<div id=\"back-to-top\" class=\"text-center back-to-top\">\n\t<a href=\"#\" data-action=\"back-to-top\">\n\t\t<i class=\"icon-arrow-up\"><\/i>\n\t\t<%= _('Top').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('formatPaymentMethod', function (payment, creditCardIcons) {\n\t%><span class=\"payment-method-formatted payment-method-formatted-<%=payment.get('type')%>\"><%\n\tswitch (payment.get('type')){\n\t\tcase 'creditcard':\n\t\t\tvar creditcard = payment.get('creditcard');\n\t\t\tif(creditcard){\n\t\t\t\tvar ccpname = creditcard.paymentmethod ? creditcard.paymentmethod.name : ''; %> \n\t\t\t\t<span class=\"credit-card-icon\" style=\"font-size: 17px;\"> \n\t\t\t\t\t<% if(creditCardIcons && ccpname in creditCardIcons){ %>\n\t\t\t\t\t\t<img class=\"credit-card-icon\" src=\"<%= creditCardIcons[ccpname] %>\" alt=\"<%= ccpname %>\">\n\t\t\t\t\t<% }else{ %>\n\t\t\t\t\t\t<%= ccpname %>\t\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<span>&nbsp;-&nbsp;<\/span>\n\t\t\t\t\t<%= _('ending in $(0)').translate(creditcard.ccnumber.replace(\/\\*\/g, '')) %>\n\t\t\t\t<\/span>\n\t\t\t\t<br>\n\t\t\t\t<!--<span class=\"credit-card-expiredate\">\n\t\t\t\t\t<%= _('exp ').translate() + creditcard.ccexpiredate %>\n\t\t\t\t<\/span>-->\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'giftcertificate':\n\t\t\tvar code_length = payment.get('giftcertificate').code.length; %>\t\t\t\t\t\n\t\t\t<%= _('$(0)').translate(payment.get('giftcertificate').code.substring(code_length - 4, code_length)) %>\n\t\t\t<% break;\n\t\tcase 'invoice': %>\n\t\t\t<b class=\"payment-method-formatted-invoice-terms\">\n\t\t\t\t<%= _('Invoice: Terms $(0)').translate(payment.get('paymentterms').name) %>\n\t\t\t<\/b> \n\t\t\t<% if(payment.get('purchasenumber')) { %>\n\t\t\t\t<br\/> \n\t\t\t\t<span class=\"payment-method-formatted-invoice-purchasenumber\">\n\t\t\t\t\t<%= _('Purchase Number: $(0)').translate(payment.get('purchasenumber')) %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'paypal': %>\n\t\t\t<b>\n\t\t\t\t<%= _('Payment via Paypal').translate() %>\n\t\t\t<\/b>\n\t\t\t<%\n\t\t\tbreak;\n\t\tdefault: %>\n\t\t<%= payment.get('type') %><%\n\t}\n\t%><\/span><%\n}) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('breadcrumb', function(pages) { %>\n<% pages = _.isUndefined(pages) || _.isArray(pages) ? pages : [pages]; %>\n<div id=\"banner-breadcrumb-top\" class=\"content-banner banner-breadcrumb-top\"><\/div>\n<ul itemprop=\"breadcrumb\" class=\"breadcrumb\">\n<% _.each(pages, function(link, index) { %>\n\t<% if (link) { %>\n\t\t<% if (index < pages.length - 1) { %>\n\t\t\t<li>\n\t\t\t\t<a <%= _.objectToAtrributes(link) %>><%= link.text %><\/a>\n\t\t\t\t<span class=\"divider\">\/<\/span>\n\t\t\t<\/li>\n\t\t<% } else { %>\n\t\t\t<li class=\"active\"><%= link.text %><\/li>\n\t\t<% } %>\n\t<% } %>\n<% }) %>\n<\/ul>\n<div id=\"banner-breadcrumb-bottom\" class=\"content-banner banner-breadcrumb-bottom\"><\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('pagination', function (configuration) { %>\n<%\n\t\/\/ Pagination Macro\n\t\/\/ ================\n\t\/\/ Displays a pagination component based on the configuration object.\n\t\/\/ The configuration object understands the following keys: \n\t\/\/ * currentPage: (Required) The page you are currently showing.\n\t\/\/ * totalPages: (Required) The total amount of pages you can show (This is not items, you need to do the math of items\/items_per_page outside this macro).\n\t\/\/ * pager: (Required) a function that recives a page number as parameter and returns the url that the mentioned page number should point to.\n\t\/\/ * showPageList: a boolean to show or hide the pages list portion of this component, defauts to true.\n\t\/\/ * pagesToShow: The amount of pages you want to be displayed in the pages list, defaults to 4.\n\t\/\/ * showPageIndicator: a boolean to show or hide a note on which page you have selected and how many pages are there, defaults to false\n\t\/\/ * extraClass: a string that will be added to the class attribute to the component\n\n\n\tvar current_page = parseInt(configuration.currentPage, 10)\n\t,\ttotal_pages = parseInt(configuration.totalPages, 10)\n\t,\tpager = configuration.pager\n\t,\tpages_to_show = parseInt(configuration.pagesToShow, 10) || 4\n\t,\trange_start = 1\n\t,\trange_end = total_pages\n\t,\tpadding_left = (pages_to_show % 2 === 0) ? (pages_to_show \/ 2) - 1 : parseInt(pages_to_show \/ 2, 10) \/\/ ;)\n\t,\tshow_page_list = (_.isBoolean(configuration.showPageList)) ? configuration.showPageList : true\n\t,\tshow_page_indicator = configuration.showPageIndicator || false; \n\n\t\n\tif (show_page_list && pages_to_show < total_pages)\n\t{\n\t\t\/\/ if we are getting closer to the end we need to compute from the end to the begingn \n\t\tif (pages_to_show - padding_left > total_pages - current_page)\n\t\t{\n\t\t\trange_start = total_pages + 1 - pages_to_show;\n\t\t\trange_end = total_pages + 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\trange_start = current_page - padding_left < 1 ? 1 : current_page - padding_left;\n\t\t\trange_end = range_start + pages_to_show > total_pages ? total_pages : range_start + pages_to_show;\n\t\t}\n\t}\n\telse if (show_page_list)\n\t{\n\t\trange_end = total_pages + 1;\n\t}\n\tvar pages = _.range(range_start, range_end);\n%>\n\n<% if (total_pages >= current_page && current_page > 0 && pages.length > 1) { %>\n<div class=\"pagination <%= configuration.extraClass || '' %>\">\n\n\t<% if (show_page_indicator) { %>\n\t\t<ul class=\"pagination-page-indicator\">\n\t\t\t<li>\n\t\t\t\t<span class=\"\">\n\t\t\t\t\t<%= _('$(0) of $(1)').translate(current_page, total_pages) %>\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t\n\t<% } %>\n\n\t<ul class=\"pagination-links <% if (!show_page_list) { %>pagination-links-compact<% } %>\">\n\t<% if (current_page !== 1) { %>\n\t\t<li>\n\t\t\t<a rel=\"prev\" href=\"<%- _(pager(current_page-1)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t\n\t<% if (show_page_list) { %>\n\t\t<% if (range_start > 1) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\n\t\t<% _.each(pages, function (page) { %>\n\t\t\t<% if (current_page !== page) { %>\n\t\t\t\t<li><a href=\"<%- pager(page) %>\"><%= page %><\/a><\/li>\n\t\t\t<% } else { %>\n\t\t\t\t<li class=\"active\"><a href=\"<%- _(pager(page)).fixUrl() %>\"><%= page %><\/a><\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\n\t\t<% if (range_end < total_pages) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (current_page !== total_pages){ %>\n\t\t<li>\n\t\t\t<a rel=\"next\" href=\"<%- _(pager(current_page+1)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t<\/ul>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('currencySelector', function (currencies, selected_code) { %>\n<% if (currencies && currencies.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\"><%= SC.ENVIRONMENT.siteSettings.shopperCurrency.symbol %><\/span>\n\t<select data-toggle=\"currency-selector\" class=\"input-medium\">\n\t<% _.each(currencies, function (currency) { %>\n\t\t<option value=\"<%- currency.code %>\" <%= selected_code === currency.code ? 'selected' : '' %>>\n\t\t\t<%= currency.title || currency.name %>\n\t\t<\/option>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('showItemPrice', function (item) {%>\n<% var price = item.getPrice(); %>\n<% if (price.min && price.max) { %>\n\t<!-- Price Range -->\n\t<strong class=\"lead-price\">\n\t\t<%= _('$(0) to $(1)').translate(_.formatCurrency(price.min.price), _.formatCurrency(price.max.price)) %>\n\t<\/strong>\n\t<meta itemprop=\"lowPrice\" content=\"<%- _.formatCurrency(price.min.price)%>\" \/>\n\t<meta itemprop=\"highPrice\" content=\"<%- _.formatCurrency(price.max.price)%>\" \/>   \n\t<meta itemprop=\"priceCurrency\" content=\"<%- SC.ENVIRONMENT.currentCurrency.code %>\" \/>     \n\t<% if (price.max.price < price.compare_price) { %>\n\t\t<small class=\"muted crossed\"><%= _.formatCurrency(price.compare_price) %><\/small>\n\t<% } %>\n<% } else { %>\n\t<!-- Single -->\n\t<!--<strong class=\"lead-price\" style=\"color: #616161;\">-->\n\t\t<%= _.formatCurrency(price.price) %>\n\t<!--<\/strong>-->\n\t<meta itemprop=\"price\" content=\"<%- _.formatCurrency(price.price)%>\" \/> \n\t<meta itemprop=\"priceCurrency\" content=\"<%- SC.ENVIRONMENT.currentCurrency.code %>\" \/> \n\t<% if (price.price < price.compare_price) { %>\n\t\t\n\t<% } %>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('countriesDropdown', function (countries, selected_country, manage) { %>\n<select class=\"input-xlarge\" id=\"<%= manage ? manage : ''%>country\" name=\"country\" data-type=\"country\">\n\t<option value=\"\">\n\t\t<%= _('-- Select --').translate() %>\n\t<\/option>\n\t<% _.each(_.values(countries), function (country, index) { %>\n\t\t<option value=\"<%- country.code %>\" <%= country.code === selected_country ? 'selected' : '' %>>\n\t\t\t<%= country.name %>\n\t\t<\/option>\n\t<% }) %>\n<\/select>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('displayInRows', function(items, macro, items_per_row) { %>\n\t<% items_per_row = parseInt(items_per_row, 10) || 3 %>\n\t<% var span = 12 \/ items_per_row %>\n\t<div class=\"row-fluid\">\n\t<% _.each(items, function (item, index){ %>\n\t\t<% if ((index % items_per_row) == 0 && index > 0){ %>\n\t\t\t<\/div>\n\t\t\t<div class=\"row-fluid\">\n\t\t<% } %>\n\t\t<div class=\"span<%= span %>\">\n\t\t\t<% if (_.isFunction(macro)){ %>\n\t\t\t\t<%= macro(item) %>\n\t\t\t<% }else{ %>\n\t\t\t\t<%= item %>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<% }) %>\n\t<\/div>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('languageSelector', function (languages, selected_locale) { %>\n<% if (languages && languages.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"lenguage-selector\" class=\"input-medium\">\n\t<% _.each(languages, function(language) { %>\n\t\t<option value=\"<%- language.locale %>\" <%= language.locale === selected_locale ? 'selected' : '' %>>\n\t\t\t<%= language.title || language.name %>\n\t\t<\/option>\n\t<%})%>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('hostSelector', function (hosts, current_host) { %>\n<% if (hosts && hosts.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"host-selector\" class=\"input-medium\">\n\t<% _.each(hosts, function(host) { %>\n\t\t<% if (host.languages && host.languages.length) { %>\n\t\t\t<optgroup label=\"<%- host.title %>\">\n\t\t\t<% _.each(host.languages, function(language) { %>\n\t\t\t\t<option value=\"<%- language.host %>\" <%= language.host === current_host ? 'selected' : '' %>>\n\t\t\t\t\t<%= language.title || language.name %>\n\t\t\t\t<\/option>\n\t\t\t<%})%>\n\t\t\t<\/optgroup>\n\t\t<% } %>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('relatedItem', function (item, application) { %>\n<div class=\"item-cell item-cell-grid\">\n\t<a class=\"thumbnail\" href=\"<%= item.get('_url') %>\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img src=\"<%= application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t<\/a>\n\t<h5>\n\t\t<a href=\"<%= item.get('_url') %>\">\n\t\t\t<%= item.get('_name') %>\n\t\t<\/a>\n\t<\/h5>\n\t<a class=\"btn btn-small btn-primary\" href=\"<%= item.get('_url') %>\">\n\t\t<%= _('See more').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('statesDropdown', function (options) { %>\n<%\n\tvar country = options.selectedCountry && options.countries[options.selectedCountry]\n\t,\tstates = country && country.states;\n%>\n<% if (country && states) { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State').translate() %>\n\t\t<small><%= _('(required)').translate() %><\/small>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<select class=\"input-small\"  style=\"height:30px;\" id=\"<%= options.manage ? options.manage : ''%>state\" name=\"state\" data-type=\"state\">\n\t\t\t<option value=\"\">\n\t\t\t\t<%= _(' ').translate() %>\n\t\t\t<\/option>\n\t\t\t<% _.each(states, function (state) { %>\n\t\t\t<option value=\"<%- state.code %>\" <%= state.code === options.selectedState ? 'selected' : '' %>>\n\t\t\t\t<%= state.code %>\n\t\t\t<\/option>\n\t\t\t<% }) %>\n\t\t<\/select>\n\t<\/div>\n<% } else { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State\/Province\/Region').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tid=\"<%= options.manage ? options.manage : ''%>state\"\n\t\t\tname=\"state\"\n\t\t\tclass=\"input-small\"\n\t\t\tvalue=\"<%- options.selectedState %>\"\n\t\t\tdata-type=\"state\"\n\t\t\tplaceholder=\"<%- _('(optional)').translate() %>\"\n\t\t>\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerProfile', function (Profile) { %>\n<% if (Profile.get('isLoggedIn') === 'T' &&  Profile.get('isGuest') === 'F') { %>\n\t<li class=\"welcome\"><a><%= _('Welcome $(0)').translate(Profile.get('firstname') || Profile.get('companyname'))  %><\/a><\/li>\n\t<li id=\"my-account-container\" class=\"dropdown my-account-container\">\n\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n\t\t\t<span class=\"my-account-title\"><%= _('Your Account').translate() %><\/span>\n\t\t\t<b class=\"caret\"><\/b>\n\t\t<\/a>\n\t\t<ul class=\"dropdown-menu\">\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#\">\n\t\t\t\t\t<%= _('Overview').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#profileinformation\">\n\t\t\t\t\t<%= _('Profile Information').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#addressbook\">\n\t\t\t\t\t<%= _('Address Book').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#creditcards\">\n\t\t\t\t\t<%= _('Credit Cards').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#ordershistory\">\n\t\t\t\t\t<%= _('Order History & Returns').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#emailpreferences\">\n\t\t\t\t\t<%= _('Email Preferences').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#reorderItems\">\n\t\t\t\t\t<%= _('Reorder Items').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#updateyourpassword\">\n\t\t\t\t\t<%= _('Update Your Password').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"divider\"><\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"logout\">\n\t\t\t\t\t<%= _('Sign Out').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<\/ul>\n\t<\/li>\t\n<% } else { %>\n\t<li><a href=\"#\" data-touchpoint=\"login\"><%= _('Login').translate() %><\/a><\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li><a href=\"#\" data-touchpoint=\"register\"><%= _('Register').translate() %><\/a><\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('siteSearch', function (name, view) { %>\n<% var maxLength = view.application.getConfig('searchPrefs.maxLength') || 0; %>\n<form class=\"form-search site-search\" method=\"GET\" action=\"\/search\">\n\t<div class=\"input-append\">\n\t\t<input class=\"input-medium search-query\" placeholder=\"<%- _('Search').translate() %>\" type=\"search\" name=\"<%- name %>\" autocomplete=\"off\"\n\t\t\t<%= maxLength > 0 ? 'maxlength=\"'+maxLength+'\"' : '' %>\t>\n\t\t<button type=\"submit\" class=\"btn\">\n\t\t\t<i class=\"icon-search\"><\/i>\n\t\t<\/button>\n\t<\/div>\n<\/form>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('simplifiedHeader', function (view) { %>\n<!-- Bar just for style -->\n<nav class=\"navbar navbar-inverse navbar-static-top site-header-top-nav\">\n\t<div class=\"navbar-inner\">\n\t\t<div class=\"container\"><\/div>\n\t<\/div>\n<\/nav>\n<!-- \/Bar just for style -->\n<div class=\"container\">\n\t<div class=\"row-fluid site-branding\">\n\t\t<div class=\"span3 site-logo\">\n\t\t\t<%= SC.macros.siteLogo(view.application, true) %>\n\t\t<\/div>\n\t\t<div class=\"span6 header-banner\">\n\t\t\t<div id=\"banner-header-top\" class=\"content-banner banner-header-top\"><\/div>\n\t\t\t&nbsp;\n\t\t<\/div>\n\t\t<div class=\"span3 back-to-shopping\">\n\t\t\t<a class=\"btn btn-link pull-right\" href=\"\/\" data-touchpoint=\"home\" data-hashtag=\"#\/\">\n\t\t\t\t<%= _('continue shopping >').translate() %>\n\t\t\t<\/a>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('typeahead', function (item, query, application) { %>\n<div class=\"typeahead-item clearfix\">\n\t<div class=\"typeahead-item-head\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img class=\"typeahead-image\" src=\"<%- application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t<div class=\"typeahead-title\"><%= _.highlightKeyword(item.get('_name'), query) %><\/div>\n\t<\/div>\n<\/div>\n<%})%> \n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('miniCart', function (cart, application) { %>\n<%\n\tvar lines = cart.get('lines')\n\t,\thas_cart_router = application.modulesMountToAppResult.Cart instanceof application.modules.Cart.Router\n\t,\tcurrent_touchpoint = application.Configuration.currentTouchpoint\n\t,\ttotal_items = _.reduce(lines.pluck('quantity'), function (memo, quantity) {\n\t\t\treturn memo + (parseFloat(quantity) || 1);\n\t\t}, 0);\n%>\n<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n\t<%= SC.macros.miniCartSummary(total_items) %>\n\t<b class=\"caret\"><\/b>\n<\/a>\n<div class=\"dropdown-menu\">\n<% if (lines.length) { %>\n\t<ul class=\"cart-summary-items mini-cart-items\">\n\t\t<% var thumbnail = '', item = null; %>\n\t\t<% lines.each(function (line) { %>\n\t\t\t<%\n\t\t\t\titem = line.get('item');\n\t\t\t\tthumbnail = item.get('_thumbnail');\n\t\t\t%>\n\t\t\t<li class=\"cart-summary-item-cell mini-cart-item-cell\">\n\t\t\t\t<a href=\"#\" class=\"row-fluid\" data-touchpoint=\"home\" data-hashtag=\"#<%= _(item.get('_url')).fixUrl() %>\">\n\t\t\t\t\t<div class=\"span3 thumbnail mini-cart-item-thumbnail\">\n\t\t\t\t\t\t<img src=\"<%- application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"span9 mini-cart-item-details\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<strong><%= item.get('_name') %><\/strong>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<!-- Renders the selected options for the item -->\n\t\t\t\t\t\t<%= item.renderAllOptionSelected() %>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<%= _('Quantity: $(0)').translate( line.get('quantity') ) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<%= _('Price: $(0)').translate( line.get('total_formatted') ) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t<% }) %>\n\t<\/ul>\n\t<ul class=\"summary\">\n\t\t<li class=\"mini-cart-summary-container\">\n\t\t\t<p class=\"mini-cart-summary\">\n\t\t\t\t<span class=\"pull-right mini-cart-subtotal\">\n\t\t\t\t\t<%= _('Subtotal: <b>$(0)<\/b>').translate( cart.get('summary').subtotal_formatted ) %>\n\t\t\t\t<\/span>\n\t\t\t\t<span class=\"item-count\">\n\t\t\t\t<% if ( total_items !== 1 ) { %>\n\t\t\t\t\t<%= _('$(0) items').translate( total_items ) %>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%= _('1 item').translate() %>\n\t\t\t\t<% } %>\n\t\t\t\t<\/span>\n\t\t\t<\/p>\n\t\t\t<div class=\"mini-cart-actions\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\" class=\"btn btn-view-cart\">\n\t\t\t\t\t<%= _('View Cart').translate() %>\n\t\t\t\t<\/a>\n\t\t\t\t<a href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\" class=\"btn btn-primary btn-checkout\">\n\t\t\t\t\t<%= _('Checkout').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/div>\n\t\t\t<div id=\"mini-cart-bottom-banner\" class=\"mini-cart-bottom-banner\"><\/div>\n\t\t<\/li>\n\t<\/ul>\n<% } else { %>\n\t<ul class=\"items mini-cart-empty\">\n\t\t<li>\n\t\t\t<a href=\"#\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\">\n\t\t\t\t<%= _('Your cart is empty').translate() %>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<\/ul>\n<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerTopNav', function (view) { %>\n<%\n\tvar application = view.application\n\t,\tenvironment = SC.ENVIRONMENT\n\t,\tmacros = SC.macros\n\n\t,\thosts = environment.availableHosts\n\t,\thas_multiple_hosts = hosts.length > 1\n\n\t,\tlanguages = environment.availableLanguages\n\t,\thas_multiple_languages = languages.length > 1\n\n\t,\thas_hosts_or_languages = has_multiple_hosts || has_multiple_languages\n\n\t,\tcurrencies = environment.availableCurrencies\n\t,\thas_multiple_currencies = currencies.length > 1;\n%>\n<nav class=\"navbar navbar-inverse navbar-static-top site-header-top-nav\">\n\t<div class=\"navbar-inner\">\n\t\t<div class=\"container\">\n\t\t\t<% if (has_hosts_or_languages || has_multiple_currencies) { %>\n\t\t\t\t<ul class=\"nav customer-site-settings\">\n\t\t\t\t<% if (has_hosts_or_languages) { %>\n\t\t\t\t\t<li id=\"language-selector-container\" class=\"language-selector-container\">\n\t\t\t\t\t\t<form action=\"\" class=\"navbar-form\">\n\t\t\t\t\t\t\t<% if (has_multiple_hosts) { %>\n\t\t\t\t\t\t\t\t<%= macros.hostSelector(hosts, environment.currentHostString) %>\n\t\t\t\t\t\t\t<% } else if (has_multiple_languages) { %>\n\t\t\t\t\t\t\t\t<%= macros.languageSelector(languages, environment.currentLanguage.locale) %>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (has_hosts_or_languages && has_multiple_currencies) { %>\n\t\t\t\t\t<li class=\"divider-vertical\"><\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (has_multiple_currencies) { %>\n\t\t\t\t\t<li id=\"currency-selector-container\" class=\"currency-selector-container\">\n\t\t\t\t\t\t<form action=\"\" class=\"navbar-form\">\n\t\t\t\t\t\t\t<%= macros.currencySelector(currencies, environment.currentCurrency.code) %>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<\/ul>\n\t\t\t<% } %>\n\t\t\t<!-- TODO: should the following be inside a macro? -->\n\t\t\t<ul class=\"nav pull-right\">\n\t\t\t\t<%= macros[application.getConfig('profileMacro')](application.getUser()) %>\n\t\t\t\t<li id=\"mini-cart-container\" class=\"dropdown mini-cart-container\">\n\t\t\t\t\t<%= macros.miniCart(application.getCart(), application) %>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t<\/div>\n<\/nav>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('header', function (view) { %>\n<%\n\tvar application = view.application\n\t,\tcart = application.getCart()\n\t,\tmacros = SC.macros\n\t,\tprofile = macros[application.getConfig('profileMacro')](application.getUser())\n\t,\thas_cart_router = application.modulesMountToAppResult.Cart instanceof application.modules.Cart.Router\n\t,\tcurrent_touchpoint = application.Configuration.currentTouchpoint;\n%>\n<header id=\"site-header\" class=\"site-header\">\n\t<%= macros.headerTopNav(view) %>\n\t<div class=\"container\">\n\t\t<div data-type=\"message-placeholder\"><\/div>\n\t\t<div class=\"row-fluid site-branding\">\n\t\t\t<div class=\"span3\">\n\t\t\t\t<%= macros.siteLogo(application) %>\n\t\t\t\t<!-- MOBILE -->\n\t\t\t\t<div class=\"navbar navbar-inverse mobile-nav\">\n\t\t\t\t\t<div class=\"navbar-inner\">\n\t\t\t\t\t\t<div class=\"container\">\n\t\t\t\t\t\t\t<ul class=\"nav pull-right\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"#\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\" class=\"mini-cart-summary\">\n\t\t\t\t\t\t\t\t\t\t<%= macros.miniCartSummary(cart.getTotalItemCount()) %>\n\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\t<a href=\"#\" class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".main-nav\">\n\t\t\t\t\t\t\t\t<span class=\"icon-bar\"><\/span>\n\t\t\t\t\t\t\t\t<span class=\"icon-bar\"><\/span>\n\t\t\t\t\t\t\t\t<span class=\"icon-bar\"><\/span>\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<nav class=\"navbar collapse visible-phone main-nav site-header-main-nav\">\n\t\t\t\t\t<div class=\"navbar-inner\">\n\t\t\t\t\t\t<ul class=\"nav\">\n\t\t\t\t\t\t<% _.each(application.getConfig('navigationTabs', []), function (item) { %>\n\t\t\t\t\t\t\t<%= macros.navigationTabs(item, true) %>\n\t\t\t\t\t\t<% }) %>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<ul class=\"nav mobile-profile\">\n\t\t\t\t\t\t\t<%= profile %>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/nav>\n\t\t\t\t<!-- \/MOBILE -->\n\t\t\t<\/div>\n\t\t\t<div class=\"span6 header-banner\">\n\t\t\t\t<div id=\"banner-header-top\" class=\"content-banner banner-header-top\"><\/div>\n\t\t\t\t&nbsp;\n\t\t\t<\/div>\n\t\t\t<div id=\"site-search-container\" class=\"span3 site-search-container\">\n\t\t\t\t<%= macros.siteSearch('keywords', view) %>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<nav class=\"navbar hidden-phone main-nav site-header-main-nav\">\n\t\t\t<div class=\"navbar-inner\">\n\t\t\t\t<ul class=\"nav\">\n\t\t\t\t<% _.each(application.getConfig('navigationTabs', []), function (item) { %>\n\t\t\t\t\t<%= macros.navigationTabs(item, true) %>\n\t\t\t\t<% }) %>\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t<\/nav>\n\t\t<div id=\"banner-header-bottom\"  class=\"content-banner banner-header-bottom\"><\/div>\n\t<\/div>\n<\/header>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('miniCartSummary', function (total_items) { %>\n<i class=\"icon-shopping-cart icon-white\"><\/i>\n<span class=\"item-count\">\n<% if (total_items !== 1) { %>\n\t<%= _('<b>$(0)<\/b> items').translate(total_items) %>\n<% } else { %>\n\t<%= _('<b>1<\/b> item').translate() %>\n<% } %>\n<\/span>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('siteLogo', function (application, remove_home_link) { %>\n<div id=\"site-logo\" class=\"site-logo content-banner\">\n\t<% if (remove_home_link){ %>\n\t\t<a>\n\t<% } else { %>\n\t\t<a href=\"\/\" data-touchpoint=\"home\" data-hashtag=\"#\/\">\n\t<% } %>\t\n\t<%\n\t\tvar logoUrl = application.getConfig('logoUrl')\n\t\t,\tsiteName = application.getConfig('siteSettings.displayname');\n\t%>\n\t<% if (logoUrl) { %>\n\t\t<img itemprop=\"image\" src=\"<%- logoUrl %>\" alt=\"<%- siteName %>\">\n\t<% } else { %>\n\t\t<h4 itemprop=\"name\"><%= siteName %><\/h4>\n\t<% } %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('navigationTabs', function (item, is_top) { %>\n<% if (item.categories && item.categories.length) { %>\n\t<%\n\t\titem.href = item.href ? _.fixUrl(item.href) : '#';\n\t\titem['class'] = (item['class'] || '') + ' dropdown-toggle';\n\t\titem.data = _.extend({}, item.data, {toggle: 'dropdown'});\n\t%>\n\t<% if (is_top) { %>\n\t\t<li class=\"dropdown\">\n\t\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t\t\t<%= item.text %>\n\t\t\t\t<b class=\"caret\"><\/b>\n\t\t\t<\/a>\n\t\t\t<ul class=\"dropdown-menu\">\n\t\t\t\t<% _.each(item.categories, function (sub) { %>\n\t\t\t\t\t<%= SC.macros.navigationTabs(sub) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/ul>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"dropdown-submenu\">\n\t\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t\t\t<%= item.text %>\n\t\t\t<\/a>\n\t\t\t<ul class=\"dropdown-menu\">\n\t\t\t\t<% _.each(item.categories, function (sub) { %>\n\t\t\t\t\t<%= SC.macros.navigationTabs(sub) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/ul>\n\t\t<\/li>\n\t<% } %>\n<% } else { %>\n<li>\n\t<a data-toggle='collapse' data-target='.main-nav' <%= _.objectToAtrributes(item) %>>\n\t\t<%= item.text %>\n\t<\/a>\n<\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerSimpleProfile', function (Profile) { %>\n<% if (Profile.get('isLoggedIn') === 'T' &&  Profile.get('isGuest') === 'F') { %>\n\t<li class=\"welcome\"><a><%= _('Welcome $(0)').translate(Profile.get('firstname') || Profile.get('companyname'))  %><\/a><\/li>\n\t<li class=\"my-account-title\">\n\t\t<a href=\"#\" data-touchpoint=\"customercenter\">\n\t\t\t<%= _('Your Account').translate() %>\n\t\t<\/a>\n\t<\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li class=\"logout\">\n\t\t<a href=\"#\" data-touchpoint=\"logout\">\n\t\t\t<%= _('Sign Out').translate() %>\n\t\t<\/a>\n\t<\/li>\t\n<% } else { %>\n\t<li><a href=\"#\" data-touchpoint=\"login\"><%= _('Login').translate() %><\/a><\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li><a href=\"#\" data-touchpoint=\"register\"><%= _('Register').translate() %><\/a><\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('footer', function (view) { %>\n<%\n\tvar environment = SC.ENVIRONMENT\n\n\t,\thosts = environment.availableHosts\n\t,\tlanguages = environment.availableLanguages\n\t,\tcurrencies = environment.availableCurrencies\n\n\t,\tnav_links = view.application.getConfig('footerNavigation', [])\n\t,\tmacros = SC.macros;\n%>\n<footer id=\"site-footer\" class=\"site-footer\">\n\t<div class=\"container\">\n\t\t<div class=\"customer-site-settings\">\n\t\t\t<form class=\"form-inline\">\n\t\t\t\t<% if (hosts.length) { %>\n\t\t\t\t\t<%= macros.hostSelector(hosts, environment.currentHostString) %>\n\t\t\t\t<% } else if (languages.length) { %>\n\t\t\t\t\t<%= macros.languageSelector(languages, environment.currentLanguage.locale) %>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (currencies.length) { %>\n\t\t\t\t\t<%= macros.currencySelector(currencies, environment.currentCurrency.code) %>\n\t\t\t\t<% } %>\n\t\t\t<\/form>\n\t\t<\/div>\n\t\t\n\t\t<% if (nav_links.length) { %>\n\t\t\t<%= macros.footerNavigation(nav_links) %>\n\t\t<% } %>\n\n\t\t<%= macros.backToTop() %>\n\t\t<div id=\"banner-footer\" class=\"content-banner banner-footer\"><\/div>\n\t<\/div>\n<\/footer>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('footerNavigation', function (nav_links) { %>\n<ul class=\"site-footer-main-nav\">\n<% _.each(nav_links, function (item) { %>\n\t<li>\n\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t<%= item.text %>\n\t\t<\/a>\n\t<\/li>\n<% }) %>\n<\/ul>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('simplifiedFooter', function (view) { %>\n\t<%= SC.macros.backToTop() %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionTile', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<ul id=\"<%= htmlid %>\" class=\"tiles size-tiles <%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<li class=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<a \n\t\t\t\t\t\thref=\"<%= item_model.get('_url') + '?' + option.url + '=' + encodeURIComponent(item.label) %>\" \n\t\t\t\t\t\tclass=\"tile\" \n\t\t\t\t\t\tdata-value=\"<%= item.internalid %>\" \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t\t\t<%= item.label %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/ul>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionDropdown', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<label class=\"option-label strong\" for=\"<%= htmlid %>\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/label>\n\t<select name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium\" data-toggle=\"select-option\">\n\t<% _.each(option.values, function (item) { %>\n\t\t<% if (item.internalid) { %>\n\t\t\t<% \n\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t%>\n\t\t\t<option\n\t\t\t\tclass=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\"\n\t\t\t\tvalue=\"<%= item.internalid %>\"\n\t\t\t\t<%= is_active ? 'selected' : '' %>\n\t\t\t\tdata-active=\"<%= is_active %>\"\n\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t<%= item.label %>\n\t\t\t<\/option>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/select>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsStock', function (stock_info) { %>\n\t<% if (!stock_info.isInStock && stock_info.showOutOfStockMessage) { %>\n\t\t<span class=\"label label-important stock-status out-of-stock\">\n\t\t\t<link itemprop=\"availability\" href=\"http:\/\/schema.org\/OutOfStock\" \/><%= stock_info.outOfStockMessage %>\n\t\t<\/span>\n\t<% } else if (stock_info.showInStockMessage) { %>\n\t\t<span class=\"label label-success stock-status in-stock\">\n\t\t\t<link itemprop=\"availability\" href=\"http:\/\/schema.org\/InStock\" \/><%= stock_info.inStockMessage %>\n\t\t<\/span>\n\t<% } %>\n\t<% if (stock_info.showStockDescription && stock_info.stockDescription) { %>\n\t\t<span class=\"stock-description <%= stock_info.stockDescriptionClass %>\">\n\t\t\t<%= stock_info.stockDescription %>\n\t\t<\/span>\n\t<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemImageGallery', function (images, view) { %>\n<div class=\"item-image-gallery\">\n<% if (images.length) { %>\n\t<% if (images.length > 1) { %>\n\t\t<% var resizeImage = view.application.resizeImage; %>\n\t\t<ul class=\"bxslider\">\n\t\t<% _.each(images, function (image) { %>\n\t\t\t<li>\n\t\t\t\t<img src=\"<%= resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t\t\t<\/li>\n\t\t<% }) %>\n\t\t<\/ul>\n\t<% } else { %>\n\t\t<% var image = images[0]; %>\n\t\t<div class=\"item-detailed-image\">\n\t\t\t<img src=\"<%= view.application.resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t\t<\/div>\n\t<% } %>\n<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsMainImage', function (images, view) { %>\n<% if (images.length) { %>\n\t<% var image = images[0]; %>\n\t<div class=\"item-detailed-image\">\n\t\t<img src=\"<%= view.application.resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionRadio', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<div id=\"<%= htmlid %>\" class=\"<%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<label class=\"radio <%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype=\"radio\" \n\t\t\t\t\t\tname=\"<%= htmlid %>\" \n\t\t\t\t\t\tvalue=\"<%= item.internalid %>\" \n\t\t\t\t\t\t<%= is_active ? 'checked' : '' %> \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t<%= item.label %>\n\t\t\t\t<\/label>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/div>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsReviews', function ( options ) { %>\n<% if (options.item.get('_ratingsCount')) { %>\n\t<div class=\"item-detailed-reviews\">\n\t\t<h3 class=\"no-margin-top\">\n\t\t\t<%= options.title || _('Reviews Summary').translate() %>\n\t\t<\/h3>\n\t\t<header class=\"reviews-header\">\n\t\t\t<div class=\"row-fluid\">\n\t\t\t\t<div class=\"span3 reviews-star-filters\">\n\t\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t\t\t<%= SC.macros.starRating({\n\t\t\t\t\t\t\tmax: options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\tvalue: options.item.get('_rating')\n\t\t\t\t\t\t,\tfillRounded: true\n\t\t\t\t\t\t,\tclassName: 'star'\n\t\t\t\t\t\t,\tshowValue: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"rating-by-star\">\n\t\t\t\t\t\t<%= SC.macros.ratingByStar({\n\t\t\t\t\t\t\tratingsCountsByRate: options.item.get('_ratingsCountsByRate') || {}\n\t\t\t\t\t\t,\tmaxRate: options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\ttotalReviews: options.item.get('_ratingsCount')\n\t\t\t\t\t\t,\tbaseUrl: options.item.get('_url')\n\t\t\t\t\t\t,\tshowPercentage: true\n\t\t\t\t\t\t,\tshowCount: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"span3 based-on strong\">\n\t\t\t\t\t<%\n\t\t\t\t\t\tvar label = options.item.get('_ratingsCount') === 1 ? _('Review').translate() : _('Reviews').translate()\n\t\t\t\t\t\t,\tcount = options.item.get('_ratingsCount');\n\t\t\t\t\t%>\n\t\t\t\t\t<%= _('Based on $(0) $(1)').translate('<span class=\"reviews-count\">'+ count +'<\/span>', label) %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"span6 right-aligned write-review-container\">\n\t\t\t\t\t<a href=\"<%= options.item.get('_url') %>\/reviews\/new\" class=\"btn btn-primary btn-large\"><%= _('Write a Review').translate() %><\/a>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/header>\n\t\t<section class='reviews-list'>\n\t\t\t<h4><%= options.subtitle || 'Reviews List' %><\/h4>\n\t\t\t<% if (options.collection.totalRecordsFound) { %>\n\t\t\t\t<% options.collection.each(function (review) { %>\n\t\t\t\t\t<div class=\"review-container\">\n\t\t\t\t\t\t<%= SC.macros[options.application.getConfig('productReviews.reviewMacro')](review, _.extend({showActionButtons: true}, options.application.getConfig('productReviews'))) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<% }) %>\n\t\t\t<% } %>\n\t\t<\/section>\n\t\t<% if (options.collection.length < options.collection.totalRecordsFound) { %>\n\t\t<footer>\n\t\t\t<a href=\"<%= options.item.get('_url') %>\" class=\"btn btn-large\">\n\t\t\t\t<%= _('View more reviews ($(0))').translate(options.collection.totalRecordsFound) %>\n\t\t\t\t<i class=\"icon-chevron-right\"><\/i>\n\t\t\t<\/a>\n\t\t<\/footer>\n\t<% } %>\n\t<\/div>\n<% } else { %>\n\t<% if (jQuery('#first-review').length == 0) { %>\n\t\t<div class=\"item-detailed-reviews\">\n\t\t\t<h3 class=\"no-margin-top\"><%= options.title || _('Reviews Summary').translate() %><\/h3>\n\t\t\t<p id=\"first-review\" class=\"first-review\">\n\t\t\t\t<%= _('Be the first to <a href=\"$(0)\">write a review<\/a>').translate( options.item.get('_url') + '\/reviews\/new' ) %>\n\t\t\t<\/p>\n\t\t<\/div>\n\t<% } %>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionText', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<label class=\"option-label strong\" for=\"<%= htmlid %>\">\n\t\t<%= option.label %>\n\t<\/label>\n\t<% if (option.type === 'textarea') { %>\n\t\t<textarea name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium <%= htmlid %>\" data-toggle=\"text-option\" data-available=\"true\"><%= selected_value && selected_value.internalid || '' %><\/textarea>\n\t<% } else { %>\n\t\t<input type=\"<%= option.type === 'email' ? 'email' : 'text' %>\" name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium <%= htmlid %>\" value=\"<%= selected_value && selected_value.internalid || '' %>\" data-toggle=\"text-option\" data-available=\"true\">\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionColor', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<ul id=\"<%= htmlid %>\" class=\"tiles color-tiles <%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<li class=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<% var color = option.colors && (option.colors[item.label] || option.colors.defaultColor); %>\n\t\t\t\t\t<a \n\t\t\t\t\t\thref=\"<%= item_model.get('_url') + '?' + option.url + '=' + encodeURIComponent(item.label) %>\" \n\t\t\t\t\t\tclass=\"tile\" \n\t\t\t\t\t\ttitle=\"<%= item.label %>\"\n\t\t\t\t\t\t<% if (!_.isObject(color)) { %>\n\t\t\t\t\t\t\tstyle=\"background: <%= color %>\"\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\tdata-value=\"<%= item.internalid %>\" \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t\t\t\t\t<img \n\t\t\t\t\t\t\t\t\tsrc=\"<%= color.src %>\" \n\t\t\t\t\t\t\t\t\talt=\"<%= item.label %>\"\n\t\t\t\t\t\t\t\t\twidth=\"<%= color.width || '' %>\" \n\t\t\t\t\t\t\t\t\theight=\"<%= color.height || '' %>\">\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/ul>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionTile', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<ul id=\"<%= htmlid %>\" class=\"tiles size-tiles <%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<li class=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<a \n\t\t\t\t\t\thref=\"<%= item_model.get('_url') + '?' + option.url + '=' + encodeURIComponent(item.label) %>\" \n\t\t\t\t\t\tclass=\"tile\" \n\t\t\t\t\t\tdata-value=\"<%= item.internalid %>\" \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t\t\t<%= item.label %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/ul>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionDropdown', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<label class=\"option-label strong\" for=\"<%= htmlid %>\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/label>\n\t<select name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium\" data-toggle=\"select-option\">\n\t<% _.each(option.values, function (item) { %>\n\t\t<% if (item.internalid) { %>\n\t\t\t<% \n\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t%>\n\t\t\t<option\n\t\t\t\tclass=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\"\n\t\t\t\tvalue=\"<%= item.internalid %>\"\n\t\t\t\t<%= is_active ? 'selected' : '' %>\n\t\t\t\tdata-active=\"<%= is_active %>\"\n\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t<%= item.label %>\n\t\t\t<\/option>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/select>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsStock', function (stock_info) { %>\n\t<% if (!stock_info.isInStock && stock_info.showOutOfStockMessage) { %>\n\t\t<span class=\"label label-important stock-status out-of-stock\">\n\t\t\t<link itemprop=\"availability\" href=\"http:\/\/schema.org\/OutOfStock\" \/><%= stock_info.outOfStockMessage %>\n\t\t<\/span>\n\t<% } else if (stock_info.showInStockMessage) { %>\n\t\t<span class=\"label label-success stock-status in-stock\">\n\t\t\t<link itemprop=\"availability\" href=\"http:\/\/schema.org\/InStock\" \/><%= stock_info.inStockMessage %>\n\t\t<\/span>\n\t<% } %>\n\t<% if (stock_info.showStockDescription && stock_info.stockDescription) { %>\n\t\t<span class=\"stock-description <%= stock_info.stockDescriptionClass %>\">\n\t\t\t<%= stock_info.stockDescription %>\n\t\t<\/span>\n\t<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemImageGallery', function (images, view) { %>\n<div class=\"item-image-gallery\">\n<% if (images.length) { %>\n\t<% if (images.length > 1) { %>\n\t\t<% var resizeImage = view.application.resizeImage; %>\n\t\t<ul class=\"bxslider\">\n\t\t<% _.each(images, function (image) { %>\n\t\t\t<li>\n\t\t\t\t<img src=\"<%= resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t\t\t<\/li>\n\t\t<% }) %>\n\t\t<\/ul>\n\t<% } else { %>\n\t\t<% var image = images[0]; %>\n\t\t<div class=\"item-detailed-image\">\n\t\t\t<img src=\"<%= view.application.resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t\t<\/div>\n\t<% } %>\n<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsMainImage', function (images, view) { %>\n<% if (images.length) { %>\n\t<% var image = images[0]; %>\n\t<div class=\"item-detailed-image\">\n\t\t<img src=\"<%= view.application.resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionRadio', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<div id=\"<%= htmlid %>\" class=\"<%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<label class=\"radio <%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype=\"radio\" \n\t\t\t\t\t\tname=\"<%= htmlid %>\" \n\t\t\t\t\t\tvalue=\"<%= item.internalid %>\" \n\t\t\t\t\t\t<%= is_active ? 'checked' : '' %> \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t<%= item.label %>\n\t\t\t\t<\/label>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/div>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsReviews', function ( options ) { %>\n<% if (options.item.get('_ratingsCount')) { %>\n\t<div class=\"item-detailed-reviews\">\n\t\t<h3 class=\"no-margin-top\">\n\t\t\t<%= options.title || _('Reviews Summary').translate() %>\n\t\t<\/h3>\n\t\t<header class=\"reviews-header\">\n\t\t\t<div class=\"row-fluid\">\n\t\t\t\t<div class=\"span3 reviews-star-filters\">\n\t\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t\t\t<%= SC.macros.starRating({\n\t\t\t\t\t\t\tmax: options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\tvalue: options.item.get('_rating')\n\t\t\t\t\t\t,\tfillRounded: true\n\t\t\t\t\t\t,\tclassName: 'star'\n\t\t\t\t\t\t,\tshowValue: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"rating-by-star\">\n\t\t\t\t\t\t<%= SC.macros.ratingByStar({\n\t\t\t\t\t\t\tratingsCountsByRate: options.item.get('_ratingsCountsByRate') || {}\n\t\t\t\t\t\t,\tmaxRate: options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\ttotalReviews: options.item.get('_ratingsCount')\n\t\t\t\t\t\t,\tbaseUrl: options.item.get('_url')\n\t\t\t\t\t\t,\tshowPercentage: true\n\t\t\t\t\t\t,\tshowCount: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"span3 based-on strong\">\n\t\t\t\t\t<%\n\t\t\t\t\t\tvar label = options.item.get('_ratingsCount') === 1 ? _('Review').translate() : _('Reviews').translate()\n\t\t\t\t\t\t,\tcount = options.item.get('_ratingsCount');\n\t\t\t\t\t%>\n\t\t\t\t\t<%= _('Based on $(0) $(1)').translate('<span class=\"reviews-count\">'+ count +'<\/span>', label) %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"span6 right-aligned write-review-container\">\n\t\t\t\t\t<a href=\"<%= options.item.get('_url') %>\/reviews\/new\" class=\"btn btn-primary btn-large\"><%= _('Write a Review').translate() %><\/a>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/header>\n\t\t<section class='reviews-list'>\n\t\t\t<h4><%= options.subtitle || 'Reviews List' %><\/h4>\n\t\t\t<% if (options.collection.totalRecordsFound) { %>\n\t\t\t\t<% options.collection.each(function (review) { %>\n\t\t\t\t\t<div class=\"review-container\">\n\t\t\t\t\t\t<%= SC.macros[options.application.getConfig('productReviews.reviewMacro')](review, _.extend({showActionButtons: true}, options.application.getConfig('productReviews'))) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<% }) %>\n\t\t\t<% } %>\n\t\t<\/section>\n\t\t<% if (options.collection.length < options.collection.totalRecordsFound) { %>\n\t\t<footer>\n\t\t\t<a href=\"<%= options.item.get('_url') %>\" class=\"btn btn-large\">\n\t\t\t\t<%= _('View more reviews ($(0))').translate(options.collection.totalRecordsFound) %>\n\t\t\t\t<i class=\"icon-chevron-right\"><\/i>\n\t\t\t<\/a>\n\t\t<\/footer>\n\t<% } %>\n\t<\/div>\n<% } else { %>\n\t<% if (jQuery('#first-review').length == 0) { %>\n\t\t<div class=\"item-detailed-reviews\">\n\t\t\t<h3 class=\"no-margin-top\"><%= options.title || _('Reviews Summary').translate() %><\/h3>\n\t\t\t<p id=\"first-review\" class=\"first-review\">\n\t\t\t\t<%= _('Be the first to <a href=\"$(0)\">write a review<\/a>').translate( options.item.get('_url') + '\/reviews\/new' ) %>\n\t\t\t<\/p>\n\t\t<\/div>\n\t<% } %>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionText', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<label class=\"option-label strong\" for=\"<%= htmlid %>\">\n\t\t<%= option.label %>\n\t<\/label>\n\t<% if (option.type === 'textarea') { %>\n\t\t<textarea name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium <%= htmlid %>\" data-toggle=\"text-option\" data-available=\"true\"><%= selected_value && selected_value.internalid || '' %><\/textarea>\n\t<% } else { %>\n\t\t<input type=\"<%= option.type === 'email' ? 'email' : 'text' %>\" name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium <%= htmlid %>\" value=\"<%= selected_value && selected_value.internalid || '' %>\" data-toggle=\"text-option\" data-available=\"true\">\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionColor', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<ul id=\"<%= htmlid %>\" class=\"tiles color-tiles <%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<li class=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<% var color = option.colors && (option.colors[item.label] || option.colors.defaultColor); %>\n\t\t\t\t\t<a \n\t\t\t\t\t\thref=\"<%= item_model.get('_url') + '?' + option.url + '=' + encodeURIComponent(item.label) %>\" \n\t\t\t\t\t\tclass=\"tile\" \n\t\t\t\t\t\ttitle=\"<%= item.label %>\"\n\t\t\t\t\t\t<% if (!_.isObject(color)) { %>\n\t\t\t\t\t\t\tstyle=\"background: <%= color %>\"\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\tdata-value=\"<%= item.internalid %>\" \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t\t\t\t\t<img \n\t\t\t\t\t\t\t\t\tsrc=\"<%= color.src %>\" \n\t\t\t\t\t\t\t\t\talt=\"<%= item.label %>\"\n\t\t\t\t\t\t\t\t\twidth=\"<%= color.width || '' %>\" \n\t\t\t\t\t\t\t\t\theight=\"<%= color.height || '' %>\">\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/ul>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartItemLayover', function(line, view, options) { %>\n<%\nvar item = line.get('item');\nvar newprice = line.get('total')\/line.get('quantity');\nvar newprice_formatted = Math.round(newprice*100)\/100;\noptions = _.extend({ showActions: true}, options || {});\n\nvar url = _(item.get('_url')).fixUrl();\n\nif (url && SC.ENVIRONMENT.siteType === 'ADVANCED')\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t,\tdata: {\n\t\t\ttouchpoint: 'home'\n\t\t,\thashtag: '#'+url\n\t\t}\n\t});\n}\nelse if (url)\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t});\n}\n\n%>\n<style>\n.row-fluid div{\n}\n<\/style>\n<% if (options.showActions) { %>\n\n<tr id=\"<%- line.get('internalid') %>\" class=\"cart-item-cell <%= line.get('internalid') %>\">\n<td>\n\t<div data-type=\"alert-placeholder\">\n\t<% if (item.get('_cartCustomAlert')) {%>\n\t\t<div class=\"alert alert-<%= item.get('_cartCustomAlertType') || 'info' %>\">\n\t\t\t<%= item.get('_cartCustomAlert') %>\n\t\t<\/div>\n\t<% } %>\n\t<\/div>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span3 thumbnail cart-item-thumbnail\">\n\t\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t<img src=\"<%- options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" style=\"width:125px;\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<img src=\"<%- options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" style=\"width:125px;\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t<% } %>\n\t\t<\/div>\n\t\t<\/td>\n\t\t<td>\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t\t\t<%= item.get('_name') %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<%= item.get('_name') %>\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t<\/td>\n\t\t\t<td>\n\t\t\t\t\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%= SC.macros.showItemPrice(item) %><\/small><br\/>\n\t\t\t\t\t<span style=\"color:red\"><%= newprice_formatted.toFixed(2) %><\/span>\n\t\t\t\t<% } else {%> <%= SC.macros.showItemPrice(item) %> <%}%>\n\t\t\t<\/td>\n\t\t\t\t<div class=\"cart-item-options\">\n\t\t\t\t\t<%= item.renderAllOptionSelected() %>\t\n\t\t\t\t<\/div>\n\t\t\t\t<td>\n\t\t\t\t<div class=\"quantity-container\">\n\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t<form action=\"#\" data-action=\"update-quantity\" style=\"margin:0;padding:0;\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"internalid\" id=\"update-internalid-<%= line.get('internalid') %>\" class=\"update-internalid-<%= line.get('internalid') %>\" value=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<% if(item.get('_itemType') !== 'GiftCert') { %>\n\t\t\t\t\t\t\t<input type=\"text\" style=\"text-align:center;\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" class=\"input-mini quantity-<%= line.get('internalid') %>\" value=\"<%- line.get('quantity') %>\" min=\"0\">\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" value=\"1\">\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%=_('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<div class=\"cart-item-actions\" style=\"margin:0;padding:0;border:0;\">\n\t\t\t\t\t<% if (SC.ENVIRONMENT.siteType !== \"STANDARD\") { %>\n\t\t\t\t\t\t<a class=\"btn edit\" href=\"<%- _(item.get('_editUrl')).fixUrl() %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<input type=\"submit\" value=\"Update\" class=\"btnsubmit\" data-action=\"update-quantity\" data-internalid=\"<%- line.get('internalid') %>\" style=\"background: url(img\/update.png) no-repeat left center;\tborder: 0;\tbox-shadow: none;\tpadding-left: 18px;font-size:11px;color: #969696;\">\n\t\t\t\t\t<\/input>\n\t\t\t\t\t<br\/>\n\t\t\t\t\t<button class=\"btn remove\" data-action=\"remove-item\" data-internalid=\"<%- line.get('internalid') %>\" style=\"background: url(img\/remove.png) no-repeat left center;\tborder: 0;\tbox-shadow: none;\tpadding-left: 18px;font-size:11px;color: #969696;\">\n\t\t\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t\t\t<\/button>\n\t\t\t\t\t\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t\t<\/form>\n\t\t\t\t<\/div>\n\t\t\t\t<\/td>\n\t\t\t<\/div>\t\t\t\n<td align=\"center\"><%= line.get('total_formatted') %><\/td>\n<\/tr>\n<%}%>\n<% if (!options.showActions) { %>\n\n<tr style=\"border-top: 2px solid rgb(243, 243, 243);\">\n<td align=\"center\">\n<% var thumbnail = item.get('_thumbnail'); %>\n<img src=\"<%- options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\" style=\"width:75px;\"><\/td>\n<td align=\"left\" style=\"padding-left: 5px; padding-right: 5px;\"><%= item.get('_name') %><\/td>\n\n<td align=\"center\">\n\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%= SC.macros.showItemPrice(item) %><\/small><br\/>\n\t\t\t\t\t<span style=\"color:red\"><%= newprice_formatted.toFixed(2) %><\/span>\n\t\t\t\t<% } else {%> <%= SC.macros.showItemPrice(item) %> <%}%><\/td>\n\t\t\t\t\n<td align=\"center\"><%=line.get('quantity') %><\/td>\n<td align=\"center\"><%= line.get('total_formatted') %>\n<\/tr>\n\n<%}%>\n\n\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('promocodeForm', function( promocode ) {%>\n<% var is_invalid = !!( promocode && promocode.error ); %>\n<form class=\"form-inline\" data-action=\"apply-promocode\" style=\"margin:0;\">\n\t<fieldset>\n\t\t<div class=\"control-group <%= is_invalid ? 'error' : '' %>\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"promocode\"\n\t\t\t\tid=\"promocode\"\n\t\t\t\tclass=\"input-medium promocode\"\n\t\t\t\tvalue=\"<%- promocode && promocode.code %>\"\n\t\t\t\tplaceholder=\"<%- _('Promo code').translate() %>\"\n\t\t\t\t\nstyle=\"width: 125px;\"\n\n\t\t\t>\n\t\t\t<button type=\"submit\" class=\"btn\" style=\"background: #35c6f5;\t\n\t\t\tborder-color: #35c6f5;\n\t\t\tborder-radius: 18.5px;\n\t\t\tborder-style: solid;\n\t\t\tborder-width: 1px;\n\t\t\tcolor: rgb(255, 255, 255);\n\t\t\tcursor: pointer;\n\t\t\twidth: 70px;\n\t\t\ttext-transform: uppercase;\">\n\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t\t<div data-type=\"promocode-error-placeholder\">\n\t\t<% if (is_invalid) {%>\n\t\t\t<%= SC.macros.message(promocode.error, 'error', true) %>\n\t\t<% } %>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartItem', function(line, view, options) { %>\n<%\nvar item = line.get('item');\nvar newprice = line.get('total')\/line.get('quantity');\nvar newprice_formatted = Math.round(newprice*100)\/100;\noptions = _.extend({ showActions: true}, options || {});\n\nvar url = _(item.get('_url')).fixUrl();\n\n\nif (url && SC.ENVIRONMENT.siteType === 'ADVANCED')\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t,\tdata: {\n\t\t\ttouchpoint: 'home'\n\t\t,\thashtag: '#'+url\n\t\t}\n\t});\n}\nelse if (url)\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t});\n}\n\n%>\n<% if (options.showActions) { %>\n<article id=\"<%- line.get('internalid') %>\" class=\"cart-item-cell <%= line.get('internalid') %>\">\n\t<div data-type=\"alert-placeholder\">\n\t<% if (item.get('_cartCustomAlert')) {%>\n\t\t<div class=\"alert alert-<%= item.get('_cartCustomAlertType') || 'info' %>\">\n\t\t\t<%= item.get('_cartCustomAlert') %>\n\t\t<\/div>\n\t<% } %>\n\t<\/div>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span3 thumbnail cart-item-thumbnail\">\n\t\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t<% } %>\n\t\t<\/div>\n\t\t<div class=\"span9 details\">\n\t\t\t<div class=\"span9 cart-item-details\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t\t\t<%= item.get('_name') %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<%= item.get('_name') %>\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"lead lead-small price\">\n\t\t\t\t\t<%= SC.macros.showItemPrice(item) %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"sku\">\n\t\t\t\t\t<%= _('SKU: #$(0)').translate( item.get('_sku') ) %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"cart-item-options\">\n\t\t\t\t\t<%= item.renderAllOptionSelected() %>\t\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"quantity-container\">\n\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t<form action=\"#\" data-action=\"update-quantity\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"internalid\" id=\"update-internalid-<%= line.get('internalid') %>\" class=\"update-internalid-<%= line.get('internalid') %>\" value=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<% if(item.get('_itemType') !== 'GiftCert') { %>\n\t\t\t\t\t\t\t<input type=\"number\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" class=\"input-mini quantity-<%= line.get('internalid') %>\" value=\"<%- line.get('quantity') %>\" min=\"0\">\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" value=\"1\">\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\n\t\t\t\t\t<\/form>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%=_('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\t\t\t\n\t\t\t\n\t\t\t<div class=\"span3 amount\">\n\t\t\t\t<%= line.get('total_formatted') %>\n\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%=  line.get('amount_formatted') %><\/small>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t<div class=\"clearfix\"><\/div>\n\t\t\t<div class=\"text-right cart-item-stock-info\">\n\t\t\t\t<%= SC.macros.itemDetailsStock(item.getStockInfo()) %>\n\t\t\t<\/div>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<div class=\"cart-item-actions\">\n\t\t\t\t\t<% if (SC.ENVIRONMENT.siteType !== \"STANDARD\") { %>\n\t\t\t\t\t\t<a class=\"btn edit\" href=\"<%- _(item.get('_editUrl')).fixUrl() %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<button class=\"btn remove\" data-action=\"remove-item\" data-internalid=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t\t\t<\/button>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<\/div>\n<\/article>\n<%}%>\n<% if (!options.showActions) { %>\n\n<tr style=\"border-top: 2px solid rgb(243, 243, 243);\">\n<td align=\"left\">\n<% var thumbnail = item.get('_thumbnail'); %>\n<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\" style=\"width: 150px; margin-left: -10px;\"><\/td>\n<td align=\"left\" style=\"padding-left: 5px; padding-right: 5px; color: #616161;\"><%= item.get('_name') %><\/td>\n\n<td align=\"center\" style=\"color: #616161;\">\n\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%= SC.macros.showItemPrice(item) %><\/small><br\/>\n\t\t\t\t\t<span style=\"color:red\"><%= newprice_formatted.toFixed(2) %><\/span>\n\t\t\t\t<% } else {%> <%= SC.macros.showItemPrice(item) %> <%}%><\/td>\n\t\t\t\t\n<td align=\"center\" style=\"color: #616161;\"><%=line.get('quantity') %><\/td>\n<td align=\"center\" style=\"color: #616161;\"><%= line.get('total_formatted') %>\n<\/tr>\n\n<%}%>\n\n\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionDefault', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: <%= value.label %> \n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartSummary', function (cart, siteSettings, options) { %>\n<%\n\toptions = _.extend({ showShipto: true, showLabelsAsEstimated: true}, options || {});\n\tconsole.log(\"Shopping cart summary sm\"); console.log(cart);\n\tvar summary = cart.get('summary')\n\t,\tpromocode = cart.get('promocode')\n\t,\titem_count = _.reduce(cart.get('lines').pluck('quantity'), function (memo, quantity) { return memo + (parseFloat(quantity) || 1); }, 0)\n\t,\tshipping_address = cart.get('addresses').get(cart.get('shipaddress')) || new Backbone.Model()\n\t,\tshow_total = summary.subtotal !== summary.total || options.alwaysShowTotal\n\t,\thas_estimated_shipping = summary.estimatedshipping\n\t,\tis_promocode_valid = promocode && promocode.isvalid\n\t,\tdefault_county = shipping_address.get('country') || siteSettings.defaultshipcountry\n\t,\tgiftcertificates = cart.get('paymentmethods').where({type: 'giftcertificate'}) || []\n\t\/\/\tThird party checkouts\n\t,\tcheckout = options.checkout || {}\n\t,\tpaypal_express = checkout.paypalexpress;\n%>\n<div class=\"well shopping-cart-summary\">\n\t<header class=\"well-header\">\n\t\t<h2 style=\"color: rgb(243, 122, 49);\nfont-family: 'OmnesMediumRegular';\nfont-size: 14px;\nfont-weight: 700;\nmargin-bottom: 0px;\nmargin-left: 0px;\nmargin-right: 0px;\nmargin-top: 0px;\npadding-bottom: 6px;\ntext-align: left;\ntext-transform: uppercase;\">\n\t\t\t<%= _('Order Summary').translate() %>\n\t\t<\/h2>\n\t<\/header>\n\t\n\t<div class=\"well-body accordion\">\n\t\t<div class=\"well-section cart-summary-subtotal\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right\"><%= summary.subtotal_formatted %><\/span>\n\t\t\t\t<%= _('Subtotal ($(0) $(1))').translate( item_count, item_count === 1 ? _('item').translate() : _('items').translate() ) %>\n\t\t\t<\/p>\n\t\t\t<% if (!show_total) { %>\n\t\t\t\t<p class=\"small\">\n\t\t\t\t\t<%= _('(Subtotal does not include shipping or tax)').translate() %>\n\t\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<\/div>\n\n\t\t<% if (is_promocode_valid || summary.giftcertapplied) { %>\n\n\t\t\t<% if (is_promocode_valid) { %>\n\t\t\t\t<div class=\"well-section cart-summary-promocode-applied\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong class=\"lead-price pull-right\"><%= summary.discountrate_formatted %><\/strong>\n\t\t\t\t\t\t<%= _('Promo Code Applied').translate() %>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<p class=\"text-success\">\n\t\t\t\t\t\t#<%= promocode.code %> - <%= _('Instant Rebate').translate() %>\n\t\t\t\t\t\t<a href=\"#\" data-action=\"remove-promocode\">\n\t\t\t\t\t\t\t<i class=\"icon-remove\"><\/i>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\n\t\t\t<% if (summary.discounttotal) { %>\n\t\t\t\t<div class=\"well-section cart-summary-discount-applied\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span class=\"pull-right\"><%= summary.discounttotal_formatted %><\/span>\n\t\t\t\t\t\t<%= _('Discount Total').translate() %>\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\n\t\t\t<% if (summary.giftcertapplied) { %>\n\t\t\t\t<div class=\"well-section cart-summary-giftcertificate-applied\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<%= _('Gift Certificates Applied ($(0))').translate(giftcertificates.length) %>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<% _.each(giftcertificates, function(giftCertificate) { %>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class=\"pull-right\"><%= _('-$(0)').translate(giftCertificate.get('giftcertificate').amountapplied_formatted) %><\/span>\n\t\t\t\t\t\t\t<span title=\"<%= giftCertificate.get('giftcertificate').code %>\"><%= SC.macros.formatPaymentMethod(giftCertificate) %><\/span>\n\t\t\t\t\t\t<\/p>\n\t\t\t\t\t<% }); %>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<% } %>\n\n\t\t<% if (summary.estimatedshipping || shipping_address.get('zip')) { %>\n\t\t\t<div class=\"well-section cart-summary-shipping-cost-applied\">\n\t\t\t\t<% if (options.showShipto && shipping_address.get('zip')) { %>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<%= _('Ship to:').translate() %>\n\t\t\t\t\t\t<span class=\"text-success\"><%= shipping_address.get('zip') %><\/span>\n\t\t\t\t\t\t<a href=\"#\" data-action=\"remove-shipping-address\">\n\t\t\t\t\t\t\t<i class=\"icon-remove\"><\/i>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% } %>\n\t\t\t\t<p>\n\t\t\t\t\t<span class=\"pull-right\"><%= _.formatCurrency(summary.taxtotal + summary.shippingcost) %><\/span>\n\t\t\t\t\t<%= options.showLabelsAsEstimated ? _('Estimated Tax & Shipping').translate() : _('Tax & Shipping').translate() %>\n\t\t\t\t<\/p>\n\t\t\t\t<p>\n\t\t\t\t\t<span class=\"pull-right\"><%= _.formatCurrency(summary.handlingcost) %><\/span>\n\t\t\t\t\t<%= _('Handling').translate() %>\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t<% } %>\n\n\t\t<% if (show_total) { %>\n\t\t\t<div class=\"well-section cart-summary-total\">\n\t\t\t\t<p class=\"no-margin-bottom strong\">\n\t\t\t\t\t<span class=\"pull-right\"><%= summary.total_formatted %><\/span>\n\t\t\t\t\t<%= options.showLabelsAsEstimated ? _('Estimated Total').translate() : _('Total').translate() %>\n\t\t\t\t<\/p>\n\t\t\t\t<% if (!(summary.estimatedshipping || shipping_address.get('zip'))) { %>\n\t\t\t\t\t<p class=\"no-margin-bottom small\">\n\t\t\t\t\t\t<%= _('(Total does not include shipping or tax)').translate() %>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t<% } %>\n\n\t\t<% if (!shipping_address.get('zip')) { %>\n\t\t\t<div class=\"collapsible well-section cart-summary-shipping-section\">\n\t\t\t\t<p class=\"collapser collapsed\" data-toggle=\"collapse\" data-target=\"#estimate-shipping-form\">\n\t\t\t\t\t<%= _('Estimate Tax & Shipping').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>Shipping Estimator<\/b><br>Shipping fees are based on your shipping location. Please enter your information to view estimated shipping costs.').translate() %>\" class=\"icon-question-sign\"><\/i>\n\t\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t<\/p>\n\t\t\t\t<div id=\"estimate-shipping-form\" class=\"collapse estimate-shipping-form\">\n\t\t\t\t\t<form action=\"#\" data-action=\"estimate-tax-ship\">\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<% if (_.size(siteSettings.countries) > 1) { %>\n\t\t\t\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t\t\t\t<label for=\"country\"><%= _('Select Country').translate() %><\/label>\n\t\t\t\t\t\t\t\t\t<select name=\"country\" id=\"country\" class=\"input-medium country\" data-action=\"estimate-tax-ship-country\">\n\t\t\t\t\t\t\t\t\t\t<option value=\"\"><\/option>\n\t\t\t\t\t\t\t\t\t\t<% _.each(siteSettings.countries, function (item, index) { %>\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"<%= item.code %>\" <%= item.code === default_county ? 'selected' : '' %>><%= item.name %><\/option>\n\t\t\t\t\t\t\t\t\t\t<% }) %>\n\t\t\t\t\t\t\t\t\t<\/select>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t\t<span><%= _('Ship available only to $(0)').translate(_.toArray(siteSettings.countries)[0].name) %><\/span>\n\t\t\t\t\t\t\t\t<input name=\"country\" id=\"country\" class=\"country\" value=\"<%= _.toArray(siteSettings.countries)[0].code %>\" type=\"hidden\" \/>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t\t\t<label for=\"zip\">\n\t\t\t\t\t\t\t\t\t<%= default_county === 'US' ? _('Ship to the following zip code').translate() : _('Ship to the following postal code').translate() %>\n\t\t\t\t\t\t\t\t<\/label>\n\t\t\t\t\t\t\t\t<div class=\"form-inline\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"zip\" id=\"zip\" class=\"input-small zip\" value=\"<%= shipping_address.get('zip') || '' %>\" placeholder=\"<%= default_county === 'US' ?  _('Zip code').translate() : _('Postal code').translate() %>\">\n\t\t\t\t\t\t\t\t\t<button class=\"btn\"><%= _('Estimate').translate() %><\/button>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/fieldset>\n\t\t\t\t\t<\/form>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<% } %>\n\n\t\t<% if (!is_promocode_valid) { %>\n\t\t\t<div class=\"collapsible well-section cart-summary-promocode-section\">\n\t\t\t\t<p class=\"collapser collapsed\" data-target=\"#promo-code-container\" data-toggle=\"collapse\">\t\t\t\t\t\n\t\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t\t<%= _('Have a Promo Code?').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>Promo Code<\/b><br>To redeem a promo code, simply enter your information and we will apply the offer to your purchase during checkout.').translate() %>\" class=\"icon-question-sign\"><\/i>\t\t\t\t\t\n\t\t\t\t<\/p>\n\t\t\t\t<div id=\"promo-code-container\" class=\"collapse promo-code-container\">\n\t\t\t\t\t<%= SC.macros.promocodeForm( promocode ) %>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<% } %>\n\t<\/div>\n\t\n\t<% if (options.showActions) { %>\n\t\t<div class=\"well-footer shopping-cart-action-buttons\">\n\t\t\t<a id=\"btn-proceed-checkout\" class=\"btn btn-large btn-block btn-primary btn-proceed-checkout\" href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\">\n\t\t\t\t<%= _('Proceed to Checkout').translate() %>\n\t\t\t<\/a>\n\t\t\t\n\t\t\t<% if (paypal_express.available === 'T') { %>\n\t\t\t\t<a href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\" data-parameters=\"paypalexpress=T\">\n\t\t\t\t\t<img src=\"<%= paypal_express.imageurl %>\" alt=\"PayPal Express\" width=\"145px\" height=\"42px\">\n\t\t\t\t<\/a>\n\t\t\t<% } %>\n\n\t\t\t<a class=\"btn continue-shopping\" href=\"#\" data-touchpoint=\"home\" data-hashtag=\"#<%= _(options.continueURL).fixUrl() %>\">\n\t\t\t\t<%= _('Continue Shopping').translate() %>\n\t\t\t<\/a>\n\t\t<\/div>\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionColor', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: \n\t<% var color = option.colors && (option.colors[value.label] || option.colors.defaultColor); %>\n\t<span \n\t\t<% if (!_.isObject(color)) { %>\n\t\t\tstyle=\"background: <%= color %>\"\n\t\t<% } %>\n\t\tclass=\"cart-color-tile\">\n\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t<img \n\t\t\t\t\tsrc=\"<%- color.src %>\" \n\t\t\t\t\talt=\"<%- value.label %>\"\n\t\t\t\t\twidth=\"<%- color.width || '' %>\" \n\t\t\t\t\theight=\"<%- color.height || '' %>\">\n\t\t\t<% } %>\t\n\t<\/span> <%= value.label %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('giftcertForm', function( giftcert ) {%>\n<form id=\"gift-certificate-form\" class=\"gift-certificate-form\" data-action=\"apply-giftcert\" >\n<div style=\"width:100%;height: auto;\"><\/div>\n\t<fieldset>\n\t\t<div class=\"control-group\">\n\t\t\t\n\t\t\t<input type=\"text\" name=\"code\" id=\"code\" class=\"input-medium\" value=\"\" placeholder=\"Gift card\" style=\"width: 125px;\">\n\t\t\t\t<button type=\"submit\" class=\"btn\" style=\"background: #35c6f5;\n\t\t\t\t\tborder-color: #35c6f5;\n\t\t\t\t\tborder-radius: 18.5px;\n\t\t\t\t\tborder-style: solid;\n\t\t\t\t\tborder-width: 1px;\n\t\t\t\t\tcolor: rgb(255, 255, 255);\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\twidth: 70px;\n\t\t\t\t\ttext-transform: uppercase;\">\n\t\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t\t<\/button>\n\t\t\t\n\t\t<\/div>\n\t\t<div data-type=\"giftcertificate-error-placeholder\">\n\t\t\t\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n<%if(giftcert.length){%>\n<table class=\"table\" style=\"font-size: 11px; color: grey; margin-left:-10px; margin-bottom:0\" width=\"50\">\n\t<tr>\n\t\t<td>\n\t\t\t<b><%= _('Gift Card').translate() %><\/b>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<b><%= _('Applied').translate() %><\/b>\n\t\t<\/td>\t\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<b><%= _('Remaining balance').translate() %><\/b>\n\t\t<\/td>\t\n\t\t<td>\n\t\t\t&nbsp;\n\t\t<\/td>\n\t<\/tr>\n\n<%  _.each(giftcert, function (giftCertificate) { %>\n\t<% var giftcertificate = giftCertificate.get('giftcertificate') %>\n\t\n\t<tr>\n\t\t<td>\n\t\t\t<%= SC.macros.formatPaymentMethod(giftCertificate) %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<%= _('$(0)').translate(giftcertificate.amountapplied_formatted) %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<%= _('$(0)').translate(giftcertificate.amountremaining_formatted) %>\n\t\t<\/td>\t\t\n\t\t<td class=\"right-aligned\">\n\t\t\t<a href=\"#\" data-action=\"remove-giftcert\" data-id=\"<%- giftcertificate.code %>\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/a>\n\t\t<\/td>\n\t<\/tr>\n<% }) %>\n<\/table>\n<%}%>\n<div data-type=\"alert-placeholder-gif-certificate\"><\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('checkoutCartSummary', function (options) { %>\n\n<% console.log(\"Shopping cart summary m\"); console.log(options.cart);\n\tvar cart = options.cart\n\t,\tsummary = cart.get('summary')\n\t,\tpromocode = cart.get('promocode')\n\t,\titem_count = _.reduce(cart.get('lines').pluck('quantity'), function (memo, quantity) { return memo + (parseFloat(quantity) || 1); }, 0)\n\t,\tis_promocode_valid = promocode && promocode.isvalid\n\t,\tgiftcertificates = cart.get('paymentmethods').where({type: 'giftcertificate'}) || [];\n\tvar sum = 0;\n\tvar view = {};\nvar domainSum = 0;\n\tvar cleanSubtotal = 0;\n\tfor( var i=0;i< cart.get('lines').models.length;i++) {\n\t\tcleanSubtotal += cart.get('lines').models[i].get('item').get('quantity') * cart.get('lines').models[i].get('item').get('_comparePriceAgainst') \n\t}\n%>\n<style>\n.cart-layover{\n\tposition:fixed;\n\tleft:25%;\n\ttop:10px;\n\twidth: 620px;\n\tmax-height: 88%;\n\tbackground: white;\n    z-index:999;\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tbackground-clip: padding-box;\n\tbackground-color: #fff;\n\tborder: 1px solid #999;\n\tborder: 1px solid rgba(0,0,0,0.2);\n\tborder-radius: 6px;\n\tbox-shadow: 0 3px 9px rgba(0,0,0,0.5);\n\tmoz-background-clip: padding-box;\n\tmoz-box-shadow: 0 3px 9px rgba(0,0,0,0.5);\n\toutline: 0;\n\twebkit-background-clip: padding-box;\n\twebkit-box-shadow: 0 3px 9px rgba(0,0,0,0.5);\n\tpadding:25px;\n}\n.close{\n\t\n\tfont-size: 18px;\n\tline-height: 18px;\n\tcolor: rgba(255, 255, 255, 0.4);\n\tbackground: #f27337;\n\tposition: relative;\n\tfloat: right;\n\tright: 10px;\n\ttop: 10px;\n\tcursor: pointer;\n}\n.cart-items-table td{\ntext-align:center;\n}\n.savelayover{\n\tborder: 0;\n\tbackground: 0;\n\tfont-size: 13px;\n\tcolor: #337ac1;\n\ttext-decoration: underline;\n}\n\n<\/style>\n<script>\nvar platf = navigator.platform;\nif(platf.indexOf('iPad')>-1 || platf.indexOf('iPhone')>-1 || platf.indexOf('iPod')>-1) \n{\n     jQuery(\".cart-layover\").css(\"left\", \"5%\"); \n};\n<\/script>\n<script>\n\tjQuery('.keep-in-touch-module').clone().show().appendTo('#keepintouch-code-container');\n\t'<%=options.subscription%>'=='T'?jQuery('.keep-in-touch-checkbox').prop('checked',true):jQuery('.keep-in-touch-checkbox').prop('checked',false);\n<\/script>\n<div class=\"cart-layover\" style=\"display:none;\">\n<button type=\"button\" class=\"close\" onclick=\"jQuery('.cart-layover').hide()\">\u00d7<\/button>\n<h1 style=\"color: rgb(243, 122, 49); background: url('img\/cart.png') no-repeat;padding-left: 48px;margin-top: 10px;font-size: 38px;font-family: 'OmnesLightRegular';font-weight: normal;\">Shoppping Cart<\/h1>\n<div class=\"listheadercustom\" style=\"color: #969696;padding: 20px 0px 10px 0px;border-bottom: solid 1px black;\">ITEMS IN YOUR CART<\/div>\n<table id=\"cartitemstable\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"width:100%;\">\n<tr>\n<th style=\"height:45px;\">Item<\/th><th>Description<\/th><th>Price<\/th><th>Qty<\/th><th>Total<\/th>\n<\/tr>\n<% cart.get('lines').each(function (lines, index) { %>\n\n\t\t\t<%= SC.macros.shoppingCartItemLayover(lines, view, {\n\t\t\t\tshowActions:true,\n\t\t\t\tapplication:options.application\n\t\t\t}) %>\n\t\t<% }) %>\n\n<\/table>\n<button type=\"button\" class=\"savelayover\" onclick=\"jQuery('.cart-layover').hide()\">Save<\/button>\n<\/div>\n\n\n<div class=\"checkout-cart-summary\">\n<div class=\"btncheckout-cart-summary-macro\">\n\t\t<button class=\"bgbutton-checkout\" data-action=\"submit-step\" style=\"width: 243px;\">\n\t\t\t<%= options.continueButtonLabel %>\n\t\t<\/button>\n<\/div><div class=\"order-summary-block\">\n\t<header class=\"checkout-cart-summary-header\">\n\t\t<% if (options.stepPosition.toLast > 0) { %>\n\t\t\t<a href=\"#\" class=\"btn btn-link btn-edit-cart pull-right\" onclick=\"jQuery('.cart-layover').show()\" style=\"color:white; text-decoration: underline;\">\n\t\t\t\t<%= _('edit cart').translate() %>\n\t\t\t<\/a>\n\t\t<% } %>\n\n\t\t<h2 class=\"checkout-cart-summary-macro-title\" style=\"color:white;\">\n\t\t\t<%= _('Order Summary').translate() %>\n\t\t<\/h2>\n\t<\/header>\n\t<div class=\"dottedLine\" style=\"color:white; margin-top:-10px; margin-bottom: 21px; text-align: center;\">.........................................................<\/div>\n\t<div class=\"checkout-cart-summary-body\">\n\t\t<%\/\/ if (!options.hideItems) { %>\n\t\t<ul class=\"cart-summary-items checkout-summary-items\" style=\"display:none;\">\n\t\t<%\n\t\t\tvar thumbnail = ''\n\t\t\t,\titem = null;\n\t\t%>\n\t\t<% cart.get('lines').each(function (line) { %>\n\t\t\t<%\n\t\t\t\tsum += line.get('amount') - line.get('total');\ndomainSum += line.get('item').attributes._comparePriceAgainst * line.get('item').attributes.quantity - line.get('amount');\n\t\t\t\titem = line.get('item');\n\t\t\t\tthumbnail = item.get('_thumbnail');\n\t\t\t%>\n\t\t\t<li class=\"cart-summary-item-cell checkout-summary-item-cell\">\n\t\t\t\t<div class=\"row-fluid\" style=\"color:white;\">\n\t\t\t\t\t<div class=\"span3 thumbnail checkout-summary-item-thumbnail\">\n\t\t\t\t\t\t<img src=\"<%- options.application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"span9 cart-summary-item-details checkout-summary-item-details\" style=\"color:white;\">\n\t\t\t\t\t\t<div class=\"pull-right cart-summary-item-total\">\n\t\t\t\t\t\t\t<%= line.get('total_formatted') %>\n\t\t\t\t\t\t\t<% if (line.get('amount') > line.get('total')) {%>\n\t\t\t\t\t\t\t\t<small class=\"muted crossed cart-summary-item-amount\">\n\t\t\t\t\t\t\t\t\t<%=  line.get('amount_formatted') %>\n\t\t\t\t\t\t\t\t<\/small>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div style=\"color:white;\">\n\t\t\t\t\t\t\t<strong class=\"cart-summary-item-name\"><%= item.get('_name') %><\/strong>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class=\"cart-summary-item-quantity\" style=\"color:white;\">\n\t\t\t\t\t\t\t<%= _('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class=\"cart-summary-item-price\" style=\"color:white;\">\n\t\t\t\t\t\t\t<%= SC.macros.showItemPrice(line.get('item')) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<%= \/* Renders the selected options for the item *\/ \n\t\t\t\t\t\t\titem.renderAllOptionSelected() %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t<% }) %>\n\t\t<\/ul>\n\t\t<%\/\/ } %>\n\t\t<div class=\"cart-summary-subtotal\" style=\"color:white;\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right cart-summary-subtotal-formatted\">\n\t\t\t\t\t$<%=parseFloat(cleanSubtotal).toFixed(2)%>\n\t\t\t\t<\/span>\n\t\t\t\t<span class=\"cart-summary-subtotal-label\">\n\t\t\t\t\t<%= _('Subtotal ($(0) $(1))').translate(item_count, item_count === 1 ? _('item').translate() : _('items').translate()) %>\n\t\t\t\t<\/span>\n\t\t\t<\/p>\n\t\t<\/div>\n\n\t\t\n\n\t\t<div class=\"cart-summary-shipping-cost-applied\" style=\"color:white;\">\n\n<% if(domainSum>0){ %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t-$<%= domainSum.toFixed(2) %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Discount').translate() %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\n\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t<%= summary.shippingcost_formatted == \"$0.00\" ? '-' : summary.shippingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Shipping').translate() %>\n\t\t\t<\/p>\n\n\t\t\t<% if (summary.handlingcost) { %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-handling-cost-formatted\">\n\t\t\t\t\t<%= summary.handlingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Handling').translate() %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-tax-total-formatted\">\n\t\t\t\t\t<%= summary.taxtotal_formatted==\"$0.00\" ? '-' : summary.taxtotal_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Tax').translate() %>\n\t\t\t<\/p>\n\t\t\t\n\t\t\t\t\t\t<% if(sum>0){ %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t-$<%= sum.toFixed(2) %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Promo').translate() %> #<%= promocode.code %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<\/div><\/div>\n\n\t\t<% if (is_promocode_valid || summary.giftcertapplied) { %>\n\t\t\t<% if (is_promocode_valid && summary.discounttotal) { %>\n\t\t\t<div class=\"checkout-cart-summary-body\" style=\"color:white\">\n\t\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t-<%=summary.discounttotal_formatted%>\n\t\t\t\t<\/span>\n\t\t\t\t\t<%= _('Promo').translate() %> #<%= promocode.code %>\n\t\t\t\t\t\t\t\t\t\t<% if (options.stepPosition.toLast > 0) { %>\n\t\t\t\t\t<!--\t<a href=\"#\" data-action=\"remove-promocode\">\n\t\t\t\t\t\t\t<i class=\"icon-remove\"><\/i>\n\t\t\t\t\t\t<\/a>\t-->\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t\t\n\t\t\t<% if (summary.giftcertapplied) { %>\n\t\t\t<div class=\"checkout-cart-summary-body\" style=\"color:white;\">\n\t\t\t\t<p>\n\t\t\t\t<b>\t<%= _('Gift Certificates Applied ($(0))').translate(giftcertificates.length) %><\/b>\n\t\t\t\t<\/p>\n\t\t\t\t<% _.each(giftcertificates, function (giftCertificate) { %>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span class=\"pull-right\">\n\t\t\t\t\t\t\t<%= _('-$(0)').translate(giftCertificate.get('giftcertificate').amountapplied_formatted) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span title=\"<%- giftCertificate.get('giftcertificate').code %>\">\n\t\t\t\t\t\t\tGift Card: <%= SC.macros.formatPaymentMethod(giftCertificate) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% }); %>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<% } %>\n\t\t<div class=\"checkout-cart-summary-macro-total\" style=\"background-color:#f5631a; color: white; margin:0;\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right cart-summary-total-formatted\">\n\t\t\t\t\t<%= summary.total_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Total').translate() %>\n\t\t\t<\/p>\n\t\t<\/div>\n<!--\n\t<% if (options.stepPosition.toLast === 1) { %>\n\t\t<div>\n\t\t<% if (SC.ENVIRONMENT.siteSettings.checkout.requiretermsandconditions === 'T') { %>\n\t\t\t<p><%= _('By placing your order, you are agree to our <a data-toggle=\"show-terms-summary\" href=\"#\">Terms & Conditions<\/a>').translate() %><\/p><br\/>\n\t\t<% } %>\n\t\t\t<button class=\"btn btn-primary btn-large btn-place-order\" data-action=\"submit-step\">\n\t\t\t\t<%= options.continueButtonLabel %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t<% } %>\n-->\n\n\n\t<\/div>\n\n\t<% if (!is_promocode_valid && options.stepPosition.toLast > 0) { %>\n\t<footer class=\"checkout-cart-summary-footer accordion\">\n\t\t<div >\n\n\t\t\t<p class=\"checkout-cart-summary-macro-promo-title\"><%= _('Have a Promo Code?').translate() %><\/p>\n\t\t\t<div id=\"promo-code-container\" >\n\t\t\t<p>Enter your promotional code or coupon code below. Limit one per order please.<\/p>\n\t\t\t\t<%= SC.macros.promocodeForm(promocode) %>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/footer>\n\t<% } %>\n\t\n\t\t\t<% if (is_promocode_valid && options.stepPosition.toLast > 0) { %>\n\t<footer class=\"checkout-cart-summary-footer accordion\">\n\t\t<div>\t\t\t\t\t\t\t\n\n\t\t\t<p class=\"checkout-cart-summary-macro-promo-title\"><%= _('Have a Promo Code?').translate() %><\/p>\n\n\t\t\t<p>Enter your promotional code or coupon code below. Limit one per order please.<\/p>\n\t\t\t\n\t\t\t<div class=\"control-group\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-medium promocode\"\n\t\t\t\tvalue=\"<%= promocode.code %>\"\n\t\t\t\treadonly\n\t\t\t\tstyle=\"vertical-align: sub;\"\n\t\t\t>\n\t\t\t<button data-action=\"remove-promocode\" class=\"bgbutton-checkout-apply\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/button>\n\t\t\t<\/div>\n\t\t\t<a href=\"#\" id=\"promocodedetails\">Promo details<\/a>\n\t\t\t<div id=\"promodetails\" style=\"display:none;\"><%=promocode.code%><\/div>\n\t\t\t\n\t\t\t<script>\n\t\t\tjQuery('#promocodedetails').hover(function(){\n        jQuery('#promodetails').show(250);\n},function(){\n        jQuery('#promodetails').hide(250);\n});\n<\/script>\n\t\t\t\n\t\t\t\n\t\t<\/div>\n\t<\/footer>\n\t<% } %>\n\t\n\t<footer class=\"checkout-cart-summary-footer accordion\" style=\"margin-bottom:10px;\">\n\t\t<div id=\"giftcert-code-container\" class=\"giftcert-code-container\">\n\t\t<div class=\"dottedLine\" style=\"color:black; margin-top:-10px; text-align: center;\">.........................................................<\/div>\n\t\t<p class=\"checkout-cart-summary-macro-promo-title\">\n\t\t\t<%=_('Have a Gift Card?').translate() %>\n\t\t<\/p>\n\t\t<p>Enter your promotional code or coupon code below. Limit one per order please.<\/p>\n\t\t\t<%= SC.macros.giftcertForm( giftcertificates ) %>\n\t\t<\/div>\n\t<\/footer>\n\t<footer class=\"checkout-cart-summary-footer accordion\" style=\"background:#f5f5f5;margin-bottom:10px; <%=options.subscription=='T'?'display:none;':'display:block' %> \">\n\t\t<div id=\"keepintouch-code-container\" class=\"keepintouch-code-container\">\n\t\t\t\n\t\t<\/div>\n\t<\/footer>\n\t\n\n\n\n\n\n<div class=\"btncheckout-cart-summary-macro\">\n\t\t<button class=\"bgbutton-checkout\" data-action=\"submit-step\" style=\"width: 243px;\">\n\t\t\t<%= options.continueButtonLabel %>\n\t\t<\/button>\n<% if (options.stepPosition.toLast == 1) { %>\n\t\t<div style=\"margin-top: 15px; font-weight: bold; font-size: 12px; text-align: center;\">Or check out with\n\t\t<input type=\"image\" src=\"img\/paypal_summary.png\" \n\t\tonclick=\"window.location='<%=options.payPalUrl%>'\"\n\t\tclass=\"nlbutton\" style=\"background: #FFF;border: 0px solid #fff;\"><\/div>\n\t\t<%}%>\n<\/div>\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartItemLayover', function(line, view, options) { %>\n<%\nvar item = line.get('item');\nvar newprice = line.get('total')\/line.get('quantity');\nvar newprice_formatted = Math.round(newprice*100)\/100;\noptions = _.extend({ showActions: true}, options || {});\n\nvar url = _(item.get('_url')).fixUrl();\n\nif (url && SC.ENVIRONMENT.siteType === 'ADVANCED')\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t,\tdata: {\n\t\t\ttouchpoint: 'home'\n\t\t,\thashtag: '#'+url\n\t\t}\n\t});\n}\nelse if (url)\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t});\n}\n\n%>\n<style>\n.row-fluid div{\n}\n<\/style>\n<% if (options.showActions) { %>\n\n<tr id=\"<%- line.get('internalid') %>\" class=\"cart-item-cell <%= line.get('internalid') %>\">\n<td>\n\t<div data-type=\"alert-placeholder\">\n\t<% if (item.get('_cartCustomAlert')) {%>\n\t\t<div class=\"alert alert-<%= item.get('_cartCustomAlertType') || 'info' %>\">\n\t\t\t<%= item.get('_cartCustomAlert') %>\n\t\t<\/div>\n\t<% } %>\n\t<\/div>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span3 thumbnail cart-item-thumbnail\">\n\t\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t<img src=\"<%- options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" style=\"width:125px;\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<img src=\"<%- options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" style=\"width:125px;\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t<% } %>\n\t\t<\/div>\n\t\t<\/td>\n\t\t<td>\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t\t\t<%= item.get('_name') %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<%= item.get('_name') %>\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t<\/td>\n\t\t\t<td>\n\t\t\t\t\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%= SC.macros.showItemPrice(item) %><\/small><br\/>\n\t\t\t\t\t<span style=\"color:red\"><%= newprice_formatted.toFixed(2) %><\/span>\n\t\t\t\t<% } else {%> <%= SC.macros.showItemPrice(item) %> <%}%>\n\t\t\t<\/td>\n\t\t\t\t<div class=\"cart-item-options\">\n\t\t\t\t\t<%= item.renderAllOptionSelected() %>\t\n\t\t\t\t<\/div>\n\t\t\t\t<td>\n\t\t\t\t<div class=\"quantity-container\">\n\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t<form action=\"#\" data-action=\"update-quantity\" style=\"margin:0;padding:0;\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"internalid\" id=\"update-internalid-<%= line.get('internalid') %>\" class=\"update-internalid-<%= line.get('internalid') %>\" value=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<% if(item.get('_itemType') !== 'GiftCert') { %>\n\t\t\t\t\t\t\t<input type=\"text\" style=\"text-align:center;\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" class=\"input-mini quantity-<%= line.get('internalid') %>\" value=\"<%- line.get('quantity') %>\" min=\"0\">\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" value=\"1\">\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%=_('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<div class=\"cart-item-actions\" style=\"margin:0;padding:0;border:0;\">\n\t\t\t\t\t<% if (SC.ENVIRONMENT.siteType !== \"STANDARD\") { %>\n\t\t\t\t\t\t<a class=\"btn edit\" href=\"<%- _(item.get('_editUrl')).fixUrl() %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<input type=\"submit\" value=\"Update\" class=\"btnsubmit\" data-action=\"update-quantity\" data-internalid=\"<%- line.get('internalid') %>\" style=\"background: url(img\/update.png) no-repeat left center;\tborder: 0;\tbox-shadow: none;\tpadding-left: 18px;font-size:11px;color: #969696;\">\n\t\t\t\t\t<\/input>\n\t\t\t\t\t<br\/>\n\t\t\t\t\t<button class=\"btn remove\" data-action=\"remove-item\" data-internalid=\"<%- line.get('internalid') %>\" style=\"background: url(img\/remove.png) no-repeat left center;\tborder: 0;\tbox-shadow: none;\tpadding-left: 18px;font-size:11px;color: #969696;\">\n\t\t\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t\t\t<\/button>\n\t\t\t\t\t\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t\t<\/form>\n\t\t\t\t<\/div>\n\t\t\t\t<\/td>\n\t\t\t<\/div>\t\t\t\n<td align=\"center\"><%= line.get('total_formatted') %><\/td>\n<\/tr>\n<%}%>\n<% if (!options.showActions) { %>\n\n<tr style=\"border-top: 2px solid rgb(243, 243, 243);\">\n<td align=\"center\">\n<% var thumbnail = item.get('_thumbnail'); %>\n<img src=\"<%- options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\" style=\"width:75px;\"><\/td>\n<td align=\"left\" style=\"padding-left: 5px; padding-right: 5px;\"><%= item.get('_name') %><\/td>\n\n<td align=\"center\">\n\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%= SC.macros.showItemPrice(item) %><\/small><br\/>\n\t\t\t\t\t<span style=\"color:red\"><%= newprice_formatted.toFixed(2) %><\/span>\n\t\t\t\t<% } else {%> <%= SC.macros.showItemPrice(item) %> <%}%><\/td>\n\t\t\t\t\n<td align=\"center\"><%=line.get('quantity') %><\/td>\n<td align=\"center\"><%= line.get('total_formatted') %>\n<\/tr>\n\n<%}%>\n\n\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('promocodeForm', function( promocode ) {%>\n<% var is_invalid = !!( promocode && promocode.error ); %>\n<form class=\"form-inline\" data-action=\"apply-promocode\" style=\"margin:0;\">\n\t<fieldset>\n\t\t<div class=\"control-group <%= is_invalid ? 'error' : '' %>\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"promocode\"\n\t\t\t\tid=\"promocode\"\n\t\t\t\tclass=\"input-medium promocode\"\n\t\t\t\tvalue=\"<%- promocode && promocode.code %>\"\n\t\t\t\tplaceholder=\"<%- _('Promo code').translate() %>\"\n\t\t\t\t\nstyle=\"width: 125px;\"\n\n\t\t\t>\n\t\t\t<button type=\"submit\" class=\"btn\" style=\"background: #35c6f5;\t\n\t\t\tborder-color: #35c6f5;\n\t\t\tborder-radius: 18.5px;\n\t\t\tborder-style: solid;\n\t\t\tborder-width: 1px;\n\t\t\tcolor: rgb(255, 255, 255);\n\t\t\tcursor: pointer;\n\t\t\twidth: 70px;\n\t\t\ttext-transform: uppercase;\">\n\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t\t<div data-type=\"promocode-error-placeholder\">\n\t\t<% if (is_invalid) {%>\n\t\t\t<%= SC.macros.message(promocode.error, 'error', true) %>\n\t\t<% } %>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartItem', function(line, view, options) { %>\n<%\nvar item = line.get('item');\nvar newprice = line.get('total')\/line.get('quantity');\nvar newprice_formatted = Math.round(newprice*100)\/100;\noptions = _.extend({ showActions: true}, options || {});\n\nvar url = _(item.get('_url')).fixUrl();\n\n\nif (url && SC.ENVIRONMENT.siteType === 'ADVANCED')\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t,\tdata: {\n\t\t\ttouchpoint: 'home'\n\t\t,\thashtag: '#'+url\n\t\t}\n\t});\n}\nelse if (url)\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t});\n}\n\n%>\n<% if (options.showActions) { %>\n<article id=\"<%- line.get('internalid') %>\" class=\"cart-item-cell <%= line.get('internalid') %>\">\n\t<div data-type=\"alert-placeholder\">\n\t<% if (item.get('_cartCustomAlert')) {%>\n\t\t<div class=\"alert alert-<%= item.get('_cartCustomAlertType') || 'info' %>\">\n\t\t\t<%= item.get('_cartCustomAlert') %>\n\t\t<\/div>\n\t<% } %>\n\t<\/div>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span3 thumbnail cart-item-thumbnail\">\n\t\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t<% } %>\n\t\t<\/div>\n\t\t<div class=\"span9 details\">\n\t\t\t<div class=\"span9 cart-item-details\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t\t<a <%= link_attributes %>>\n\t\t\t\t\t\t\t<%= item.get('_name') %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<%= item.get('_name') %>\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"lead lead-small price\">\n\t\t\t\t\t<%= SC.macros.showItemPrice(item) %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"sku\">\n\t\t\t\t\t<%= _('SKU: #$(0)').translate( item.get('_sku') ) %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"cart-item-options\">\n\t\t\t\t\t<%= item.renderAllOptionSelected() %>\t\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"quantity-container\">\n\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t<form action=\"#\" data-action=\"update-quantity\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"internalid\" id=\"update-internalid-<%= line.get('internalid') %>\" class=\"update-internalid-<%= line.get('internalid') %>\" value=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<% if(item.get('_itemType') !== 'GiftCert') { %>\n\t\t\t\t\t\t\t<input type=\"number\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" class=\"input-mini quantity-<%= line.get('internalid') %>\" value=\"<%- line.get('quantity') %>\" min=\"0\">\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" value=\"1\">\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\n\t\t\t\t\t<\/form>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%=_('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\t\t\t\n\t\t\t\n\t\t\t<div class=\"span3 amount\">\n\t\t\t\t<%= line.get('total_formatted') %>\n\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%=  line.get('amount_formatted') %><\/small>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t<div class=\"clearfix\"><\/div>\n\t\t\t<div class=\"text-right cart-item-stock-info\">\n\t\t\t\t<%= SC.macros.itemDetailsStock(item.getStockInfo()) %>\n\t\t\t<\/div>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<div class=\"cart-item-actions\">\n\t\t\t\t\t<% if (SC.ENVIRONMENT.siteType !== \"STANDARD\") { %>\n\t\t\t\t\t\t<a class=\"btn edit\" href=\"<%- _(item.get('_editUrl')).fixUrl() %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<button class=\"btn remove\" data-action=\"remove-item\" data-internalid=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t\t\t<\/button>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<\/div>\n<\/article>\n<%}%>\n<% if (!options.showActions) { %>\n\n<tr style=\"border-top: 2px solid rgb(243, 243, 243);\">\n<td align=\"left\">\n<% var thumbnail = item.get('_thumbnail'); %>\n<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\" style=\"width: 150px; margin-left: -10px;\"><\/td>\n<td align=\"left\" style=\"padding-left: 5px; padding-right: 5px; color: #616161;\"><%= item.get('_name') %><\/td>\n\n<td align=\"center\" style=\"color: #616161;\">\n\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%= SC.macros.showItemPrice(item) %><\/small><br\/>\n\t\t\t\t\t<span style=\"color:red\"><%= newprice_formatted.toFixed(2) %><\/span>\n\t\t\t\t<% } else {%> <%= SC.macros.showItemPrice(item) %> <%}%><\/td>\n\t\t\t\t\n<td align=\"center\" style=\"color: #616161;\"><%=line.get('quantity') %><\/td>\n<td align=\"center\" style=\"color: #616161;\"><%= line.get('total_formatted') %>\n<\/tr>\n\n<%}%>\n\n\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionDefault', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: <%= value.label %> \n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartSummary', function (cart, siteSettings, options) { %>\n<%\n\toptions = _.extend({ showShipto: true, showLabelsAsEstimated: true}, options || {});\n\tconsole.log(\"Shopping cart summary sm\"); console.log(cart);\n\tvar summary = cart.get('summary')\n\t,\tpromocode = cart.get('promocode')\n\t,\titem_count = _.reduce(cart.get('lines').pluck('quantity'), function (memo, quantity) { return memo + (parseFloat(quantity) || 1); }, 0)\n\t,\tshipping_address = cart.get('addresses').get(cart.get('shipaddress')) || new Backbone.Model()\n\t,\tshow_total = summary.subtotal !== summary.total || options.alwaysShowTotal\n\t,\thas_estimated_shipping = summary.estimatedshipping\n\t,\tis_promocode_valid = promocode && promocode.isvalid\n\t,\tdefault_county = shipping_address.get('country') || siteSettings.defaultshipcountry\n\t,\tgiftcertificates = cart.get('paymentmethods').where({type: 'giftcertificate'}) || []\n\t\/\/\tThird party checkouts\n\t,\tcheckout = options.checkout || {}\n\t,\tpaypal_express = checkout.paypalexpress;\n%>\n<div class=\"well shopping-cart-summary\">\n\t<header class=\"well-header\">\n\t\t<h2 style=\"color: rgb(243, 122, 49);\nfont-family: 'OmnesMediumRegular';\nfont-size: 14px;\nfont-weight: 700;\nmargin-bottom: 0px;\nmargin-left: 0px;\nmargin-right: 0px;\nmargin-top: 0px;\npadding-bottom: 6px;\ntext-align: left;\ntext-transform: uppercase;\">\n\t\t\t<%= _('Order Summary').translate() %>\n\t\t<\/h2>\n\t<\/header>\n\t\n\t<div class=\"well-body accordion\">\n\t\t<div class=\"well-section cart-summary-subtotal\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right\"><%= summary.subtotal_formatted %><\/span>\n\t\t\t\t<%= _('Subtotal ($(0) $(1))').translate( item_count, item_count === 1 ? _('item').translate() : _('items').translate() ) %>\n\t\t\t<\/p>\n\t\t\t<% if (!show_total) { %>\n\t\t\t\t<p class=\"small\">\n\t\t\t\t\t<%= _('(Subtotal does not include shipping or tax)').translate() %>\n\t\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<\/div>\n\n\t\t<% if (is_promocode_valid || summary.giftcertapplied) { %>\n\n\t\t\t<% if (is_promocode_valid) { %>\n\t\t\t\t<div class=\"well-section cart-summary-promocode-applied\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong class=\"lead-price pull-right\"><%= summary.discountrate_formatted %><\/strong>\n\t\t\t\t\t\t<%= _('Promo Code Applied').translate() %>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<p class=\"text-success\">\n\t\t\t\t\t\t#<%= promocode.code %> - <%= _('Instant Rebate').translate() %>\n\t\t\t\t\t\t<a href=\"#\" data-action=\"remove-promocode\">\n\t\t\t\t\t\t\t<i class=\"icon-remove\"><\/i>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\n\t\t\t<% if (summary.discounttotal) { %>\n\t\t\t\t<div class=\"well-section cart-summary-discount-applied\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span class=\"pull-right\"><%= summary.discounttotal_formatted %><\/span>\n\t\t\t\t\t\t<%= _('Discount Total').translate() %>\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\n\t\t\t<% if (summary.giftcertapplied) { %>\n\t\t\t\t<div class=\"well-section cart-summary-giftcertificate-applied\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<%= _('Gift Certificates Applied ($(0))').translate(giftcertificates.length) %>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<% _.each(giftcertificates, function(giftCertificate) { %>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class=\"pull-right\"><%= _('-$(0)').translate(giftCertificate.get('giftcertificate').amountapplied_formatted) %><\/span>\n\t\t\t\t\t\t\t<span title=\"<%= giftCertificate.get('giftcertificate').code %>\"><%= SC.macros.formatPaymentMethod(giftCertificate) %><\/span>\n\t\t\t\t\t\t<\/p>\n\t\t\t\t\t<% }); %>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<% } %>\n\n\t\t<% if (summary.estimatedshipping || shipping_address.get('zip')) { %>\n\t\t\t<div class=\"well-section cart-summary-shipping-cost-applied\">\n\t\t\t\t<% if (options.showShipto && shipping_address.get('zip')) { %>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<%= _('Ship to:').translate() %>\n\t\t\t\t\t\t<span class=\"text-success\"><%= shipping_address.get('zip') %><\/span>\n\t\t\t\t\t\t<a href=\"#\" data-action=\"remove-shipping-address\">\n\t\t\t\t\t\t\t<i class=\"icon-remove\"><\/i>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% } %>\n\t\t\t\t<p>\n\t\t\t\t\t<span class=\"pull-right\"><%= _.formatCurrency(summary.taxtotal + summary.shippingcost) %><\/span>\n\t\t\t\t\t<%= options.showLabelsAsEstimated ? _('Estimated Tax & Shipping').translate() : _('Tax & Shipping').translate() %>\n\t\t\t\t<\/p>\n\t\t\t\t<p>\n\t\t\t\t\t<span class=\"pull-right\"><%= _.formatCurrency(summary.handlingcost) %><\/span>\n\t\t\t\t\t<%= _('Handling').translate() %>\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t<% } %>\n\n\t\t<% if (show_total) { %>\n\t\t\t<div class=\"well-section cart-summary-total\">\n\t\t\t\t<p class=\"no-margin-bottom strong\">\n\t\t\t\t\t<span class=\"pull-right\"><%= summary.total_formatted %><\/span>\n\t\t\t\t\t<%= options.showLabelsAsEstimated ? _('Estimated Total').translate() : _('Total').translate() %>\n\t\t\t\t<\/p>\n\t\t\t\t<% if (!(summary.estimatedshipping || shipping_address.get('zip'))) { %>\n\t\t\t\t\t<p class=\"no-margin-bottom small\">\n\t\t\t\t\t\t<%= _('(Total does not include shipping or tax)').translate() %>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t<% } %>\n\n\t\t<% if (!shipping_address.get('zip')) { %>\n\t\t\t<div class=\"collapsible well-section cart-summary-shipping-section\">\n\t\t\t\t<p class=\"collapser collapsed\" data-toggle=\"collapse\" data-target=\"#estimate-shipping-form\">\n\t\t\t\t\t<%= _('Estimate Tax & Shipping').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>Shipping Estimator<\/b><br>Shipping fees are based on your shipping location. Please enter your information to view estimated shipping costs.').translate() %>\" class=\"icon-question-sign\"><\/i>\n\t\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t<\/p>\n\t\t\t\t<div id=\"estimate-shipping-form\" class=\"collapse estimate-shipping-form\">\n\t\t\t\t\t<form action=\"#\" data-action=\"estimate-tax-ship\">\n\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t<% if (_.size(siteSettings.countries) > 1) { %>\n\t\t\t\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t\t\t\t<label for=\"country\"><%= _('Select Country').translate() %><\/label>\n\t\t\t\t\t\t\t\t\t<select name=\"country\" id=\"country\" class=\"input-medium country\" data-action=\"estimate-tax-ship-country\">\n\t\t\t\t\t\t\t\t\t\t<option value=\"\"><\/option>\n\t\t\t\t\t\t\t\t\t\t<% _.each(siteSettings.countries, function (item, index) { %>\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"<%= item.code %>\" <%= item.code === default_county ? 'selected' : '' %>><%= item.name %><\/option>\n\t\t\t\t\t\t\t\t\t\t<% }) %>\n\t\t\t\t\t\t\t\t\t<\/select>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t\t<span><%= _('Ship available only to $(0)').translate(_.toArray(siteSettings.countries)[0].name) %><\/span>\n\t\t\t\t\t\t\t\t<input name=\"country\" id=\"country\" class=\"country\" value=\"<%= _.toArray(siteSettings.countries)[0].code %>\" type=\"hidden\" \/>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t\t\t<label for=\"zip\">\n\t\t\t\t\t\t\t\t\t<%= default_county === 'US' ? _('Ship to the following zip code').translate() : _('Ship to the following postal code').translate() %>\n\t\t\t\t\t\t\t\t<\/label>\n\t\t\t\t\t\t\t\t<div class=\"form-inline\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"zip\" id=\"zip\" class=\"input-small zip\" value=\"<%= shipping_address.get('zip') || '' %>\" placeholder=\"<%= default_county === 'US' ?  _('Zip code').translate() : _('Postal code').translate() %>\">\n\t\t\t\t\t\t\t\t\t<button class=\"btn\"><%= _('Estimate').translate() %><\/button>\n\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<\/fieldset>\n\t\t\t\t\t<\/form>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<% } %>\n\n\t\t<% if (!is_promocode_valid) { %>\n\t\t\t<div class=\"collapsible well-section cart-summary-promocode-section\">\n\t\t\t\t<p class=\"collapser collapsed\" data-target=\"#promo-code-container\" data-toggle=\"collapse\">\t\t\t\t\t\n\t\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t\t<%= _('Have a Promo Code?').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>Promo Code<\/b><br>To redeem a promo code, simply enter your information and we will apply the offer to your purchase during checkout.').translate() %>\" class=\"icon-question-sign\"><\/i>\t\t\t\t\t\n\t\t\t\t<\/p>\n\t\t\t\t<div id=\"promo-code-container\" class=\"collapse promo-code-container\">\n\t\t\t\t\t<%= SC.macros.promocodeForm( promocode ) %>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<% } %>\n\t<\/div>\n\t\n\t<% if (options.showActions) { %>\n\t\t<div class=\"well-footer shopping-cart-action-buttons\">\n\t\t\t<a id=\"btn-proceed-checkout\" class=\"btn btn-large btn-block btn-primary btn-proceed-checkout\" href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\">\n\t\t\t\t<%= _('Proceed to Checkout').translate() %>\n\t\t\t<\/a>\n\t\t\t\n\t\t\t<% if (paypal_express.available === 'T') { %>\n\t\t\t\t<a href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\" data-parameters=\"paypalexpress=T\">\n\t\t\t\t\t<img src=\"<%= paypal_express.imageurl %>\" alt=\"PayPal Express\" width=\"145px\" height=\"42px\">\n\t\t\t\t<\/a>\n\t\t\t<% } %>\n\n\t\t\t<a class=\"btn continue-shopping\" href=\"#\" data-touchpoint=\"home\" data-hashtag=\"#<%= _(options.continueURL).fixUrl() %>\">\n\t\t\t\t<%= _('Continue Shopping').translate() %>\n\t\t\t<\/a>\n\t\t<\/div>\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionColor', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: \n\t<% var color = option.colors && (option.colors[value.label] || option.colors.defaultColor); %>\n\t<span \n\t\t<% if (!_.isObject(color)) { %>\n\t\t\tstyle=\"background: <%= color %>\"\n\t\t<% } %>\n\t\tclass=\"cart-color-tile\">\n\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t<img \n\t\t\t\t\tsrc=\"<%- color.src %>\" \n\t\t\t\t\talt=\"<%- value.label %>\"\n\t\t\t\t\twidth=\"<%- color.width || '' %>\" \n\t\t\t\t\theight=\"<%- color.height || '' %>\">\n\t\t\t<% } %>\t\n\t<\/span> <%= value.label %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('giftcertForm', function( giftcert ) {%>\n<form id=\"gift-certificate-form\" class=\"gift-certificate-form\" data-action=\"apply-giftcert\" >\n<div style=\"width:100%;height: auto;\"><\/div>\n\t<fieldset>\n\t\t<div class=\"control-group\">\n\t\t\t\n\t\t\t<input type=\"text\" name=\"code\" id=\"code\" class=\"input-medium\" value=\"\" placeholder=\"Gift card\" style=\"width: 125px;\">\n\t\t\t\t<button type=\"submit\" class=\"btn\" style=\"background: #35c6f5;\n\t\t\t\t\tborder-color: #35c6f5;\n\t\t\t\t\tborder-radius: 18.5px;\n\t\t\t\t\tborder-style: solid;\n\t\t\t\t\tborder-width: 1px;\n\t\t\t\t\tcolor: rgb(255, 255, 255);\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\twidth: 70px;\n\t\t\t\t\ttext-transform: uppercase;\">\n\t\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t\t<\/button>\n\t\t\t\n\t\t<\/div>\n\t\t<div data-type=\"giftcertificate-error-placeholder\">\n\t\t\t\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n<%if(giftcert.length){%>\n<table class=\"table\" style=\"font-size: 11px; color: grey; margin-left:-10px; margin-bottom:0\" width=\"50\">\n\t<tr>\n\t\t<td>\n\t\t\t<b><%= _('Gift Card').translate() %><\/b>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<b><%= _('Applied').translate() %><\/b>\n\t\t<\/td>\t\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<b><%= _('Remaining balance').translate() %><\/b>\n\t\t<\/td>\t\n\t\t<td>\n\t\t\t&nbsp;\n\t\t<\/td>\n\t<\/tr>\n\n<%  _.each(giftcert, function (giftCertificate) { %>\n\t<% var giftcertificate = giftCertificate.get('giftcertificate') %>\n\t\n\t<tr>\n\t\t<td>\n\t\t\t<%= SC.macros.formatPaymentMethod(giftCertificate) %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<%= _('$(0)').translate(giftcertificate.amountapplied_formatted) %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<%= _('$(0)').translate(giftcertificate.amountremaining_formatted) %>\n\t\t<\/td>\t\t\n\t\t<td class=\"right-aligned\">\n\t\t\t<a href=\"#\" data-action=\"remove-giftcert\" data-id=\"<%- giftcertificate.code %>\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/a>\n\t\t<\/td>\n\t<\/tr>\n<% }) %>\n<\/table>\n<%}%>\n<div data-type=\"alert-placeholder-gif-certificate\"><\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('checkoutCartSummary', function (options) { %>\n\n<% console.log(\"Shopping cart summary m\"); console.log(options.cart);\n\tvar cart = options.cart\n\t,\tsummary = cart.get('summary')\n\t,\tpromocode = cart.get('promocode')\n\t,\titem_count = _.reduce(cart.get('lines').pluck('quantity'), function (memo, quantity) { return memo + (parseFloat(quantity) || 1); }, 0)\n\t,\tis_promocode_valid = promocode && promocode.isvalid\n\t,\tgiftcertificates = cart.get('paymentmethods').where({type: 'giftcertificate'}) || [];\n\tvar sum = 0;\n\tvar view = {};\nvar domainSum = 0;\n\tvar cleanSubtotal = 0;\n\tfor( var i=0;i< cart.get('lines').models.length;i++) {\n\t\tcleanSubtotal += cart.get('lines').models[i].get('item').get('quantity') * cart.get('lines').models[i].get('item').get('_comparePriceAgainst') \n\t}\n%>\n<style>\n.cart-layover{\n\tposition:fixed;\n\tleft:25%;\n\ttop:10px;\n\twidth: 620px;\n\tmax-height: 88%;\n\tbackground: white;\n    z-index:999;\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tbackground-clip: padding-box;\n\tbackground-color: #fff;\n\tborder: 1px solid #999;\n\tborder: 1px solid rgba(0,0,0,0.2);\n\tborder-radius: 6px;\n\tbox-shadow: 0 3px 9px rgba(0,0,0,0.5);\n\tmoz-background-clip: padding-box;\n\tmoz-box-shadow: 0 3px 9px rgba(0,0,0,0.5);\n\toutline: 0;\n\twebkit-background-clip: padding-box;\n\twebkit-box-shadow: 0 3px 9px rgba(0,0,0,0.5);\n\tpadding:25px;\n}\n.close{\n\t\n\tfont-size: 18px;\n\tline-height: 18px;\n\tcolor: rgba(255, 255, 255, 0.4);\n\tbackground: #f27337;\n\tposition: relative;\n\tfloat: right;\n\tright: 10px;\n\ttop: 10px;\n\tcursor: pointer;\n}\n.cart-items-table td{\ntext-align:center;\n}\n.savelayover{\n\tborder: 0;\n\tbackground: 0;\n\tfont-size: 13px;\n\tcolor: #337ac1;\n\ttext-decoration: underline;\n}\n\n<\/style>\n<script>\nvar platf = navigator.platform;\nif(platf.indexOf('iPad')>-1 || platf.indexOf('iPhone')>-1 || platf.indexOf('iPod')>-1) \n{\n     jQuery(\".cart-layover\").css(\"left\", \"5%\"); \n};\n<\/script>\n<script>\n\tjQuery('.keep-in-touch-module').clone().show().appendTo('#keepintouch-code-container');\n\t'<%=options.subscription%>'=='T'?jQuery('.keep-in-touch-checkbox').prop('checked',true):jQuery('.keep-in-touch-checkbox').prop('checked',false);\n<\/script>\n<div class=\"cart-layover\" style=\"display:none;\">\n<button type=\"button\" class=\"close\" onclick=\"jQuery('.cart-layover').hide()\">\u00d7<\/button>\n<h1 style=\"color: rgb(243, 122, 49); background: url('img\/cart.png') no-repeat;padding-left: 48px;margin-top: 10px;font-size: 38px;font-family: 'OmnesLightRegular';font-weight: normal;\">Shoppping Cart<\/h1>\n<div class=\"listheadercustom\" style=\"color: #969696;padding: 20px 0px 10px 0px;border-bottom: solid 1px black;\">ITEMS IN YOUR CART<\/div>\n<table id=\"cartitemstable\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"width:100%;\">\n<tr>\n<th style=\"height:45px;\">Item<\/th><th>Description<\/th><th>Price<\/th><th>Qty<\/th><th>Total<\/th>\n<\/tr>\n<% cart.get('lines').each(function (lines, index) { %>\n\n\t\t\t<%= SC.macros.shoppingCartItemLayover(lines, view, {\n\t\t\t\tshowActions:true,\n\t\t\t\tapplication:options.application\n\t\t\t}) %>\n\t\t<% }) %>\n\n<\/table>\n<button type=\"button\" class=\"savelayover\" onclick=\"jQuery('.cart-layover').hide()\">Save<\/button>\n<\/div>\n\n\n<div class=\"checkout-cart-summary\">\n<div class=\"btncheckout-cart-summary-macro\">\n\t\t<button class=\"bgbutton-checkout\" data-action=\"submit-step\" style=\"width: 243px;\">\n\t\t\t<%= options.continueButtonLabel %>\n\t\t<\/button>\n<\/div><div class=\"order-summary-block\">\n\t<header class=\"checkout-cart-summary-header\">\n\t\t<% if (options.stepPosition.toLast > 0) { %>\n\t\t\t<a href=\"#\" class=\"btn btn-link btn-edit-cart pull-right\" onclick=\"jQuery('.cart-layover').show()\" style=\"color:white; text-decoration: underline;\">\n\t\t\t\t<%= _('edit cart').translate() %>\n\t\t\t<\/a>\n\t\t<% } %>\n\n\t\t<h2 class=\"checkout-cart-summary-macro-title\" style=\"color:white;\">\n\t\t\t<%= _('Order Summary').translate() %>\n\t\t<\/h2>\n\t<\/header>\n\t<div class=\"dottedLine\" style=\"color:white; margin-top:-10px; margin-bottom: 21px; text-align: center;\">.........................................................<\/div>\n\t<div class=\"checkout-cart-summary-body\">\n\t\t<%\/\/ if (!options.hideItems) { %>\n\t\t<ul class=\"cart-summary-items checkout-summary-items\" style=\"display:none;\">\n\t\t<%\n\t\t\tvar thumbnail = ''\n\t\t\t,\titem = null;\n\t\t%>\n\t\t<% cart.get('lines').each(function (line) { %>\n\t\t\t<%\n\t\t\t\tsum += line.get('amount') - line.get('total');\ndomainSum += line.get('item').attributes._comparePriceAgainst * line.get('item').attributes.quantity - line.get('amount');\n\t\t\t\titem = line.get('item');\n\t\t\t\tthumbnail = item.get('_thumbnail');\n\t\t\t%>\n\t\t\t<li class=\"cart-summary-item-cell checkout-summary-item-cell\">\n\t\t\t\t<div class=\"row-fluid\" style=\"color:white;\">\n\t\t\t\t\t<div class=\"span3 thumbnail checkout-summary-item-thumbnail\">\n\t\t\t\t\t\t<img src=\"<%- options.application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"span9 cart-summary-item-details checkout-summary-item-details\" style=\"color:white;\">\n\t\t\t\t\t\t<div class=\"pull-right cart-summary-item-total\">\n\t\t\t\t\t\t\t<%= line.get('total_formatted') %>\n\t\t\t\t\t\t\t<% if (line.get('amount') > line.get('total')) {%>\n\t\t\t\t\t\t\t\t<small class=\"muted crossed cart-summary-item-amount\">\n\t\t\t\t\t\t\t\t\t<%=  line.get('amount_formatted') %>\n\t\t\t\t\t\t\t\t<\/small>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div style=\"color:white;\">\n\t\t\t\t\t\t\t<strong class=\"cart-summary-item-name\"><%= item.get('_name') %><\/strong>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class=\"cart-summary-item-quantity\" style=\"color:white;\">\n\t\t\t\t\t\t\t<%= _('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class=\"cart-summary-item-price\" style=\"color:white;\">\n\t\t\t\t\t\t\t<%= SC.macros.showItemPrice(line.get('item')) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<%= \/* Renders the selected options for the item *\/ \n\t\t\t\t\t\t\titem.renderAllOptionSelected() %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t<% }) %>\n\t\t<\/ul>\n\t\t<%\/\/ } %>\n\t\t<div class=\"cart-summary-subtotal\" style=\"color:white;\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right cart-summary-subtotal-formatted\">\n\t\t\t\t\t$<%=parseFloat(cleanSubtotal).toFixed(2)%>\n\t\t\t\t<\/span>\n\t\t\t\t<span class=\"cart-summary-subtotal-label\">\n\t\t\t\t\t<%= _('Subtotal ($(0) $(1))').translate(item_count, item_count === 1 ? _('item').translate() : _('items').translate()) %>\n\t\t\t\t<\/span>\n\t\t\t<\/p>\n\t\t<\/div>\n\n\t\t\n\n\t\t<div class=\"cart-summary-shipping-cost-applied\" style=\"color:white;\">\n\n<% if(domainSum>0){ %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t-$<%= domainSum.toFixed(2) %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Discount').translate() %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\n\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t<%= summary.shippingcost_formatted == \"$0.00\" ? '-' : summary.shippingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Shipping').translate() %>\n\t\t\t<\/p>\n\n\t\t\t<% if (summary.handlingcost) { %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-handling-cost-formatted\">\n\t\t\t\t\t<%= summary.handlingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Handling').translate() %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-tax-total-formatted\">\n\t\t\t\t\t<%= summary.taxtotal_formatted==\"$0.00\" ? '-' : summary.taxtotal_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Tax').translate() %>\n\t\t\t<\/p>\n\t\t\t\n\t\t\t\t\t\t<% if(sum>0){ %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t-$<%= sum.toFixed(2) %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Promo').translate() %> #<%= promocode.code %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<\/div><\/div>\n\n\t\t<% if (is_promocode_valid || summary.giftcertapplied) { %>\n\t\t\t<% if (is_promocode_valid && summary.discounttotal) { %>\n\t\t\t<div class=\"checkout-cart-summary-body\" style=\"color:white\">\n\t\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t-<%=summary.discounttotal_formatted%>\n\t\t\t\t<\/span>\n\t\t\t\t\t<%= _('Promo').translate() %> #<%= promocode.code %>\n\t\t\t\t\t\t\t\t\t\t<% if (options.stepPosition.toLast > 0) { %>\n\t\t\t\t\t<!--\t<a href=\"#\" data-action=\"remove-promocode\">\n\t\t\t\t\t\t\t<i class=\"icon-remove\"><\/i>\n\t\t\t\t\t\t<\/a>\t-->\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t\t\n\t\t\t<% if (summary.giftcertapplied) { %>\n\t\t\t<div class=\"checkout-cart-summary-body\" style=\"color:white;\">\n\t\t\t\t<p>\n\t\t\t\t<b>\t<%= _('Gift Certificates Applied ($(0))').translate(giftcertificates.length) %><\/b>\n\t\t\t\t<\/p>\n\t\t\t\t<% _.each(giftcertificates, function (giftCertificate) { %>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span class=\"pull-right\">\n\t\t\t\t\t\t\t<%= _('-$(0)').translate(giftCertificate.get('giftcertificate').amountapplied_formatted) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span title=\"<%- giftCertificate.get('giftcertificate').code %>\">\n\t\t\t\t\t\t\tGift Card: <%= SC.macros.formatPaymentMethod(giftCertificate) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% }); %>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<% } %>\n\t\t<div class=\"checkout-cart-summary-macro-total\" style=\"background-color:#f5631a; color: white; margin:0;\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right cart-summary-total-formatted\">\n\t\t\t\t\t<%= summary.total_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Total').translate() %>\n\t\t\t<\/p>\n\t\t<\/div>\n<!--\n\t<% if (options.stepPosition.toLast === 1) { %>\n\t\t<div>\n\t\t<% if (SC.ENVIRONMENT.siteSettings.checkout.requiretermsandconditions === 'T') { %>\n\t\t\t<p><%= _('By placing your order, you are agree to our <a data-toggle=\"show-terms-summary\" href=\"#\">Terms & Conditions<\/a>').translate() %><\/p><br\/>\n\t\t<% } %>\n\t\t\t<button class=\"btn btn-primary btn-large btn-place-order\" data-action=\"submit-step\">\n\t\t\t\t<%= options.continueButtonLabel %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t<% } %>\n-->\n\n\n\t<\/div>\n\n\t<% if (!is_promocode_valid && options.stepPosition.toLast > 0) { %>\n\t<footer class=\"checkout-cart-summary-footer accordion\">\n\t\t<div >\n\n\t\t\t<p class=\"checkout-cart-summary-macro-promo-title\"><%= _('Have a Promo Code?').translate() %><\/p>\n\t\t\t<div id=\"promo-code-container\" >\n\t\t\t<p>Enter your promotional code or coupon code below. Limit one per order please.<\/p>\n\t\t\t\t<%= SC.macros.promocodeForm(promocode) %>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/footer>\n\t<% } %>\n\t\n\t\t\t<% if (is_promocode_valid && options.stepPosition.toLast > 0) { %>\n\t<footer class=\"checkout-cart-summary-footer accordion\">\n\t\t<div>\t\t\t\t\t\t\t\n\n\t\t\t<p class=\"checkout-cart-summary-macro-promo-title\"><%= _('Have a Promo Code?').translate() %><\/p>\n\n\t\t\t<p>Enter your promotional code or coupon code below. Limit one per order please.<\/p>\n\t\t\t\n\t\t\t<div class=\"control-group\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-medium promocode\"\n\t\t\t\tvalue=\"<%= promocode.code %>\"\n\t\t\t\treadonly\n\t\t\t\tstyle=\"vertical-align: sub;\"\n\t\t\t>\n\t\t\t<button data-action=\"remove-promocode\" class=\"bgbutton-checkout-apply\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/button>\n\t\t\t<\/div>\n\t\t\t<a href=\"#\" id=\"promocodedetails\">Promo details<\/a>\n\t\t\t<div id=\"promodetails\" style=\"display:none;\"><%=promocode.code%><\/div>\n\t\t\t\n\t\t\t<script>\n\t\t\tjQuery('#promocodedetails').hover(function(){\n        jQuery('#promodetails').show(250);\n},function(){\n        jQuery('#promodetails').hide(250);\n});\n<\/script>\n\t\t\t\n\t\t\t\n\t\t<\/div>\n\t<\/footer>\n\t<% } %>\n\t\n\t<footer class=\"checkout-cart-summary-footer accordion\" style=\"margin-bottom:10px;\">\n\t\t<div id=\"giftcert-code-container\" class=\"giftcert-code-container\">\n\t\t<div class=\"dottedLine\" style=\"color:black; margin-top:-10px; text-align: center;\">.........................................................<\/div>\n\t\t<p class=\"checkout-cart-summary-macro-promo-title\">\n\t\t\t<%=_('Have a Gift Card?').translate() %>\n\t\t<\/p>\n\t\t<p>Enter your promotional code or coupon code below. Limit one per order please.<\/p>\n\t\t\t<%= SC.macros.giftcertForm( giftcertificates ) %>\n\t\t<\/div>\n\t<\/footer>\n\t<footer class=\"checkout-cart-summary-footer accordion\" style=\"background:#f5f5f5;margin-bottom:10px; <%=options.subscription=='T'?'display:none;':'display:block' %> \">\n\t\t<div id=\"keepintouch-code-container\" class=\"keepintouch-code-container\">\n\t\t\t\n\t\t<\/div>\n\t<\/footer>\n\t\n\n\n\n\n\n<div class=\"btncheckout-cart-summary-macro\">\n\t\t<button class=\"bgbutton-checkout\" data-action=\"submit-step\" style=\"width: 243px;\">\n\t\t\t<%= options.continueButtonLabel %>\n\t\t<\/button>\n<% if (options.stepPosition.toLast == 1) { %>\n\t\t<div style=\"margin-top: 15px; font-weight: bold; font-size: 12px; text-align: center;\">Or check out with\n\t\t<input type=\"image\" src=\"img\/paypal_summary.png\" \n\t\tonclick=\"window.location='<%=options.payPalUrl%>'\"\n\t\tclass=\"nlbutton\" style=\"background: #FFF;border: 0px solid #fff;\"><\/div>\n\t\t<%}%>\n<\/div>\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('wizadStepNavigation', function (step_groups) { %>\n<ul class=\"wizard-step-groups\">\n<% var index_counter = 0; %>\n\n<% _.each(step_groups, function (step_group) { %>\n\t<%\n\t\tvar list_item_class = 'wizard-step-link';\n\t\tif (step_group.state === 'present')\n\t\t{\n\t\t\tlist_item_class += ' active';\n\t\t}\n\t\telse if (step_group.state === 'future')\n\t\t{\n\t\t\tlist_item_class += ' disabled';\t\n\t\t}\n\t\t\n\t\tif (step_group.hasErrors())\n\t\t{\n\t\t\tlist_item_class += ' error';\n\t\t}\n\t%>\n\n\t<% if (index_counter) { %>\n\t\t<li>  <div  class=\"divider divider-<%= index_counter %>\"><\/div><\/li>\n\t<% } %>\n<% if (index_counter != 3) {%>\n\t<li class=\"<%- list_item_class %> wizard-step-<%= index_counter %>\">\t\n\t\t<a href=\"<%- step_group.state === 'future' ? Backbone.history.fragment : step_group.url + '?force=true' %>\">\n\t\t\t\n\t\t\t\t<div class=\"stepN-<%= ++index_counter %>\"><\/div>\n\n\t\t\t<%= step_group.name %>\n\t\t<\/a>\n\t<\/li>\n<% } %>\n<% }) %>\n<\/ul>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcard', function (creditcard, options) { %>\n<%\n\n\n\tvar payment_name = creditcard.get('paymentmethod').name\n\t,\texpiration_month = creditcard.get('expmonth')\n\t,\ticons = options.icons;\n\tconsole.log(creditcard.get('internalid'));\n%>\n<\/style>\n<article class=\"creditcard\" >\n\n\t\n\t<% if (options.showSecurityCodeForm) { %>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span6\">\n\t<% } %>\n\t\t\t<input type=\"radio\" name=\"creditcardradio\" style=\"float:left; margin-right:5px;\" <%=options.stopSelect ? 'data-action=\"setSelectedCreditcardId\"' : 'data-action=\"select-creditcard\"'%> data-id=\"<%- creditcard.get('internalid') %>\" <%=creditcard.get('internalid') == options.selectedCreditcard ? 'checked=\"checked\"' : ''%>\/>\n\t\t\t<span>\n\t\t\t<div style=\"float:left;\">\n\t\t\t<% if (payment_name in icons) { %>\n\t\t\t\t<img class=\"credit-card-icon\" src=\"<%- icons[payment_name] %>\" alt=\"<%- payment_name %>\">\n\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t<div style=\"float:left; padding-left: 10px;\">\n\t\t\t<h4 class=\"summary-header\">\n\t\t\t\t<%= payment_name %> ************<%= creditcard.get('ccnumber').replace(\/\\*\/g, '')%>\n\t\t\t<\/h4>\n\t\t\t<!--<p style=\"margin:0;\"> \n\t\t\t\t<%= (expiration_month < 10 ? '0' : '') + expiration_month + '\/' + creditcard.get('expyear') %>\n\t\t\t<\/p>-->\n\t\t\t<\/div>\n\t\t\t<\/span>\n\t\t\t<% if (options.showDefaults) { %>\n\t\t\t<p>\n\t\t\t\t<% if (creditcard.get('ccdefault') === 'T') { %>\n\t\t\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t\t\t<%= _('Default Credit Card').translate() %>\n\t\t\t\t<% } %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<% if (options.showSecurityCodeForm) { %>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\n<% if(creditcard.get('internalid') == options.selectedCreditcard && window.location.hash.indexOf(\"billing\")>-1){ %>\n \t\t<%= SC.macros.creditcardSecurityNumberForm({\n\t\t\terror: undefined\n           ,   value:  options.cvcvalue\n           ,\thidehelp: false\n\t\t}) %>\n<% } %>\n\t<% if (options.showActions) { %>\n\t\t<div style=\"clear: both;\"><\/div>\n\t\t<p class=\"actions\" style=\"margin:0\" >\n\t<% if (options.showSelect) { %>\n\n\t<% } %><%if(options.step != \"review\"){%>\n\t\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/<%= creditcard.get('internalid') %>\" data-toggle=\"show-in-modal\" style=\"display: none;\">\n\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t<\/a>\n\t\t\t<btn class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- creditcard.get('internalid') %>\">\n\t\t\t\t<%= _('Delete Card').translate() %>\n\t\t\t<\/btn>\n\t\t\t<%}%>\n\t\t<\/p>\n\t<% } %>\n\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardSecurityNumberForm', function (options) { %>\n<% options = options || {}; console.log(\"ccoptions\");console.log(options); \/*console.log(jQuery.cookie(\"cvc\"));*\/%>\n\n<%    var result;        var nameEQ = \"cvc\" + \"=\";\n            var ca = document.cookie.split(';');\n            for (var i = 0; i < ca.length; i++) {\n                var c = ca[i];\n                while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n                if (c.indexOf(nameEQ) == 0) result = c.substring(nameEQ.length, c.length);\n            }\n            var cvc = options.value || result;\n            %>\n\n<div class=\"credit-card-security-number\">\n\t<div class=\"control-group <%= options.error ? 'error' : '' %>\" style=\"display:<%= (options.hidden) ? 'none':''%>; margin-top: -10px;\">\n\t\n<% if(location.hash.indexOf('review')>-1){ %>\n\t<label class=\"control-label\" for=\"ccsecuritycode\" <%= options.verifyModal ?  'style=\"width: 90px; margin-left: 4px;\"':'style=\"width: 136px; margin: 0px;\"'%>>\n\t\t\t<img style=\"margin-right: 7px;\" src=\"<%=_.getAbsoluteUrl('img\/checkout-arrow.gif') %>\"\/>\n\t\t\t<span style=\"font-weight: normal; font-size:15px\"><%= _('Security Code').translate() %><\/span>\n<\/label>\n<% }else{ %>\n\t\t\t<label class=\"control-label\" for=\"ccsecuritycode\" <%= (options.isNew) ? 'style=\"width: 117px; margin-left: 4px;\"':'style=\"width: 91px; margin-left: 4px;\"'%>>\n\t\t\t<%= _('Security Code').translate() %>\n\t\t<\/label>\n<% } %>\t\t\n\t\t<div class=\"controls\" style=\"width:100px;\" >\n\t\t\t<input\n\t\t\t\ttype=\"password\"\n\t\t\t\tclass=\"input-mini\"\n\t\t\t\tid=\"ccsecuritycode\"\n\t\t\t\tname=\"ccsecuritycode\"\n\t\t\t\tvalue=\"<%- cvc %>\"\n\t\t\t\tmaxlength=\"4\"\n\t\t\t\tstyle=\"font-size: 15px; height:22px;border: 1px solid rgb(31, 216, 31); <%= options.step == \"review\" ? 'border: 1px solid rgb(31, 216, 31);' : '' %>\"\n\t\t\t>\n\t\t\t<% if (options.error) { %>\n\t\t\t\t<p class=\"help-block\">\n\t\t\t\t\t<%= options.error.errorMessage %>\n\t\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t\t<% if(!options.hidehelp) { %>\n\t\t\t<a href=\"#\" name=\"whatisthis\" id=\"whatisthisinfo_button\" class=\"whatisthis\" ><img style=\"margin: 0 0 5px 5px;\" src=\"<%=_.getAbsoluteUrl('img\/whatsthis.jpg') %>\"\/>\n <\/a>\n<div style=\"padding: 5px; border: 2px solid #e2e2e2; width:290px; font-size:14px; font-weight:normal; display: none;background:white;z-index: 1000;position:absolute;\" id=\"whatisthisinfo\">\n\t\t\t\t<img src=\"img\/explain_cvc.png\" alt=\"explain\"><br\/>\n\t\t\t\tFor security purposes, we require the Card Security Code on your credit card. \n\t\t\t\tFor most credit cards, enter the three-digit number that follows your account number on the back of your card. \n\t\t\t\tIf you have an American Express card, enter the four-digit number printed above your account number on the front of your card.\n\t\t\t<\/div>\n\t\t\t\n<script>\n\t\tjQuery('#whatisthisinfo_button').hover(function(){\n        jQuery('#whatisthisinfo').show(\"slow\");\n},function(){\n        jQuery('#whatisthisinfo').hide(\"slow\");\n});\n<\/script>\n\t\t\n\t\t<script>\n\t\tjQuery('#in-modal-whatisthisinfo_button').hover(function(){\n\t\t        jQuery('#in-modal-whatisthisinfo').show(\"slow\");\n\t\t},function(){\n\t\t        jQuery('#in-modal-whatisthisinfo').hide(\"slow\");\n\t\t});\n\t\t<\/script>\n\t\t<% } %>\n\t\t<div id=\"cvc-error\" style=\"margin-left: -100px; margin-top: -10px; width: 256px;\"><\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardForm', function (creditcard, options) { %>\n<% var application = options.application;\nvar cvc = jQuery('#ccsecuritycode').val(); \ncreditcard.attributes.ccsecuritycode = cvc;\nif(creditcard.isNew()){\n\t\/\/creditcard.set('cccheckbox',true);\n}\n%>\n<fieldset>\n <div data-type=\"alert-placeholder\"><\/div>\n \n <div class=\"control-group\">\n  <label class=\"control-label\" for=\"ccname\">\n   <%= _('Name').translate() %>\n   <small>\n    <%= _('(required)').translate() %>\n   <\/small>\n  <\/label>\n\n  <div class=\"controls\">\n   <input type=\"text\" class=\"input-xmedium\" id=\"ccname\" name=\"ccname\" maxlength=\"26\" value=\"<%- creditcard.get('ccname') %>\">\n  <\/div>\n <\/div>\n\n <div class=\"control-group\">\n  <label class=\"control-label\" for=\"ccnumber\">\n   <%= _('Card #').translate() %>\n   <small>\n    <%= _('(required)').translate() %>\n   <\/small>\n  <\/label>\n  <div class=\"controls\">\n   <input type=\"text\" class=\"input-xmedium\" maxlength=\"16\" id=\"ccnumber\" name=\"ccnumber\" value=\"<%- creditcard.get('ccnumber') %>\" <%= !creditcard.isNew() ? 'disabled':'' %> >\n  <\/div>\n <\/div>\n\n <div class=\"control-group\">\n  <label class=\"control-label\">\n  <\/label>\n  <div class=\"controls\" style=\"padding-bottom: 10px;\">\n   <%\n    var icons = application.getConfig('creditCardIcons')\n    , selected_payment_method = creditcard.get('paymentmethod')\n    , creditcards = _.where(application.getConfig('siteSettings.paymentmethods'), {ispaypal : 'F'});\n   %>\n   <input type=\"hidden\" id=\"paymentmethod\" name=\"paymentmethod\" value=\"<%- selected_payment_method && selected_payment_method.internalid %>\"\/>\n   <% _.each(creditcards, function (paymentmethod) { %>\n    <img\n     class=\"credit-card-icon <%- creditcard.isNew() || selected_payment_method && paymentmethod.internalid === selected_payment_method.internalid ? '' : 'hidden' %>\"\n     src=\"<%- icons[paymentmethod.name] %>\"\n     data-value=\"<%- paymentmethod.internalid %>\"\n     alt=\"<%- paymentmethod.name %>\"\n     data-image=\"creditcard-icon\"\n    \/>\n   <% }) %>\n   <\/select>\n  <\/div>\n <\/div>\n \n <div class=\"control-group\">\n  <label class=\"control-label\" for=\"expmonth\" style=\"margin-right: 10px; margin-left: 5px;\">\n   <%= _('Exp.').translate() %>\n   <small>\n    <%= _('(required)').translate() %>\n   <\/small>\n  <\/label>\n  <div class=\"controls\">\n   <select class=\"input-mini\" id=\"expmonth\" name=\"expmonth\">     \n    <option value=\"0\" selected><\/option>\n    <% var currentMonth = creditcard.get('expmonth') ? creditcard.get('expmonth') : options.currentMonth  %>\n    <% _.each(options.months, function (month, index) { %>\n     <option value=\"<%- month %>\" >\n      <%= month %>\n     <\/option>\n    <% }) %>\n   <\/select>\n   <select class=\"input-small\" id=\"expyear\" name=\"expyear\">\n   <option value=\"0\" selected><\/option>\n    <% _.each(options.years, function (year, index) { %>\n     <option value=\"<%- year %>\">\n      <%= year %>\n     <\/option>\n    <% }) %>\n   <\/select>\n  <\/div>\n <\/div>\n \n <%\/\/ if (options.showSecurityCodeForm) { %>\n  <% \/\/= SC.macros.creditcardSecurityNumberForm() %>\n <%\/\/ } %>\n<%if(creditcard.isNew()){%>\n <%= SC.macros.creditcardSecurityNumberForm({isNew: true}) %>\n<div class=\"control-group\">\n\t\t\t<div class=\"controls\" style=\"margin-left:70px\">\n\t\t\t\t<label class=\"checkbox\" style=\"width:100%\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"cccheckbox\" name=\"cccheckbox\" checked>\n\t\t\t\t\tSave for future purchases\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t<\/div>\n\t<%}%>\n <% if (application.getUser().get('isGuest') !== 'T' && options.showDefaults) { %>\n <div class=\"control-group\">\n  <div class=\"controls\">\n   <label class=\"checkbox\">\n    <input\n     type=\"checkbox\"\n     id=\"ccdefault\"\n     value=\"T\"\n     data-unchecked-value=\"F\"\n     name=\"ccdefault\"\n     <%= creditcard.get('ccdefault') === 'T' ? 'checked' : '' %>\n    >\n    <%= _('Make this my default credit card').translate() %>\n   <\/label>\n  <\/div>\n <\/div>\n <% } %>\n \n<\/fieldset>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcard', function (creditcard, options) { %>\n<%\n\n\n\tvar payment_name = creditcard.get('paymentmethod').name\n\t,\texpiration_month = creditcard.get('expmonth')\n\t,\ticons = options.icons;\n\tconsole.log(creditcard.get('internalid'));\n%>\n<\/style>\n<article class=\"creditcard\" >\n\n\t\n\t<% if (options.showSecurityCodeForm) { %>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span6\">\n\t<% } %>\n\t\t\t<input type=\"radio\" name=\"creditcardradio\" style=\"float:left; margin-right:5px;\" <%=options.stopSelect ? 'data-action=\"setSelectedCreditcardId\"' : 'data-action=\"select-creditcard\"'%> data-id=\"<%- creditcard.get('internalid') %>\" <%=creditcard.get('internalid') == options.selectedCreditcard ? 'checked=\"checked\"' : ''%>\/>\n\t\t\t<span>\n\t\t\t<div style=\"float:left;\">\n\t\t\t<% if (payment_name in icons) { %>\n\t\t\t\t<img class=\"credit-card-icon\" src=\"<%- icons[payment_name] %>\" alt=\"<%- payment_name %>\">\n\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t<div style=\"float:left; padding-left: 10px;\">\n\t\t\t<h4 class=\"summary-header\">\n\t\t\t\t<%= payment_name %> ************<%= creditcard.get('ccnumber').replace(\/\\*\/g, '')%>\n\t\t\t<\/h4>\n\t\t\t<!--<p style=\"margin:0;\"> \n\t\t\t\t<%= (expiration_month < 10 ? '0' : '') + expiration_month + '\/' + creditcard.get('expyear') %>\n\t\t\t<\/p>-->\n\t\t\t<\/div>\n\t\t\t<\/span>\n\t\t\t<% if (options.showDefaults) { %>\n\t\t\t<p>\n\t\t\t\t<% if (creditcard.get('ccdefault') === 'T') { %>\n\t\t\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t\t\t<%= _('Default Credit Card').translate() %>\n\t\t\t\t<% } %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<% if (options.showSecurityCodeForm) { %>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\n<% if(creditcard.get('internalid') == options.selectedCreditcard && window.location.hash.indexOf(\"billing\")>-1){ %>\n \t\t<%= SC.macros.creditcardSecurityNumberForm({\n\t\t\terror: undefined\n           ,   value:  options.cvcvalue\n           ,\thidehelp: false\n\t\t}) %>\n<% } %>\n\t<% if (options.showActions) { %>\n\t\t<div style=\"clear: both;\"><\/div>\n\t\t<p class=\"actions\" style=\"margin:0\" >\n\t<% if (options.showSelect) { %>\n\n\t<% } %><%if(options.step != \"review\"){%>\n\t\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/<%= creditcard.get('internalid') %>\" data-toggle=\"show-in-modal\" style=\"display: none;\">\n\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t<\/a>\n\t\t\t<btn class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- creditcard.get('internalid') %>\">\n\t\t\t\t<%= _('Delete Card').translate() %>\n\t\t\t<\/btn>\n\t\t\t<%}%>\n\t\t<\/p>\n\t<% } %>\n\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardSecurityNumberForm', function (options) { %>\n<% options = options || {}; console.log(\"ccoptions\");console.log(options); \/*console.log(jQuery.cookie(\"cvc\"));*\/%>\n\n<%    var result;        var nameEQ = \"cvc\" + \"=\";\n            var ca = document.cookie.split(';');\n            for (var i = 0; i < ca.length; i++) {\n                var c = ca[i];\n                while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n                if (c.indexOf(nameEQ) == 0) result = c.substring(nameEQ.length, c.length);\n            }\n            var cvc = options.value || result;\n            %>\n\n<div class=\"credit-card-security-number\">\n\t<div class=\"control-group <%= options.error ? 'error' : '' %>\" style=\"display:<%= (options.hidden) ? 'none':''%>; margin-top: -10px;\">\n\t\n<% if(location.hash.indexOf('review')>-1){ %>\n\t<label class=\"control-label\" for=\"ccsecuritycode\" <%= options.verifyModal ?  'style=\"width: 90px; margin-left: 4px;\"':'style=\"width: 136px; margin: 0px;\"'%>>\n\t\t\t<img style=\"margin-right: 7px;\" src=\"<%=_.getAbsoluteUrl('img\/checkout-arrow.gif') %>\"\/>\n\t\t\t<span style=\"font-weight: normal; font-size:15px\"><%= _('Security Code').translate() %><\/span>\n<\/label>\n<% }else{ %>\n\t\t\t<label class=\"control-label\" for=\"ccsecuritycode\" <%= (options.isNew) ? 'style=\"width: 117px; margin-left: 4px;\"':'style=\"width: 91px; margin-left: 4px;\"'%>>\n\t\t\t<%= _('Security Code').translate() %>\n\t\t<\/label>\n<% } %>\t\t\n\t\t<div class=\"controls\" style=\"width:100px;\" >\n\t\t\t<input\n\t\t\t\ttype=\"password\"\n\t\t\t\tclass=\"input-mini\"\n\t\t\t\tid=\"ccsecuritycode\"\n\t\t\t\tname=\"ccsecuritycode\"\n\t\t\t\tvalue=\"<%- cvc %>\"\n\t\t\t\tmaxlength=\"4\"\n\t\t\t\tstyle=\"font-size: 15px; height:22px;border: 1px solid rgb(31, 216, 31); <%= options.step == \"review\" ? 'border: 1px solid rgb(31, 216, 31);' : '' %>\"\n\t\t\t>\n\t\t\t<% if (options.error) { %>\n\t\t\t\t<p class=\"help-block\">\n\t\t\t\t\t<%= options.error.errorMessage %>\n\t\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t\t<% if(!options.hidehelp) { %>\n\t\t\t<a href=\"#\" name=\"whatisthis\" id=\"whatisthisinfo_button\" class=\"whatisthis\" ><img style=\"margin: 0 0 5px 5px;\" src=\"<%=_.getAbsoluteUrl('img\/whatsthis.jpg') %>\"\/>\n <\/a>\n<div style=\"padding: 5px; border: 2px solid #e2e2e2; width:290px; font-size:14px; font-weight:normal; display: none;background:white;z-index: 1000;position:absolute;\" id=\"whatisthisinfo\">\n\t\t\t\t<img src=\"img\/explain_cvc.png\" alt=\"explain\"><br\/>\n\t\t\t\tFor security purposes, we require the Card Security Code on your credit card. \n\t\t\t\tFor most credit cards, enter the three-digit number that follows your account number on the back of your card. \n\t\t\t\tIf you have an American Express card, enter the four-digit number printed above your account number on the front of your card.\n\t\t\t<\/div>\n\t\t\t\n<script>\n\t\tjQuery('#whatisthisinfo_button').hover(function(){\n        jQuery('#whatisthisinfo').show(\"slow\");\n},function(){\n        jQuery('#whatisthisinfo').hide(\"slow\");\n});\n<\/script>\n\t\t\n\t\t<script>\n\t\tjQuery('#in-modal-whatisthisinfo_button').hover(function(){\n\t\t        jQuery('#in-modal-whatisthisinfo').show(\"slow\");\n\t\t},function(){\n\t\t        jQuery('#in-modal-whatisthisinfo').hide(\"slow\");\n\t\t});\n\t\t<\/script>\n\t\t<% } %>\n\t\t<div id=\"cvc-error\" style=\"margin-left: -100px; margin-top: -10px; width: 256px;\"><\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardForm', function (creditcard, options) { %>\n<% var application = options.application;\nvar cvc = jQuery('#ccsecuritycode').val(); \ncreditcard.attributes.ccsecuritycode = cvc;\nif(creditcard.isNew()){\n\t\/\/creditcard.set('cccheckbox',true);\n}\n%>\n<fieldset>\n <div data-type=\"alert-placeholder\"><\/div>\n \n <div class=\"control-group\">\n  <label class=\"control-label\" for=\"ccname\">\n   <%= _('Name').translate() %>\n   <small>\n    <%= _('(required)').translate() %>\n   <\/small>\n  <\/label>\n\n  <div class=\"controls\">\n   <input type=\"text\" class=\"input-xmedium\" id=\"ccname\" name=\"ccname\" maxlength=\"26\" value=\"<%- creditcard.get('ccname') %>\">\n  <\/div>\n <\/div>\n\n <div class=\"control-group\">\n  <label class=\"control-label\" for=\"ccnumber\">\n   <%= _('Card #').translate() %>\n   <small>\n    <%= _('(required)').translate() %>\n   <\/small>\n  <\/label>\n  <div class=\"controls\">\n   <input type=\"text\" class=\"input-xmedium\" maxlength=\"16\" id=\"ccnumber\" name=\"ccnumber\" value=\"<%- creditcard.get('ccnumber') %>\" <%= !creditcard.isNew() ? 'disabled':'' %> >\n  <\/div>\n <\/div>\n\n <div class=\"control-group\">\n  <label class=\"control-label\">\n  <\/label>\n  <div class=\"controls\" style=\"padding-bottom: 10px;\">\n   <%\n    var icons = application.getConfig('creditCardIcons')\n    , selected_payment_method = creditcard.get('paymentmethod')\n    , creditcards = _.where(application.getConfig('siteSettings.paymentmethods'), {ispaypal : 'F'});\n   %>\n   <input type=\"hidden\" id=\"paymentmethod\" name=\"paymentmethod\" value=\"<%- selected_payment_method && selected_payment_method.internalid %>\"\/>\n   <% _.each(creditcards, function (paymentmethod) { %>\n    <img\n     class=\"credit-card-icon <%- creditcard.isNew() || selected_payment_method && paymentmethod.internalid === selected_payment_method.internalid ? '' : 'hidden' %>\"\n     src=\"<%- icons[paymentmethod.name] %>\"\n     data-value=\"<%- paymentmethod.internalid %>\"\n     alt=\"<%- paymentmethod.name %>\"\n     data-image=\"creditcard-icon\"\n    \/>\n   <% }) %>\n   <\/select>\n  <\/div>\n <\/div>\n \n <div class=\"control-group\">\n  <label class=\"control-label\" for=\"expmonth\" style=\"margin-right: 10px; margin-left: 5px;\">\n   <%= _('Exp.').translate() %>\n   <small>\n    <%= _('(required)').translate() %>\n   <\/small>\n  <\/label>\n  <div class=\"controls\">\n   <select class=\"input-mini\" id=\"expmonth\" name=\"expmonth\">     \n    <option value=\"0\" selected><\/option>\n    <% var currentMonth = creditcard.get('expmonth') ? creditcard.get('expmonth') : options.currentMonth  %>\n    <% _.each(options.months, function (month, index) { %>\n     <option value=\"<%- month %>\" >\n      <%= month %>\n     <\/option>\n    <% }) %>\n   <\/select>\n   <select class=\"input-small\" id=\"expyear\" name=\"expyear\">\n   <option value=\"0\" selected><\/option>\n    <% _.each(options.years, function (year, index) { %>\n     <option value=\"<%- year %>\">\n      <%= year %>\n     <\/option>\n    <% }) %>\n   <\/select>\n  <\/div>\n <\/div>\n \n <%\/\/ if (options.showSecurityCodeForm) { %>\n  <% \/\/= SC.macros.creditcardSecurityNumberForm() %>\n <%\/\/ } %>\n<%if(creditcard.isNew()){%>\n <%= SC.macros.creditcardSecurityNumberForm({isNew: true}) %>\n<div class=\"control-group\">\n\t\t\t<div class=\"controls\" style=\"margin-left:70px\">\n\t\t\t\t<label class=\"checkbox\" style=\"width:100%\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"cccheckbox\" name=\"cccheckbox\" checked>\n\t\t\t\t\tSave for future purchases\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t<\/div>\n\t<%}%>\n <% if (application.getUser().get('isGuest') !== 'T' && options.showDefaults) { %>\n <div class=\"control-group\">\n  <div class=\"controls\">\n   <label class=\"checkbox\">\n    <input\n     type=\"checkbox\"\n     id=\"ccdefault\"\n     value=\"T\"\n     data-unchecked-value=\"F\"\n     name=\"ccdefault\"\n     <%= creditcard.get('ccdefault') === 'T' ? 'checked' : '' %>\n    >\n    <%= _('Make this my default credit card').translate() %>\n   <\/label>\n  <\/div>\n <\/div>\n <% } %>\n \n<\/fieldset>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('addressFrom', function (address, options) { %>\n<% \n\tvar site_settings = SC.ENVIRONMENT.siteSettings\n\t,\tmanage = options.manage ? options.manage + '-' : ''\n\t,\tcountries = options.countries\n\t,\tquantity_countries = _.size(countries)\n\t,\tselected_country = address.get('country') || site_settings.defaultshipcountry\n\t,\tapplication = this.view.options.application || this.view.options.wizard.application;\n\t\n\t\n\tif (quantity_countries === 1)\n\t{\n\t\tselected_country = _.keys(countries)[0];\n\t}\n%>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\t<% if (address.id && address.id == application.getCart().attributes.billaddress && address.id == application.getCart().attributes.shipaddress) {%>\n\t<div>\n\t<span style=\"font-size:14px;color: #c5c5c5;\">Changes made to this address will be applied to both your billing and shipping addresses.<\/span><\/div><br>\n\t<% } %>\n\t<% ;if (address.isNew() && options.manage=='billaddress') { %>\n\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\" style=\"margin-left:65px\">\n\t\t\t\t<label class=\"checkbox\" style=\"width:100%\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"copyshipping\" value=\"F\" data-unchecked-value=\"F\" name=\"copyshipping\">\n\t\t\t\t\t<%=  _('Same as shipping address').translate()  %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>namePrefix\">\n\t\t\t<%= _('Prefix').translate() %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<select id=\"<%= manage %>namePrefix\" name=\"namePrefix\" class=\"input-small\">\n\t\t\t\t<option>-Select-<\/option>\n\t\t\t\t<option value=\"Mr.\" <%= address.get('namePrefix')==='Mr.' ? 'selected' : '' %>>Mr.<\/option>\n<option value=\"Mrs\/Ms.\" <%= address.get('namePrefix')==='Mrs\/Ms.' ? 'selected' : '' %>>Mrs.\/Ms.<\/option>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\n\t\t\t<!--<div class=\"controls\" style=\"display: none;\">\n\t\t\t<input type=\"text\" name=\"label\" value=\"<%-options.manage%>\">\n\t\t<\/div>-->\n\t\n\t\n\t\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>firstfullname\">\n\t\t\t<%= _('First').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>firstfullname\" maxlength=\"30\" name=\"firstfullname\" value=\"<%- address.get('firstfullname')%>\">\n\t\t<\/div>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>lastfullname\">\n\t\t\t<%= _('Last').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>lastfullname\" maxlength=\"30\" name=\"lastfullname\" value=\"<%- address.get('lastfullname')%>\">\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% \/* \n\tTODO: the next field should be shown\/hidden depending on a feature in Setup Website > Shopping\n\tregistration has 2 fields: displaycompanyfield and showcompanyfield, not sure which to use \n\t*\/ %>\n\t<% if (site_settings.registration.displaycompanyfield === 'T') { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>company\">\n\t\t\t<%= _('Company').translate() %>\n\t\t\t<% if (site_settings.registration.companyfieldmandatory === 'T') { %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-large\"\n\t\t\t\tid=\"<%= manage %>company\"\n\t\t\t\tname=\"company\"\n\t\t\t\tmaxlength=\"30\"\n\t\t\t\tvalue=\"<%- address.get('company') %>\"\n\t\t\t\t<% if (site_settings.registration.companyfieldmandatory !== 'T') { %>\n\t\t\t\t\tplaceholder=\"<%= _('(optional)').translate() %>\"\n\t\t\t\t<% } %>\n\t\t\t>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>addr1\">\n\t\t\t<% if (address.isNew()) {%> \n\t\t\t\t<%= _('Address').translate() %>\n\t\t\t<% } else { %>\n\t\t\t\t<%= _('Address').translate() %>\n\t\t\t<% } %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>addr1\" maxlength=\"30\" name=\"addr1\" value=\"<%- address.get('addr1') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group control-group-big\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>addr2\">\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>addr2\" name=\"addr2\" value=\"<%- address.get('addr2') %>\" placeholder=\"<%= _('(optional)').translate() %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: Apt. 3 or Suite #1516').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>city\">\n\t\t\t<%= _('City').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>city\" name=\"city\" maxlength=\"30\" value=\"<%- address.get('city') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\n\t<div class=\"control-group\">\n\t\t<%= SC.macros.statesDropdown({\n\t\t\tcountries: options.countries\n\t\t,\tselectedCountry: selected_country\n\t\t,\tselectedState: address.get('state')\n\t\t,\tmanage: manage\n\t\t}) %>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>zip\">\n\t\t\t<%= _('Zip').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-small\" id=\"<%= manage %>zip\" maxlength=\"10\" name=\"zip\" value=\"<%- address.get('zip') %>\" data-type=\"zip\" style=\"width: 80px;\">\n\t\t<\/div>\n\t\t\n\t<\/div>\n<input id=\"ignoresuggestion\" type=\"hidden\" hiddenname=\"ignoresuggestion\" value=\"false\" \/>\n <!-- <%= quantity_countries <= 1 ? 'hide' : '' %> -->\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>country\">\n\t\t\t<%= _('Country').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<%= SC.macros.countriesDropdown(countries, selected_country, manage) %>\n\t\t<\/div>\n\t<\/div>\n\n<%\/\/ if (address.isNew()) {%>\t\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>phone\">\n\t\t\t<%= _('Phone').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t\t<input type=\"tel\" style=\"margin-bottom:0;\" class=\"input-medium\" id=\"<%= manage %>phone\" name=\"phone\"  value=\"<%- address.get('phone') %>\">\n\t\t\t\t<input type=\"tel\" style=\"width: 45px;margin-bottom:0;\" placeholder=\"EXT\" maxlength=\"4\" id=\"ext\" name=\"ext\" onfocus=\"this.placeholder = ''\" onblur=\"this.placeholder = 'EXT'\"  value=\"<%- address.get('ext') %>\">\t\t\t\n\t\t<\/div>\n\t\t<div style=\"float:left;\">\n\t\t\t\t<span style=\"font-size:10px;color: #c5c5c5;\">We will only use this for shipping purposes<\/span>\n\t\t\t<\/div>\n\t\t\n\t<\/div>\n<%\/\/}%>\n\n\t<!--<div class=\"control-group\" id=\"labelIsresidential\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>isresidential\" value=\"T\" data-unchecked-value=\"F\" name=\"isresidential\" <%= address.get('isresidential') === 'T' ? 'checked' : '' %>>\n\t\t\t\t<%= _('This is a Residential Address').translate() %>\n\t\t\t\t<a href=\"#\" rel=\"tooltip\" data-toggle=\"tooltip\" title=\"<%= _('Indicating that this is a residential address will help us determine the best delivery method for your items.').translate() %>\">\n\t\t\t\t\t<i class=\"icon-question-sign\"><\/i>\n\t\t\t\t<\/a>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>-->\n\t\n\t<% if (!options.hideDefaults && jQuery('.section-header').html().indexOf('Billing')>-1) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\" style=\"margin-left:100px\">\n\t\t\t\t<label class=\"checkbox\" style=\"width:100%\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultbilling\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultbilling\" <%= address.get('defaultbilling') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Make this my default billing address').translate() : _('Make this my default billing address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n\n\t<% if (!options.hideDefaults && jQuery('.section-header').html().indexOf('SHIPPING')>-1) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\" style=\"margin-left:100px\">\n\t\t\t\t<label class=\"checkbox\" style=\"width:100%\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultshipping\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultshipping\" <%= address.get('defaultshipping') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Make this my default shipping address').translate() : _('Make this my default shipping address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n<\/fieldset>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('address', function (address, options) { \n\toptions = options || {}; \n\tvar label = address.get('label')\n\t,\tcompany = (SC.ENVIRONMENT.siteSettings.registration.displaycompanyfield === 'T') ? address.get('company') : null\n\t,\tfullname = address.get('fullname')\n\t,\tcountries = SC.ENVIRONMENT.siteSettings.countries\n\t,\tcountry_object = countries[address.get('country')]\n\t,\tcountry = (country_object)? country_object.name : address.get('country')\n\t,\tstate_object = (country_object && country_object.states)? _.findWhere(countries[address.get('country')].states, {code: address.get('state')}): null\n\t,\tstate = (state_object)? state_object.code: address.get('state');\n\t\n%>\n<article class=\"address\" >\n\t\n\t<address class=\"\"\">\t\n\t\t<span class=\"address-line address-firstfullname\">\n\t\t\t<%= address.get('firstfullname') %> <%= address.get('lastfullname') %>\n\t\t<\/span>\n\t\t\n\n\t\t<span class=\"address-line address-firstfullname\">\n\t\t\t<%= label || company %>\n\t\t<\/span>\n\n\t\t<% if (label && company) { %>\n\t\t\t<span class=\"address-line address-company\">\n\t\t\t\t<%= company %>\n\t\t\t<\/span>\n\t\t<% } else if (label ? !company : company ) { %>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line address-addr1\">\n\t\t\t<%= address.get('addr1') %>\n\t\t<\/span>\n\t\t<% if (address.get('addr2')) { %>\n\t\t\t<span class=\"address-line address-addr2\">\n\t\t\t\t<%= address.get('addr2') %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line\">\n\t\t\t<span class=\"address-city\">\n\t\t\t\t<%= address.get('city') %>,\n\t\t\t<\/span>\n\t\t\t<% if (address.get('state')) { %>\n\t\t\t\t<span class=\"address-state\">\n\t\t\t\t\t<%= state %>\n\t\t\t\t<\/span>\n\t\t\t<% } %>\n\t\t\t<span class=\"address-zip\">\n\t\t\t\t<%= address.get('zip') %>\n\t\t\t<\/span>\n\t\t<\/span>\n\t\t<span class=\"address-line address-country\">\n\t\t\t<%= country %>\n\t\t<\/span>\n\t\t<span class=\"address-line address-phone\">\n\t\t\t<%= address.get('phone') %>\n\t\t<\/span>\n\t\t<% if(options.verifyReview != \"review\"){%>\n\t\t<div style=\"margin-top:10px;\">\n\t\t\t<input type=\"radio\" name=\"<%=options.verifyAddress%>\" style=\"float:left; margin-right:5px;\" <%=options.stopSelect ? 'data-action=\"setselectedaddressid\"' : 'data-action=\"select\"'%> data-id=\"<%- address.get('internalid') %>\" <%=address.get('internalid') == options.selectedAddress ? 'checked=\"checked\"' : ''%> id=\"<%- options.verifyAddress %>\"\/>\n\t\t\t<span><%=Backbone.history.fragment.indexOf('shipping')>-1?'Ship to this address':'Use this address'%><\/span>\n\t\t\t<\/div>\n\t\t<%}%>\n\t<\/address>\n\t<% if (!options.hideDefaults) { %>\n\t\t<% if (address.get('defaultshipping') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Shipping Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t\t<% if (address.get('defaultbilling') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Billing Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\n\t<% } %>\n\n\t<% if (!options.hideActions) { %>\n\t<p class=\"actions\">\n<!--<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-link\" data-action=\"select\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= options.selectMessage || _('Select this address').translate() %>\n\t\t<\/button>\n\t<% } %>-->\n\t<%if(options.step != \"review\"){%>\t\n\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/<%- address.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t<%= _('edit').translate() %>\n\t\t<\/a>\n\n\n\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= _('remove').translate() %>\n\t\t<\/button>\n\t\t<%}%>\n\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('addressFrom', function (address, options) { %>\n<% \n\tvar site_settings = SC.ENVIRONMENT.siteSettings\n\t,\tmanage = options.manage ? options.manage + '-' : ''\n\t,\tcountries = options.countries\n\t,\tquantity_countries = _.size(countries)\n\t,\tselected_country = address.get('country') || site_settings.defaultshipcountry\n\t,\tapplication = this.view.options.application || this.view.options.wizard.application;\n\t\n\t\n\tif (quantity_countries === 1)\n\t{\n\t\tselected_country = _.keys(countries)[0];\n\t}\n%>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\t<% if (address.id && address.id == application.getCart().attributes.billaddress && address.id == application.getCart().attributes.shipaddress) {%>\n\t<div>\n\t<span style=\"font-size:14px;color: #c5c5c5;\">Changes made to this address will be applied to both your billing and shipping addresses.<\/span><\/div><br>\n\t<% } %>\n\t<% ;if (address.isNew() && options.manage=='billaddress') { %>\n\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\" style=\"margin-left:65px\">\n\t\t\t\t<label class=\"checkbox\" style=\"width:100%\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"copyshipping\" value=\"F\" data-unchecked-value=\"F\" name=\"copyshipping\">\n\t\t\t\t\t<%=  _('Same as shipping address').translate()  %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>namePrefix\">\n\t\t\t<%= _('Prefix').translate() %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<select id=\"<%= manage %>namePrefix\" name=\"namePrefix\" class=\"input-small\">\n\t\t\t\t<option>-Select-<\/option>\n\t\t\t\t<option value=\"Mr.\" <%= address.get('namePrefix')==='Mr.' ? 'selected' : '' %>>Mr.<\/option>\n<option value=\"Mrs\/Ms.\" <%= address.get('namePrefix')==='Mrs\/Ms.' ? 'selected' : '' %>>Mrs.\/Ms.<\/option>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\n\t\t\t<!--<div class=\"controls\" style=\"display: none;\">\n\t\t\t<input type=\"text\" name=\"label\" value=\"<%-options.manage%>\">\n\t\t<\/div>-->\n\t\n\t\n\t\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>firstfullname\">\n\t\t\t<%= _('First').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>firstfullname\" maxlength=\"30\" name=\"firstfullname\" value=\"<%- address.get('firstfullname')%>\">\n\t\t<\/div>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>lastfullname\">\n\t\t\t<%= _('Last').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>lastfullname\" maxlength=\"30\" name=\"lastfullname\" value=\"<%- address.get('lastfullname')%>\">\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% \/* \n\tTODO: the next field should be shown\/hidden depending on a feature in Setup Website > Shopping\n\tregistration has 2 fields: displaycompanyfield and showcompanyfield, not sure which to use \n\t*\/ %>\n\t<% if (site_settings.registration.displaycompanyfield === 'T') { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>company\">\n\t\t\t<%= _('Company').translate() %>\n\t\t\t<% if (site_settings.registration.companyfieldmandatory === 'T') { %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-large\"\n\t\t\t\tid=\"<%= manage %>company\"\n\t\t\t\tname=\"company\"\n\t\t\t\tmaxlength=\"30\"\n\t\t\t\tvalue=\"<%- address.get('company') %>\"\n\t\t\t\t<% if (site_settings.registration.companyfieldmandatory !== 'T') { %>\n\t\t\t\t\tplaceholder=\"<%= _('(optional)').translate() %>\"\n\t\t\t\t<% } %>\n\t\t\t>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>addr1\">\n\t\t\t<% if (address.isNew()) {%> \n\t\t\t\t<%= _('Address').translate() %>\n\t\t\t<% } else { %>\n\t\t\t\t<%= _('Address').translate() %>\n\t\t\t<% } %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>addr1\" maxlength=\"30\" name=\"addr1\" value=\"<%- address.get('addr1') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group control-group-big\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>addr2\">\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>addr2\" name=\"addr2\" value=\"<%- address.get('addr2') %>\" placeholder=\"<%= _('(optional)').translate() %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: Apt. 3 or Suite #1516').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>city\">\n\t\t\t<%= _('City').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-large\" id=\"<%= manage %>city\" name=\"city\" maxlength=\"30\" value=\"<%- address.get('city') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\n\t<div class=\"control-group\">\n\t\t<%= SC.macros.statesDropdown({\n\t\t\tcountries: options.countries\n\t\t,\tselectedCountry: selected_country\n\t\t,\tselectedState: address.get('state')\n\t\t,\tmanage: manage\n\t\t}) %>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>zip\">\n\t\t\t<%= _('Zip').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-small\" id=\"<%= manage %>zip\" maxlength=\"10\" name=\"zip\" value=\"<%- address.get('zip') %>\" data-type=\"zip\" style=\"width: 80px;\">\n\t\t<\/div>\n\t\t\n\t<\/div>\n<input id=\"ignoresuggestion\" type=\"hidden\" hiddenname=\"ignoresuggestion\" value=\"false\" \/>\n <!-- <%= quantity_countries <= 1 ? 'hide' : '' %> -->\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>country\">\n\t\t\t<%= _('Country').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<%= SC.macros.countriesDropdown(countries, selected_country, manage) %>\n\t\t<\/div>\n\t<\/div>\n\n<%\/\/ if (address.isNew()) {%>\t\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>phone\">\n\t\t\t<%= _('Phone').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t\t<input type=\"tel\" style=\"margin-bottom:0;\" class=\"input-medium\" id=\"<%= manage %>phone\" name=\"phone\"  value=\"<%- address.get('phone') %>\">\n\t\t\t\t<input type=\"tel\" style=\"width: 45px;margin-bottom:0;\" placeholder=\"EXT\" maxlength=\"4\" id=\"ext\" name=\"ext\" onfocus=\"this.placeholder = ''\" onblur=\"this.placeholder = 'EXT'\"  value=\"<%- address.get('ext') %>\">\t\t\t\n\t\t<\/div>\n\t\t<div style=\"float:left;\">\n\t\t\t\t<span style=\"font-size:10px;color: #c5c5c5;\">We will only use this for shipping purposes<\/span>\n\t\t\t<\/div>\n\t\t\n\t<\/div>\n<%\/\/}%>\n\n\t<!--<div class=\"control-group\" id=\"labelIsresidential\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>isresidential\" value=\"T\" data-unchecked-value=\"F\" name=\"isresidential\" <%= address.get('isresidential') === 'T' ? 'checked' : '' %>>\n\t\t\t\t<%= _('This is a Residential Address').translate() %>\n\t\t\t\t<a href=\"#\" rel=\"tooltip\" data-toggle=\"tooltip\" title=\"<%= _('Indicating that this is a residential address will help us determine the best delivery method for your items.').translate() %>\">\n\t\t\t\t\t<i class=\"icon-question-sign\"><\/i>\n\t\t\t\t<\/a>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>-->\n\t\n\t<% if (!options.hideDefaults && jQuery('.section-header').html().indexOf('Billing')>-1) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\" style=\"margin-left:100px\">\n\t\t\t\t<label class=\"checkbox\" style=\"width:100%\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultbilling\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultbilling\" <%= address.get('defaultbilling') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Make this my default billing address').translate() : _('Make this my default billing address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n\n\t<% if (!options.hideDefaults && jQuery('.section-header').html().indexOf('SHIPPING')>-1) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\" style=\"margin-left:100px\">\n\t\t\t\t<label class=\"checkbox\" style=\"width:100%\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultshipping\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultshipping\" <%= address.get('defaultshipping') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Make this my default shipping address').translate() : _('Make this my default shipping address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n<\/fieldset>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('address', function (address, options) { \n\toptions = options || {}; \n\tvar label = address.get('label')\n\t,\tcompany = (SC.ENVIRONMENT.siteSettings.registration.displaycompanyfield === 'T') ? address.get('company') : null\n\t,\tfullname = address.get('fullname')\n\t,\tcountries = SC.ENVIRONMENT.siteSettings.countries\n\t,\tcountry_object = countries[address.get('country')]\n\t,\tcountry = (country_object)? country_object.name : address.get('country')\n\t,\tstate_object = (country_object && country_object.states)? _.findWhere(countries[address.get('country')].states, {code: address.get('state')}): null\n\t,\tstate = (state_object)? state_object.code: address.get('state');\n\t\n%>\n<article class=\"address\" >\n\t\n\t<address class=\"\"\">\t\n\t\t<span class=\"address-line address-firstfullname\">\n\t\t\t<%= address.get('firstfullname') %> <%= address.get('lastfullname') %>\n\t\t<\/span>\n\t\t\n\n\t\t<span class=\"address-line address-firstfullname\">\n\t\t\t<%= label || company %>\n\t\t<\/span>\n\n\t\t<% if (label && company) { %>\n\t\t\t<span class=\"address-line address-company\">\n\t\t\t\t<%= company %>\n\t\t\t<\/span>\n\t\t<% } else if (label ? !company : company ) { %>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line address-addr1\">\n\t\t\t<%= address.get('addr1') %>\n\t\t<\/span>\n\t\t<% if (address.get('addr2')) { %>\n\t\t\t<span class=\"address-line address-addr2\">\n\t\t\t\t<%= address.get('addr2') %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line\">\n\t\t\t<span class=\"address-city\">\n\t\t\t\t<%= address.get('city') %>,\n\t\t\t<\/span>\n\t\t\t<% if (address.get('state')) { %>\n\t\t\t\t<span class=\"address-state\">\n\t\t\t\t\t<%= state %>\n\t\t\t\t<\/span>\n\t\t\t<% } %>\n\t\t\t<span class=\"address-zip\">\n\t\t\t\t<%= address.get('zip') %>\n\t\t\t<\/span>\n\t\t<\/span>\n\t\t<span class=\"address-line address-country\">\n\t\t\t<%= country %>\n\t\t<\/span>\n\t\t<span class=\"address-line address-phone\">\n\t\t\t<%= address.get('phone') %>\n\t\t<\/span>\n\t\t<% if(options.verifyReview != \"review\"){%>\n\t\t<div style=\"margin-top:10px;\">\n\t\t\t<input type=\"radio\" name=\"<%=options.verifyAddress%>\" style=\"float:left; margin-right:5px;\" <%=options.stopSelect ? 'data-action=\"setselectedaddressid\"' : 'data-action=\"select\"'%> data-id=\"<%- address.get('internalid') %>\" <%=address.get('internalid') == options.selectedAddress ? 'checked=\"checked\"' : ''%> id=\"<%- options.verifyAddress %>\"\/>\n\t\t\t<span><%=Backbone.history.fragment.indexOf('shipping')>-1?'Ship to this address':'Use this address'%><\/span>\n\t\t\t<\/div>\n\t\t<%}%>\n\t<\/address>\n\t<% if (!options.hideDefaults) { %>\n\t\t<% if (address.get('defaultshipping') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Shipping Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t\t<% if (address.get('defaultbilling') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Billing Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\n\t<% } %>\n\n\t<% if (!options.hideActions) { %>\n\t<p class=\"actions\">\n<!--<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-link\" data-action=\"select\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= options.selectMessage || _('Select this address').translate() %>\n\t\t<\/button>\n\t<% } %>-->\n\t<%if(options.step != \"review\"){%>\t\n\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/<%- address.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t<%= _('edit').translate() %>\n\t\t<\/a>\n\n\n\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= _('remove').translate() %>\n\t\t<\/button>\n\t\t<%}%>\n\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('registerFormFields', function(options) { %>\n<% options = options || {} %>\n\n<div data-type=\"alert-placeholder\"><\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-firstname\">\n\t\t<%= _('First Name <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"text\" name=\"firstname\" id=\"register-firstname\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-lastname\">\n\t\t<%= _('Last Name <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"text\" name=\"lastname\" id=\"register-lastname\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<%\n\tvar show_company_field = SC.ENVIRONMENT.siteSettings.registration.showcompanyfield === 'T'\n\t,\trequire_company_field = SC.ENVIRONMENT.siteSettings.registration.companyfieldmandatory === 'T'\n\t,\tsite_name = SC.ENVIRONMENT.siteSettings.displayname\n\t,\temail_subscribe_checked = this.view.wizard && this.view.wizard.application.getUser().get('isGuest') === 'T' && this.view.wizard.application.getUser().get('emailsubscribe') === 'T';\n%>\n<% if (show_company_field) { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"register-company\">\n\t\t\t<% if (require_company_field) { %>\n\t\t\t\t<%= _('Company <small>(required)<\/small>').translate() %>\n\t\t\t<% } else { %>\n\t\t\t\t<%= _('Company').translate() %>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" name=\"company\" id=\"register-company\" class=\"input-xlarge\" placeholder=\"<%- require_company_field ? '' : _('(optional)').translate() %>\">\n\t\t<\/div>\n\t<\/div>\n<% } %>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-email\">\n\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"email\" name=\"email\" id=\"register-email\" class=\"input-xlarge\" placeholder=\"<%- _('your@email.com').translate() %>\"  value=\"<%- options.view && options.view.guestEmail || '' %>\" >\n\t\t<span class=\"help-block\">\n\t\t\t<small>\n\t\t\t\t<%= _('We need your email address to contact you about your order.').translate() %>\n\t\t\t<\/small>\n\t\t<\/span>\n\t<\/div>\n<\/div>\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-password\">\n\t\t<%= _('Password <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"password\" name=\"password\" id=\"register-password\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-password2\">\n\t\t<%= _('Re-Enter Password <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"password\" name=\"password2\" id=\"register-password2\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"checkbox\">\n\t\t<input type=\"checkbox\" name=\"emailsubscribe\" id=\"register-emailsubscribe\" value=\"T\" <%= email_subscribe_checked ? 'checked' : '' %> >\n\t\t<%= _('Yes, Please sign me up for $(0) exclusive offers and promotions').translate(site_name) %>\n\t<\/label>\n<\/div>\n<% }) %>\n\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('registerFormFields', function(options) { %>\n<% options = options || {} %>\n\n<div data-type=\"alert-placeholder\"><\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-firstname\">\n\t\t<%= _('First Name <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"text\" name=\"firstname\" id=\"register-firstname\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-lastname\">\n\t\t<%= _('Last Name <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"text\" name=\"lastname\" id=\"register-lastname\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<%\n\tvar show_company_field = SC.ENVIRONMENT.siteSettings.registration.showcompanyfield === 'T'\n\t,\trequire_company_field = SC.ENVIRONMENT.siteSettings.registration.companyfieldmandatory === 'T'\n\t,\tsite_name = SC.ENVIRONMENT.siteSettings.displayname\n\t,\temail_subscribe_checked = this.view.wizard && this.view.wizard.application.getUser().get('isGuest') === 'T' && this.view.wizard.application.getUser().get('emailsubscribe') === 'T';\n%>\n<% if (show_company_field) { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"register-company\">\n\t\t\t<% if (require_company_field) { %>\n\t\t\t\t<%= _('Company <small>(required)<\/small>').translate() %>\n\t\t\t<% } else { %>\n\t\t\t\t<%= _('Company').translate() %>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" name=\"company\" id=\"register-company\" class=\"input-xlarge\" placeholder=\"<%- require_company_field ? '' : _('(optional)').translate() %>\">\n\t\t<\/div>\n\t<\/div>\n<% } %>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-email\">\n\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"email\" name=\"email\" id=\"register-email\" class=\"input-xlarge\" placeholder=\"<%- _('your@email.com').translate() %>\"  value=\"<%- options.view && options.view.guestEmail || '' %>\" >\n\t\t<span class=\"help-block\">\n\t\t\t<small>\n\t\t\t\t<%= _('We need your email address to contact you about your order.').translate() %>\n\t\t\t<\/small>\n\t\t<\/span>\n\t<\/div>\n<\/div>\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-password\">\n\t\t<%= _('Password <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"password\" name=\"password\" id=\"register-password\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-password2\">\n\t\t<%= _('Re-Enter Password <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"password\" name=\"password2\" id=\"register-password2\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"checkbox\">\n\t\t<input type=\"checkbox\" name=\"emailsubscribe\" id=\"register-emailsubscribe\" value=\"T\" <%= email_subscribe_checked ? 'checked' : '' %> >\n\t\t<%= _('Yes, Please sign me up for $(0) exclusive offers and promotions').translate(site_name) %>\n\t<\/label>\n<\/div>\n<% }) %>\n\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n"],"reset_password_tmpl":"<div class=\"row\">\n\t<div class=\"span5\">\n\n\t\t<h2><%= _('Reset Password').translate() %><\/h2>\n\n\t\t<div>\n\t\t\t<form>\n\t\t\t\t<p><%= _('Enter a new password below for <b>$(0)<\/b>').translate(view.email) %><\/p>\n\t\t\t\t<fieldset>\n\t\t\t\t\t<div data-type=\"alert-placeholder\"><\/div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<label class=\"control-label\" for=\"password\"><%= _('Password <small>(required)<\/small>').translate() %><\/label>\n\t\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t\t<input type=\"password\" class=\"input-large\" id=\"password\" name=\"password\" value=\"\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<label class=\"control-label\" for=\"confirm_password\"><%= _('Confirm Password <small>(required)<\/small>').translate() %><\/label>\n\t\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t\t<input type=\"password\" class=\"input-large\" id=\"confirm_password\" name=\"confirm_password\" value=\"\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\n\t\t\t\t\t<button type=\"submit\" class=\"btn btn-primary btn-large btn-block\"><%=_('Change password').translate()%><\/button>\n\t\t\t\t\t\n\t\t\t\t<\/fieldset>\n\t\t\t<\/form>\n\t\t\t<p><a href=\"\/login-register\" data-target=\".register\"><%= _('Cancel & Return To Sign In > ').translate()%><\/a><\/p>\n\t\t<\/div>\n\n\t<\/div>\n<\/div>","order_wizard_checkoutcart_module_tmpl":"<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\"  style=\"float: left;\nbackground: white; border: 10px solid white; font-size: 12px;\nfont-weight: bold;\">\n<tr style=\"height: 40px;\nfont-weight: 500;\">\n<th align=\"center\" width=\"125px\">Item<\/td>\n<th align=\"left\" width=\"220px\">Decsription<\/td>\n<th align=\"center\" width=\"100px\">Price<\/td>\n<th align=\"center\" width=\"100px\">Qty<\/td>\n<th align=\"center\" width=\"100px\">Total<\/td>\n<\/tr>\n\n\n<% view.model.get('lines').each(function (lines, index) { %>\n\t\t\t<%= shoppingCartItem(lines, view, {\n\t\t\t\tshowActions:false\n\t\t\t}) %>\n\t\t<% }) %>\n\n\n<\/table>","accordion_wizard_tmpl":"<div class=\"accordion\">\n\t<% _.each(view.wizard.getStepGroups(), function(step_group) { %>\n\t\t<div class=\"accordion-group\">\n\t\t\t<div class=\"accordion-heading\">\n\t\t\t<% if (step_group.state === 'future') { %>\n\t\t\t\t<a class=\"accordion-toggle muted\" href=\"<%- Backbone.history.fragment %>\">\n\t\t\t\t\t<%= step_group.name %>\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<a class=\"accordion-toggle \" href=\"<%- step_group.url %>\">\n\t\t\t\t\t<%= step_group.name %>\n\t\t\t\t<\/a>\n\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t<% if (step_group.state === 'present') { %>\n\t\t\t\t<div class=\"accordion-body collapse in\">\n\t\t\t\t\t<div class=\"accordion-inner\">\n\t\t\t\t\t\t<div id=\"wizard-content\" class=\"wizard-content\"><\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<% }) %>\n<\/div>","creditcard_tmpl":"<% view.model = view.model || new Backbone.Model(); %>\n<% if (!view.inModal) { %>\n\t<h1>\n\t\t<%= view.model.isNew() ? _('Add a new Credit Card').translate() : _('Edit Credit Card').translate() %>\n\t<\/h1>\n\n\t<a href=\"\/\" class=\"back-btn\">\n\t\t<%= _('&lt; Back to Account').translate() %>\n\t<\/a>\n\n\t<% if (!view.collection.length) { %>\n\t\t<p>\n\t\t\t<!-- TODO: Remove BR -->\n\t\t\t<b><%= _('We have no Credit Card on file for this account.').translate() %><\/b><br>\n\t\t\t<%= _('For faster checkouts, please enter your payment information below').translate() %>\n\t\t<\/p>\n\t<% } %>\n<% } %>\n\n<form action=\"addressbook.ss\" method=\"POST\">\n\t<% if (view.inModal) { %>\n\t\t<div class=\"modal-body\" style=\"margin: 0 auto;width: 400px;\">\n\t<% } %>\n\n\t<%= creditcardForm(view.model, view.options) %>\n\n\t<% if (view.inModal) { %>\n\t\t<\/div>\n\t<% } %>\n\n\t<div class=\"<%- view.inModal ? 'modal-footer left-aligned' : 'form-actions' %>\">\n\t\t<button type=\"submit\" class=\"btn btn-link\" data-action=\"add_card\">\n\t\t\t<%= view.model.isNew() ? _('Add Card').translate() : _('Update Card').translate() %>\n\t\t<\/button>\n\n\t\t<% if (view.inModal || view.collection.length) { %>\n\t\t\t<button class=\"btn btn-link\" data-dismiss=\"modal\">\n\t\t\t\t<%= _('Cancel').translate() %>\n\t\t\t<\/button>\n\t\t<% } %>\n\n\t\t<% if (!view.inModal) { %>\n\t\t\t<button type=\"reset\" class=\"btn btn-link hide\" data-action=\"reset\">\n\t\t\t\t<%= _('Reset').translate() %>\n\t\t\t<\/button>\n\t\t<% } %>\n\t<\/div>\n\t\n<\/form>","wizard_step_tmpl":"<% if (view.getName()) { %>\n\t<header class=\"page-header step-header\">\n\t\t<h2><%= view.getName() %><\/h2>\n\t<\/header>\n<% } %>\n\n<div data-type=\"alert-placeholder-step\"><\/div>\n\n<% if (!view.hideContinueButton) { %>\n<div class=\"step-navigation-buttons-top form-actions form-actions-top\">\n\t<button class=\"btn btn-primary btn-large btn-block btn-continue\" data-action=\"submit-step\">\n\t\t<%= view.continueButtonLabel %>\n\t<\/button>\n<\/div>\n<% } %>\n\n<div id=\"wizard-step-content\" class=\"wizard-step-content\"><\/div>\n\n<div class=\"step-navigation-buttons form-actions\" style=\"float: right; margin-right: 20px; margin-left: 20px; clear: both; width:100%\">\n <% if (!view.hideBackButton) { %>\n <!-- <button class=\"bgbutton-checkout\" data-action=\"previous-step\" style=\"\">\n   <%= _('Previous Step').translate() %>\n  <\/button>-->\n <% }  %>\n <% if (!view.hideContinueButton) { %>\n<!--\n  <button class=\"btn btn-primary btn-large btn-continue<%=(view.hideSecondContinueButtonOnPhone)? ' hidden-phone': ''%>\" data-action=\"submit-step\">\n-->\n <!-- <button class=\"bgbutton-checkout <%=(view.hideSecondContinueButtonOnPhone)? ' hidden-phone': ''%>\" data-action=\"submit-step\" style=\"float:right;\">\n   Next Step\n  <\/button>-->\n <% } %>  \n \n<\/div>\n\n<% if (view.bottomMessage) { %>\n\t<br>\n\t<p class=\"help-block stepgroup-bottom-message\">\n\t\t<%= view.bottomMessage %>\n\t<\/p>\n<% } %>\n","order_wizard_paymentmethod_selector_module_tmpl":"<% var active_modules = _.filter(view.modules,function(module){ return module.isActive;});  %>\n<h3 class=\"section-header\">\n\t\t<% if (view.selectedModule.type != 'paypal') { %> \n\t<%=   _('CREDIT CARD').translate() %>\n                 <% }  %>\n<!--\n\t<% if (active_modules.length < 1) { %>\n\t\t<%= _('CREDIT CARD').translate() %>\n\t<% } else { %>\n                <%= _('CREDIT CARD').translate() %>\n\t<% }  %>\n\t-->\n<\/h3>\n\n<!--<% if (active_modules.length > 1) { %>\n\t<ul class=\"nav nav-tabs\">\n\t<% _.each(view.modules, function (module) { %>\n\t<% if (module.isActive) { %>\n\t\t<li class=\"<%- view.selectedModule.type === module.type ? 'active' : ''%>\">\n\n\t\t<\/li>\n\t<% } %>\n\t<% }) %>\n\t<\/ul>\n<% }  %>-->\n\n<div class=\"tab-content\">\n<% _.each(view.modules, function (module) { %>\n\t<% if (module.isActive) { %>\n\t\t<div class=\"tab-pane <%= view.selectedModule.type === module.type ? 'active' : ''%> payment-method-selector-<%= module.type %>\" id=\"payment-method-selector-<%= module.type %>\"><\/div>\n\t<% } %>\n<% }) %>\n<\/div>\n","register_tmpl":"<p class=\"register-form-legend\">\n\t<%= _('Create an account and take advantage of faster checkouts and other great benefits.').translate() %>\n<\/p>\n\n<form class=\"register-form\">\n\t<%= registerFormFields() %>\n\t\n\t<div class=\"form-actions registration-actions\">\n\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t<%= _('Create Account').translate() %>\n\t\t<\/button>\n\t<\/div>\n<\/form>","quick_view_tmpl":"<div class=\"row-fluid\">\n\t<div class=\"span6 text-center\">\n\t\t<% var thumbnail = view.model.get('_thumbnail'); %>\n\t\t<img src=\"<%= view.options.application.resizeImage(thumbnail.url, 'main') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t<\/div>\n\t<div class=\"span6\">\n\t\t<div class=\"details-header\">\n\t\t\t<span class=\"pull-right\">\n\t\t\t\t<%= _('SKU: #$(0)').translate(view.model.get('_sku')) %>\n\t\t\t<\/span>\n\t\t\t<div class=\"lead lead-small no-margin-bottom\">\n\t\t\t\t<%= showItemPrice(view.model) %>\n\t\t\t<\/div>\n\t\t<\/div>\n\n\t\t<a data-touchpoint=\"home\" data-hashtag=\"<%= view.model.get('_url') %>\" href=\"<%= view.model.get('_url') %>\">\n\t\t\t<%= _('View full details').translate() %>\n\t\t<\/a>\n\n\t\t<% if (!view.model.isProperlyConfigured()) { %>\n\n\t\t\t<div class=\"alert alert-error\">\n\t\t\t\t<%= _('<b>Warning<\/b>: This item is not properly configured, please contact your administrator.').translate() %>\n\t\t\t<\/div>\n\n\t\t<% } else {\n\t\t\t\/*\n\t\t\tRender a single option placeholder:\n\t\t\t===================================\n\t\t\tAny HTML element that matches [data-type=option], if it's rendered by ItemDetails.View \n\t\t\twill be populated by the render of a single macro for a single option, especified by the attributes:\n\t\t\t\tdata-cart-option-id: the id of the cart opion\n\t\t\t\tdata-macro: the macro you want this option to be rendered with, if omited the default for the option will be used\n\t\t\t\n\t\t\t<div \n\t\t\t\tclass=\"options-container\" \n\t\t\t\tdata-type=\"option\" \n\t\t\t\tdata-cart-option-id=\"cart_option_id\" \n\t\t\t\tdata-macro=\"macroName\">\n\t\t\t<\/div>\n\t\t\tRender all options placeholder:\n\t\t\t===============================\n\t\t\tAny HTML element that matches [data-type=all-options], if it's rendered by ItemDetails.View \n\t\t\twill be populated with the result of the execution of all the options with the macros, \n\t\t\teither the default one or the one configured in the itemOptions array.\n\t\t\tUse the data-exclude-options to select the options you dont want to be rendered here,\n\t\t\tthis is a coma separated list, for instace: cart_option_id1, cart_option_id2\n\t\t\t*\/\n\t\t%>\n\t\t\t<div \n\t\t\t\tclass=\"options-container\" \n\t\t\t\tdata-type=\"all-options\" \n\t\t\t\tdata-exclude-options=\"\">\n\t\t\t<\/div>\n\t\t\t\t\t\t\n\t\t\t<form action=\"#\" class=\"form-inline\">\n\t\t\t\t<% if (view.model.get('_itemType') !== 'GiftCert'){ %>\n\t\t\t\t\t<label for=\"quantity\">\n\t\t\t\t\t\t<%= view.model.get('_minimumQuantity') !== 1 ? _('Quantity (Minimum of $(0) required)').translate(view.model.get('_minimumQuantity')) : _('Quantity').translate() %>\n\t\t\t\t\t<\/label>\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<input type=\"number\" name=\"quantity\" id=\"quantity\" class=\"input-mini quantity\" value=\"<%= view.model.get('quantity') %>\" min=\"1\">\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity\" value=\"1\">\n\t\t\t\t<% } %>\n\t\t\t\t\t<%= itemDetailsStock(view.model.getStockInfo()) %>\n\t\t\t\t<\/div>\n\t\t\t\t<button data-type=\"add-to-cart\" class=\"btn btn-primary btn-large add-to-cart\"<% if (!view.model.isReadyForCart()) {%> disabled<%}%>>\n\t\t\t\t\t<i class=\"icon-shopping-cart icon-white\"><\/i>\n\t\t\t\t\t<%=  view.model.cartItemId ? _('Update').translate() : _('Add to Cart').translate() %>\n\t\t\t\t<\/button>\n\t\t\t<\/form>\n\t\t<% } %>\n\t<\/div>\n<\/div>","order_wizard_layout_tmpl":"<% var position = view.wizard.getStepPosition() %>\n<% if((view.wizard.getCurrentStep().wizard.currentStep == 'shipping\/address') || (view.wizard.getCurrentStep().wizard.currentStep == 'shipping\/method')) {%>\n<style>\n.addressform-phonenumber {\ndisplay: none;\n}\n<\/style>\n<%}%>\n<div id=\"checkout-mini-cart\"><\/div>\n<div class=\"row-fluid <%= position.toLast === 1 ? 'review-step' : '' %>\"  <% if(position.toLast< 0){ %>style=\"background: rgb(243, 243, 243);\"<%}%>>\n<div class=\"colmask rightmenu\" <% if(position.toLast<= 0){ %>style=\"width: 677px; margin: auto;\" <%}%>>\n\t<div class=\"colleft\">\n\t\t<div class=\"col1\">\n\t\t\t<% if(!view.wizard.getCurrentStep().hideBreadcrumb && position.toLast > 0){ %>\n\t\t\t<header class=\"order-wizard-layout-header\">\n\t\t\t\t<%= wizadStepNavigation(view.wizard.stepGroups) %>\n\t\t\t<\/header>\n\t\t\t<%}%>\n\t\t\t<div class=\"span6\">\n\t\t\t\t<div id=\"wizard-content\" class=\"wizard-content\"><\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div class=\"col2\"  <% if(position.toLast<= 0){ %>style=\"display:none;\"<%}%>>\n\t\t\t<div class=\"offset2 span4\" id=\"order-summary\">\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% if(position.toLast<= 0){ %>\n<style>\n.checkout-header {display: none;}\n.bgbutton-checkout {display: none;}\n\n.shipments-cart-details{\ndisplay: block;\nwidth: 667px;\nbackground: white;\n}\n\n.orderwizard-module-confirmation {\nwidth: 667px;\nbackground: rgb(243, 243, 243);\npadding: 0px;\n}\n.upsell_options{\nmargin: auto;\nmargin-top: 0px;\nwidth: 965px;\ntext-align: center;\nbackground-color: rgb(243, 243, 243);\nborder-bottom: 10px solid rgb(256, 256, 256);\n}\n#main .order-wizard-layout {\n    margin-bottom: 0px;\n}\n\n#main .lead-price {\n color: rgb(0, 0, 0);\n}\n\n#main #order-summary .lead-price {\n color: rgb(254, 107, 56);\n}\n\n\n#main .bgbutton-checkout, #main .bgbutton-checkout:hover {\nbackground-color: rgb(244, 122, 32);\nborder-color: rgb(244, 122, 32);\nfont-weight: 400;\n}\n.btncheckout-cart-summary-macro {\n\tdisplay:none;\n}\n<\/style>\n<script type=\"text\/javascript\">\n\t\t\tjQuery('.upsell_options').addClass(\"noprint\");\n<\/script>\t\t\t\t\n<%}%>\n<\/div>","login_tmpl":"<h3><%= _('Returning customer').translate() %><\/h3>\n<p><%= _('Sign in below to checkout with an existing account:').translate() %><\/p>\n\n<div data-type=\"alert-placeholder\"><\/div>\n\n<form class=\"login-form\">\n\t<fieldset>\n\t\t<div class=\"control-group\">\n\t\t\t<label class=\"control-label\" for=\"login-email\">\n\t\t\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t\t\t<\/label>\n\t\t\t<div class=\"controls\">\n\t\t\t\t<input type=\"email\" name=\"email\" id=\"login-email\" class=\"input-xlarge\" placeholder=\"<%- _('your@email.com').translate() %>\">\n\t\t\t<\/div>\n\t\t<\/div>\n\n\t\t<div class=\"control-group\">\n\t\t\t<label class=\"control-label\" for=\"login-password\">\n\t\t\t\t<%= _('Password <small>(required)<\/small>').translate() %>\n\t\t\t<\/label>\n\t\t\t<div class=\"controls\">\n\t\t\t\t<input type=\"password\" name=\"password\" id=\"login-password\" class=\"input-xlarge\">\n\t\t\t<\/div>\n\t\t<\/div>\n\n\t\t<div class=\"form-actions sign-in-actions\">\n\t\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t\t<%= _('Sign In').translate() %>\n\t\t\t<\/button>\n\n\t\t\t<a class=\"btn btn-link\" href=\"\/forgot-password\">\n\t\t\t\t<%=_('Forgot password?').translate()%>\n\t\t\t<\/a>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>","shopping_cart_confirmation_modal_tmpl":"<%\nvar line = view.line\n,\titem = line.get('item');\n%>\n<div class=\"row-fluid\">\n\t<div class=\"span4 item-thumbnail-container\">\n\t\t<div class=\"thumbnail\">\n\t\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t\t<img src=\"<%= view.options.application.resizeImage(thumbnail.url, 'main') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"span8 item-details-container\">\n\t\t<h3 class=\"cart-confirmation-item-name\"><%= item.get('_name') %><\/h3>\n\t\t<p class=\"lead lead-small\">\n\t\t\t<%= SC.macros.showItemPrice(item) %>\n\t\t<\/p>\n\t\t\n\t\t<!-- Item Options -->\n\t\t<%= item.renderAllOptionSelected() %>\n\t\t\n\t\t<!-- Quantity -->\n\t\t<% if(item.get('_itemType') !== 'GiftCert') { %>\n\t\t\t<div class=\"quantity kore\"><%= _('Quantity: $(0)').translate(line.get('quantity')) %><\/div>\n\t\t<% } %>\n\t\t<div id=\"cart-confirmation-modal-message\" class=\"promotional-message cart-confirmation-modal-message\"><\/div>\n\t\t<div class=\"cart-modal-actions\">\n\t\t\t<a href=\"\/cart\" class=\"btn btn-primary view-cart\" data-trigger=\"go-to-cart\"><%= _('View Cart &amp; Checkout').translate() %><\/a>\n\t\t\t<a href=\"#\" class=\"btn continue-shopping\" data-dismiss=\"modal\"><%= _('Continue Shopping').translate() %><\/a>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% if (item.get('_relatedItems') && item.get('_relatedItems').length) { %>\n<div class=\"related-items\">\n\t<h4><%= _('You may also like').translate() %><\/h4>\n\t<div class=\"row-fluid\">\n\t\t<%\n\t\t\tvar relatedWrap = function relatedWrap (item) {\n\t\t\t\treturn SC.macros.relatedItem(item, view.options.application);\n\t\t\t};\n\t\t%>\n\t\t<%= displayInRows(item.get('_relatedItems').first(3), relatedWrap, 3) %>\n\t<\/div>\n<\/div>\n<% } %>","internal_error_tmpl":"<div class=\"view-header\">\n\t<% if (view.page_header) { %>\n\t<h1><%= view.page_header %><\/h1>\n\t<% } %>\n\t<div id=\"main-banner\" class=\"main-banner\"><\/div>\n<\/div>\n<div id=\"internal-error-content\" class=\"view-body internal-error-content\">\n\t<%= view.options.message || _('Sorry, we could not load the content you requested.').translate() %>\n<\/div>","order_wizard_termsandconditions_module_tmpl":"<% if (view.options.show_checkbox) { %>\n<label class=\"checkbox\">\n\t<input type=\"checkbox\" id=\"termsandconditions\" name=\"termsandconditions\" <%= view.wizard.model.get('agreetermcondition') ? 'checked' : ''%>>\n\t<%= _('I agree to the <a data-toggle=\"show-terms\" href=\"#\">Terms & Conditions<\/a>').translate() %>\n<\/label>\n<% } else { %>\n<p>\n\t<%= _('By placing your order, you are agree to our <a data-toggle=\"show-terms\" href=\"#\">Terms & Conditions<\/a>').translate() %>\n<\/p>\n<% } %>","order_wizard_paymentmethod_invoice_module_tmpl":"<div class=\"payment-method-invoice\">\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span4\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<%= _('Terms').translate() %>\n\t\t\t<\/p>\n\t\t\t<p>\n\t\t\t\t<%= view.terms.name %>\n\t\t\t<\/p>\n\t\t<\/div>\n\t\t<div class=\"span8\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<%= _('Available Balance').translate() %>\n\t\t\t<\/p>\n\t\t\t<p>\n\t\t\t\t<%= view.wizard.options.profile.get('balance_formatted') %>\n\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"row-fluid control-group purchase-order-number-container\">\n\t\t<label for=\"purchase-order-number\" class=\"control-label\">\n\t\t\t<%= _('Purchase Order Number (Optional)').translate() %>\n\t\t<\/label>\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tname=\"purchase-order-number\"\n\t\t\tid=\"purchase-order-number\"\n\t\t\tclass=\"input-medium purchase-order-number\" \n\t\t\tvalue=\"<%= view.terms.purchasenumber || '' %>\"\n\t\t>\n\t<\/div>\n\t<% if (SC.ENVIRONMENT.siteSettings.checkout.requiretermsandconditions === 'T') { %>\n\t<p>\n\t\t<%= _('I agree to pay with my current Invoice <a data-toggle=\"show-terms\" href=\"#\">Terms & Conditions<\/a>').translate() %>\n\t<\/p>\n\t<% } %>\n<\/div>","order_wizard_shipmethod_module_tmpl":"<div id=\"shipmethod-content\">\n<%\n\tvar is_active = false\n\t,\torder_delivery_method = view.model.get('shipmethod')\n\t,\tshipping_methods = view.model.get('shipmethods');\n\n\tshipping_methods.models.sort(function(obj1, obj2) {\n return obj1.get('rate') - obj2.get('rate');});\t\n\tif(!order_delivery_method){\n\t \torder_delivery_method = shipping_methods.models[0].get('internalid'); \n\t }\n%>\n<% if (view.getTitle()) { %>\n\t<h3 class=\"section-header\">\n\t\t<%= view.getTitle() %>\n\t<\/h3>\n<% } %>\n\n<form class=\"delivery-options\" action=\"\">\n\t<fieldset>\n\t\t<h3 class=\"delivery-options-header section-header\">\n\t\t\t<%= _('SELECT YOUR DELIVERY METHOD').translate() %>\n\t\t<\/h3>\n\t\t<% if (!view.model.get('isEstimating') && !view.wizard.application.getUser().get('addresses').get(view.model.get('shipaddress'))) { %>\n\t\t\t<!--<%= _('Warning: Please enter a valid shipping address first').translate() %>-->\n\t\t\t<% shipping_methods.each(function (shipmethod) { %>\n\t\t\t\t<% is_active = order_delivery_method === shipmethod.get('internalid') %>\n\n\t\t\t\t<label class=\"delivery-option <%= is_active ? 'active' : '' %>\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"delivery-options\"\n\t\t\t\t\t\tid=\"delivery-options-<%= shipmethod.get('internalid')%>\"\n\t\t\t\t\t\tvalue=\"<%- shipmethod.get('internalid')%>\" \n\t\t\t\t\t\t<%= is_active ? checked='checked' : '' %>\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"delivery-option-label\">\n\t\t\t\t\t\t<%= shipmethod.get('name') %>\n\t\t\t\t\t<\/span>\n\t\t\t\t\t\n\t\t\t\t<\/label>\n\t\t\t<% }); %>\n\t\t<% } else if (!shipping_methods.length) { %>\n\t\t\t<%= _('Warning: No Shipping Methods are available for this address').translate() %>\n\t\t<% } else { %>\n\t\t\t<%shipping_methods.each(function (shipmethod) { %>\n\t\t\t\t<% is_active = order_delivery_method === shipmethod.get('internalid') %>\n\n\t\t\t\t<label class=\"delivery-option <%= is_active ? 'active' : '' %>\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"delivery-options\"\n\t\t\t\t\t\tid=\"delivery-options-<%= shipmethod.get('internalid')%>\"\n\t\t\t\t\t\tvalue=\"<%- shipmethod.get('internalid')%>\" \n\t\t\t\t\t\t<%= is_active ? checked='checked' : '' %>\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"delivery-option-label\">\n\t\t\t\t\t\t<%= shipmethod.get('name') %>:\n\t\t\t\t\t<\/span>\n\t\t\t\t\t<span class=\"delivery-option-rate\">\n\t\t\t\t\t\t<%= shipmethod.get('rate_formatted') %>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/label>\n\t\t\t<% }); %>\n\t\t<% } %>\n\t<\/fieldset>\n<\/form>\n<\/div>","order_wizard_address_module_tmpl":"<%\n\tvar is_same_as_enabled = view.isSameAsEnabled\n\t,\tselected_address = view.address\n\t,\taddress_book = view.getAddressesToShow()\n\t,\tdefault_shipping_set = false\n\t,\tdefault_billing_set = false;\nconsole.log('update script');\n\t_.each(address_book.models,function(addr){\n    \t\tif(addr.get('defaultshipping') =='T'){default_shipping_set = true;}\n    \t\tif(addr.get('defaultbilling') =='T'){default_billing_set = true;}\n    \t});\n    \/\/address_book.models.splice(0, 0, address_book.models.splice(old_index, 1)[0]);\n   \n    \/\/select default address if none selected\n    \/\/shipping\n    \n    \/\/if(view.step.wizard.currentStep === \"billing\"){\n    \t\/\/address_book.models =  _.filter(address_book.models,function(addr){ return addr.get('defaultshipping') != 'T';});\n    \/\/}\n    \n    if(address_book.models.length>0){\n    if(address_book.models[0].get('defaultshipping') =='F'){\n\t\tvar count = 0;\n    \t_.each(address_book.models,function(addr){\n    \tcount++;\n    \tconsole.log(addr)\n    \t\tif(addr.get('defaultshipping') =='T'){address_book.models.splice(0,0,addr);address_book.models.splice(count,1);}\n    \t});\n    }\n    }\n\/\/    console.log(\"MANUAL SELECT\");\n\t\n\t\n%>\n<% var page_name; %>\n<% if(Backbone.history.fragment.indexOf('shipping')>-1) { page_name = 'SHIPPING'} %>\n<% if(Backbone.history.fragment.indexOf('billing')>-1) { page_name = 'BILLING'} %> \n<% \n\tvar cart = view.model.application.getCart();\n\tvar sum = 0;\n\tvar domainSum = 0;\n\tcart.get(\"lines\").each(function(line){\n\tsum += line.get('amount') - line.get('total');\n\tdomainSum += line.get('item').attributes.pricelevel1 * line.get('item').attributes.quantity - line.get('amount');\n\t});\n\tdomainSum += view.model.get('summary').discounttotal + sum;\n\tdomainSum = Math.round(domainSum*100)\/100;\n%>\n<script type=\"text\/javascript\">\nvar itemsCollection = [];\n<% var itemDiscount = 0; %>\n<% for( var i=0;i< view.model.get('lines').models.length;i++) {%>\n<% var price = view.model.get('lines').models[i].get('total') \/ view.model.get('lines').models[i].get('quantity') %>\n<% price = Math.round(price*100)\/100; %>\nitemsCollection.push({sku:'<%=view.model.get(\"lines\").models[i].get(\"item\").get(\"_sku\")%>', productId:'<%=view.model.get('lines').models[i].id%>',price:'<%=price%>',quantity:'<%=view.model.get('lines').models[i].get('quantity') %>'});\n<% itemDiscount += view.model.get('lines').models[i].get('discount') %>\n<% }%>\nwindow.forPixeldata = {\nuserId:'<%= view.wizard.options.profile.id %>'\n,total:'<%= view.model.get('summary').total %>'\n,transactionId:''\n,email:'<%= view.wizard.options.profile.get('email') %>'\n,name:'<%= view.wizard.options.profile.get('firstname') + ' ' + view.wizard.options.profile.get('lastname') %>'\n\/\/,orderCount: '<%= view.wizard.options.profile.get('ordercount') %>'\n,items:itemsCollection\n};\n<\/script>\n<script>\nvar orderID = \"\";\n\tvar orderTotal = \"<%=view.model.get('summary').total%>\";\n\tvar orderTax = \"<%=view.model.get('summary').taxtotal%>\";\n\tvar orderShipping = \"<%=view.model.get('summary').shippingcost%>\";\n\tvar orderPromoCode =\"<%=view.model.get('promocode') ==null ? '':view.model.get('promocode').code%>\";\n\tvar orderSubtotal = \"<%=view.model.get('summary').subtotal%>\";\n\tvar customerId ='<%= view.wizard.options.profile.id %>';\n\t<% var shipaddress = _.filter(view.model.get('addresses').models,function(model){ return model.id==view.model.get('shipaddress');})[0] %>\n\t<% var billaddress = _.filter(view.model.get('addresses').models,function(model){ return model.id==view.model.get('billaddress');})[0] %>\n\tvar customerCity = \"<%=billaddress ? billaddress.get('city') : ''%>\" || \"<%=shipaddress ? shipaddress.get('city') : ''%>\";\n\tvar customerState = \"<%=billaddress ? billaddress.get('state') : ''%>\" || \"<%=shipaddress ? shipaddress.get('state') : ''%>\";\n\tvar customerPostal = \"<%=billaddress ? billaddress.get('zip') : ''%>\" || \"<%=shipaddress ? shipaddress.get('zip') : ''%>\";\n\tvar customerCountry = \"<%=billaddress ? billaddress.get('country') : ''%>\" || \"<%=shipaddress ? shipaddress.get('country') : ''%>\";\n\/\/\tvar orderCount = '<%= view.wizard.options.profile.get('ordercount') %>';\n\tvar strpageDataVarURL = \"\/app\/site\/hosting\/scriptlet.nl?script=250&deploy=1&orderitems=\" + escape(itemsCollection) + \"&subtotal=\" + escape(orderSubtotal);\n\tvar discount = '<%= domainSum ? domainSum : itemDiscount ? itemDiscount : view.model.get('summary').discounttotal %>';\n\tvar pageData = {\n\t\t\"order\" : {\n\t\t\t\"id\" : orderID,\n\t\t\t\"total\" : orderTotal,\n\t\t\t\"tax\" : orderTax,\n\t\t\t\"shipping\" : orderShipping,\n\t\t\t\"discount\" : discount,\n\t\t\t\"promoCode\" : orderPromoCode,\n\t\t\t\"currencyCode\" : \"USD\"\n\t\t},\n\t\t\"customer\" : {\n\t\t\t\"id\" : customerId,\n\t\t\t\"city\" : customerCity,\n\t\t\t\"state\" : customerState,\n\t\t\t\"postal\" : customerPostal,\n\t\t\t\"country\" : customerCountry\/\/,\n\t\t\t\/\/\"ordercount\" : orderCount\n\t\t},\n\t\t\"navigation\" : {  pageName: \"AddressStep\" },\n\t\t\"items\" : itemsCollection\n\t};\n\n\t$j(window).trigger('updateCheckoutJsonData',pageData);\n\n\t\n\t<\/script>\n\n<% if (view.addressId && !selected_address.isNew() && Backbone.history.fragment.indexOf('shipping')>-1) { %>\n\t<h3 class=\"section-header car-background\">\n\t\t<%= _('SELECT YOUR ' + page_name + ' ADDRESS').translate() %>\n\t<\/h3>\n<%} else { %>\n\t<h3 class=\"section-header car-background\">\n\t\t<%= _('ENTER YOUR ' + page_name + ' ADDRESS').translate() %>\n\t<\/h3>\n<% } %>\n<% if (!selected_address.isNew()) { %>\n<a class=\"btn btn-link\" href=\"\/addressbook\/new\" data-toggle=\"show-in-modal\" style=\"margin-bottom:5px\">\n\t\t\t<%= Backbone.history.fragment.indexOf('shipping')>-1 ?_('Enter new shipping address').translate():_('Enter new billing address').translate() %>\n<\/a>\n<% } %>\n<!--<% if (is_same_as_enabled) { %>\n\t<label class=\"checkbox same-as-address\">\n\t\t<input\n\t\t\ttype=\"checkbox\"\n\t\t\tname=\"same-as-address\"\n\t\t\tdata-action=\"same-as\"\n\t\t\t<%= view.sameAs ? 'checked' : '' %>\n\t\t>\n\t\t<%= view.sameAsMessage %>\n\t<\/label>\n<% } %>-->\n\n<% if(view.manage == 'billaddress' && view.addressId==null && address_book.models.length==1) {%>\n\t<div id=\"address-module-form-placeholder\" class=\"address-module-form-placeholder\">\n\t\t<form method=\"POST\">\n\t\t<%= addressFrom(selected_address, {\n\t\t\t\tcountries: view.wizard.application.getConfig('siteSettings.countries')\t\n\t\t\t,\tmanage: view.manage\n\t\t\t,\tcurrentSt: view.wizard.currentStep\n\t\t\t,\thideDefaults: true\n\t\t}) %>\n\t\t<\/form>\n\n\t\t<% if (view.showSaveButton) { %>\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\" data-action=\"submit\">\n\t\t\t\t\t<%= _('Save Address').translate() %>\n\t\t\t\t<\/button>\n\t\t\t<\/div>\n\t\t<% } %>\t\n\t<\/div>\n<%} else if (view.addressId && !selected_address.isNew()) { %>\n\n\t<div id=\"address-module-list-placeholder\" class=\"address-module-list-placeholder\">\n<!--\t\t<p>\n\t\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/new\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Add New Address').translate() %>\n\t\t\t<\/a>\n\t\t<\/p> -->\n\n\t\t<%\n\t\t\t\/\/ Wrap the address address macro to pass options in\n\t\t\tvar addressWrap = function (address) {\n\t\t\t\treturn SC.macros['address'](address, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\thideDefaults: true\n\t\t\t\t,\tselectedAddress: view.addressId\n\t\t\t\t});\n\t\t\t}\n\t\t%>\n\n\t\t<%= displayInRows(address_book.models, addressWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>\n\t<\/div>\n\n<% } else if (address_book.length && !view.isGuest) { %>\n\t<div id=\"address-module-list-placeholder\" class=\"address-module-list-placeholder\">\n<!--\t\t<p>\n\t\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/new\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Add New Address').translate() %>\n\t\t\t<\/a>\n\t\t<\/p> -->\n\n\t\t<%\n\t\t\t\/\/ Wrap the address address macro to pass options in\n\t\t\tvar addressWrap = function (address) {\n\t\t\t\treturn SC.macros['address'](address, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\thideDefaults: true\n\t\t\t\t,\tselectedAddress: view.addressId\n\t\t\t\t});\n\t\t\t}\n\t\t%>\n\n\t\t<%= displayInRows(address_book.models, addressWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>\n\t<\/div>\n<% } else { %>\n\t<div id=\"address-module-form-placeholder\" class=\"address-module-form-placeholder\">\n\t\t<form method=\"POST\">\n\t\t<%= addressFrom(selected_address, {\n\t\t\t\tcountries: view.wizard.application.getConfig('siteSettings.countries')\t\n\t\t\t,\tmanage: view.manage\n\t\t\t,\tcurrentSt: view.wizard.currentStep\n\t\t\t,\thideDefaults: true\n\t\t}) %>\n\t\t<\/form>\n\n\t\t<% if (view.showSaveButton) { %>\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\" data-action=\"submit\">\n\t\t\t\t\t<%= _('Save Address').translate() %>\n\t\t\t\t<\/button>\n\t\t\t<\/div>\n\t\t<% } %>\t\n\t<\/div>\n<% } %>\n","order_wizard_showshipments_module_tmpl":"<section class=\"shipments-shipping-details\">\n\t<div class=\"row-fluid shipments-shipping-details-body\" style=\"padding-left: 90px; padding-right:90px; width: 768px; margin-left: -20px; background-color: #e5e5e5\">\n\n<div class=\"\" style=\"padding-top: 10px; padding-bottom:10px; height: 111px; background-color: #e5e5e5; width: 747px; margin-left: -3px;\">\n<!--alert alert-block alert-success fade in-->\n\t<% console.log('confirmation') %>\n\t\n\t<%  console.log(view) %>\n\t\n<% \n\tvar cart = view.model.application.getCart();\n\tvar sum = 0;\n\tvar domainSum = 0;\n\tcart.get(\"lines\").each(function(line){\n\tsum += line.get('amount') - line.get('total');\n\tdomainSum += line.get('item').attributes.pricelevel1 * line.get('item').attributes.quantity - line.get('amount');\n\t});\n\tdomainSum += view.model.get('summary').discounttotal + sum;\n\tdomainSum = Math.round(domainSum*100)\/100;\n\t\n\tvar cleanSubtotal = 0;\n\tfor( var i=0;i< cart.get('lines').models.length;i++) {\n\t\tcleanSubtotal += cart.get('lines').models[i].get('item').get('quantity') * cart.get('lines').models[i].get('item').get('_comparePriceAgainst') \n\t}\n%>\n<!-- Photorank advanced checkout code -->\n<script type=\"text\/javascript\" id=\"checkoutTagScript\">\nvar itemsCollection = [];\n<% var itemDiscount = 0; %>\n<% for( var i=0;i< view.model.get('lines').models.length;i++) {%>\n<% var price = view.model.get('lines').models[i].get('total') \/ view.model.get('lines').models[i].get('quantity') %>\n<% price = Math.round(price*100)\/100; %>\nitemsCollection.push({sku:'<%=view.model.get(\"lines\").models[i].get(\"item\").get(\"_sku\")%>', productId:'<%=view.model.get('lines').models[i].id%>',price:'<%=price %>',quantity:'<%=view.model.get('lines').models[i].get('quantity') %>'});\n<% itemDiscount += view.model.get('lines').models[i].get('discount') %>\n<% }%>\nwindow.forPixeldata = {\nuserId:'<%= view.profile.id %>'\n,total:'<%= view.model.get('summary').total %>'\n,transactionId:'<%= view.model.get('confirmation').internalid %>'\n,email:'<%= view.profile.get('email') %>'\n,name:'<%= view.profile.get('firstname') + ' ' + view.profile.get('lastname') %>'\n\/\/,orderCount: '<%= parseInt(view.profile.get('ordercount'))+1 %>'\n,items:itemsCollection\n};\n<\/script>\n<script>\nvar orderID = \"<%= view.model.get('confirmation').confirmationnumber %>\".replace(\/\\d+\\-\/, \"\");\n\tvar orderTotal = \"<%=view.model.get('summary').total%>\";\n\tvar orderTax = \"<%=view.model.get('summary').taxtotal%>\";\n\tvar orderShipping = \"<%=view.model.get('summary').shippingcost%>\";\n\tvar orderPromoCode =\"<%=view.model.get('promocode') ==null ? '':view.model.get('promocode').code%>\";\n\tvar orderSubtotal = \"<%=view.model.get('summary').subtotal%>\";\n\tvar customerId ='<%= view.profile.id %>';\n\t<% var shipaddress = _.filter(view.model.get('addresses').models,function(model){ return model.id==view.model.get('shipaddress');})[0] %>\n\t<% var billaddress = _.filter(view.model.get('addresses').models,function(model){ return model.id==view.model.get('billaddress');})[0] %>\n\tvar customerCity = \"<%=billaddress.get('city')%>\" || \"<%=shipaddress.get('city')%>\";\n\tvar customerState = \"<%=billaddress.get('state')%>\" || \"<%=shipaddress.get('state')%>\";\n\tvar customerPostal = \"<%=billaddress.get('zip')%>\" || \"<%=shipaddress.get('zip')%>\";\n\tvar customerCountry = \"<%=billaddress.get('country')%>\" || \"<%=shipaddress.get('country')%>\";\n\t\/\/var orderCount = '<%= parseInt(view.profile.get('ordercount'))+1 %>';\n\tvar strpageDataVarURL = \"\/app\/site\/hosting\/scriptlet.nl?script=250&deploy=1&orderitems=\" + escape(itemsCollection) + \"&subtotal=\" + escape(orderSubtotal);\n\tvar discount = '<%= domainSum ? domainSum : itemDiscount ? itemDiscount : view.model.get('summary').discounttotal %>';\n\tvar pageData = {\n\t\t\"order\" : {\n\t\t\t\"id\" : orderID,\n\t\t\t\"total\" : orderTotal,\n\t\t\t\"tax\" : orderTax,\n\t\t\t\"shipping\" : orderShipping,\n\t\t\t\"discount\" : discount,\n\t\t\t\"promoCode\" : orderPromoCode,\n\t\t\t\"currencyCode\" : \"USD\"\n\t\t},\n\t\t\"customer\" : {\n\t\t\t\"id\" : customerId,\n\t\t\t\"city\" : customerCity,\n\t\t\t\"state\" : customerState,\n\t\t\t\"postal\" : customerPostal,\n\t\t\t\"country\" : customerCountry\/\/,\n\t\t\t\/\/\"ordercount\" : orderCount\n\t\t},\n\t\t\"navigation\" : {  pageName: \"Confirmation\" },\n\t\t\"items\" : itemsCollection\n\t};\n\n$j(window).trigger('updateCheckoutJsonData',pageData);\n\t<\/script>\n\t<div style=\"float: left;\" >\n\t<h4 class=\"thankyou-title\" style=\"color: rgb(254, 107, 56);\ndisplay: block;\nfont-size: 36px;\nline-height: 18px;\nmargin: 20px 0px 20px;\npadding-bottom: 0px;\nfont-family: OmnesRegularRegular,sans-serif;\"><%= _('Thank you for your order!').translate() %><\/h4>\n\t<%= _('Your confirmation number is <strong style=\"font-size: 15px;\">#$(0)<\/strong>.').translate(view.model.get(\"confirmation\").confirmationnumber) %><br\/>\n<%= _('Keep your eyes peeled for an order confirmation email.').translate() %>\n\t<\/div>\n<div style=\"float: right; margin-top: 12px;\">\n<input onclick=\"location.href='<%= SC.ENVIRONMENT.siteSettings.touchpoints.home %>'\" class=\"bgbutton-checkout\" type=\"button\" data-touchpoint=\"home\" data-hashtag=\"#\/\" value=\"<%= _('Continue shopping').translate() %>\" alt=\"<%= _('Poppin.com').translate() %>\" style=\"display: block; font-weight: bold; border: 1px solid white; margin-bottom: 20px;\"><\/input>\n\t<div class=\"social\" style=\"padding-left: 40px;\">\n\t  \t<p class=\"social-links\">\n\t  \t\t<a class=\"facebook\" href=\"https:\/\/www.facebook.com\/poppin\" title=\"Facebook\" target=\"_blank\">Facebook<\/a>\n\t  \t\t<a class=\"twitter\" href=\"http:\/\/twitter.com\/poppin\" title=\"Twitter\" target=\"_blank\">Twitter<\/a>\n\t  \t\t<a class=\"pinterest\" href=\"http:\/\/pinterest.com\/poppin\" title=\"Pinterest\" target=\"_blank\">Pinterest<\/a>\n\t  \t\t<a class=\"icon-print\" title=\"Print\" href=\"#\" onclick=\"window.print()\" style=\"width:30px; height: 22px;\">Print<\/a>\n\t  \t<\/p>\n\t<\/div>\n\t<\/div>\n    \n<\/div>\n\n\n\n<div id=\"full_order_confirmation\" style=\"width: 750px; margin-top: -221px; background-color: white;\">\n<div style=\"width: 708px; margin-bottom: 215px; text-align: center;\">\n\t<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\"  style=\"float: left; background: white; border: 10px solid white; font-size: 13px; font-weight: bold; width: 710px; margin-left: 25px; border-bottom: 2px solid #e5e5e5; margin-top: 1px;\">\n\t<tr style=\"height: 40px; font-weight: 500; font-size: 13px; color: #383737\">\n\t<th align=\"left\" width=\"145px\">ITEM<\/th>\n<th align=\"left\" width=\"200px\">DESCRIPTION<\/th>\n\t<th align=\"center\" width=\"100px\">PRICE<\/th>\n\t<th align=\"center\" width=\"100px\">QTY<\/th>\n\t<th align=\"center\" width=\"100px\">TOTAL<\/th>\n\t<\/tr>\n\t\n\t<% view.model.get('lines').each(function (lines, index) { %>\n\t\t\t\t<%= shoppingCartItem(lines, view, {\n\t\t\t\t\tshowActions:false\n\t\t\t\t}) %>\n\t\t\t<% }) %>\n\t<\/table>\n<\/div>\n\n\n\n<div class=\"order-summary-block\" style=\"width: 250px; margin-left: 430px; background-color: white; margin-top: -10px;\">\n<%\n\tvar cart = view.application.getCart()\n\t,\tsummary = cart.get('summary')\n\t,\tpromocode = cart.get('promocode')\n\t,\tis_promocode_valid = promocode && promocode.isvalid\n\t,\tgiftcertificates = cart.get('paymentmethods').where({type: 'giftcertificate'}) || [];\n\tvar sum = 0;\n\tvar view = {};\nvar domainSum = 0;\ncart.get(\"lines\").each(function(line){\nsum += line.get('amount') - line.get('total');\ndomainSum += line.get('item').attributes._comparePriceAgainst * line.get('item').attributes.quantity - line.get('amount');\n});\n%>\n\n\t<header class=\"checkout-cart-summary-header\">\n\t\t<h2 class=\"checkout-cart-summary-macro-title\" style=\"color: rgb(243, 122, 49); margin-bottom: 7px; margin-left: -10px; padding-top: 198px;\">\n\t\t\t<%= _('Order Summary').translate() %>\n\t\t<\/h2>\n\t<\/header>\n\n\t<div class=\"checkout-cart-summary-body\" style=\"margin-left: -10px;\">\n\n\t\t<div class=\"cart-summary-subtotal\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right cart-summary-subtotal-formatted\">\n\t\t\t\t\t$<%=parseFloat(cleanSubtotal).toFixed(2)%>\n\t\t\t\t<\/span>\n\t\t\t\t<span class=\"cart-summary-subtotal-label\">\n\t\t\t\t\t<%= _('Subtotal').translate() %>\n\t\t\t\t<\/span>\n\t\t\t<\/p>\n\t\t<\/div>\n\n<div class=\"cart-summary-shipping-cost-applied\">\n\n<% if(domainSum>0){ %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t-$<%= domainSum.toFixed(2) %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Discount').translate() %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t<%= summary.shippingcost_formatted == \"$0.00\" ? '-' : summary.shippingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Shipping').translate() %>\n\t\t\t<\/p>\n\n\t\t\t<% if (summary.handlingcost) { %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-handling-cost-formatted\">\n\t\t\t\t\t<%= summary.handlingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Handling').translate() %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-tax-total-formatted\">\n\t\t\t\t\t<%= summary.taxtotal_formatted==\"$0.00\" ? '-' : summary.taxtotal_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Tax').translate() %>\n\t\t\t<\/p>\n\t\t\t\t\t\t<% if(sum>0){ %>\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t-$<%= sum.toFixed(2) %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Promo').translate() %> #<%= promocode.code %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n<\/div>\n\n\t\t\t<% if (is_promocode_valid || summary.giftcertapplied) { %>\n\t\t\t<% if (is_promocode_valid && summary.discounttotal) { %>\n\t\t\t<div class=\"checkout-cart-summary-body\">\n\t\t\t\t<p style=\"margin-left: -9px; width: 238px;\">\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t-<%=summary.discounttotal_formatted%>\n\t\t\t\t<\/span>\n\t\t\t\t\t<%= _('Promo').translate() %> #<%= promocode.code %>\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t\t\n\t\t\t<% if (summary.giftcertapplied) { %>\n\t\t\t<div class=\"checkout-cart-summary-body\" style=\"margin-left: -10px;\">\n\t\t\t\t<p>\n\t\t\t\t<b>\t<%= _('Gift Certificates Applied ($(0))').translate(giftcertificates.length) %><\/b>\n\t\t\t\t<\/p>\n\t\t\t\t<% _.each(giftcertificates, function (giftCertificate) { %>\n\t\t\t\t\t<p style=\"width: 240px;\">\n\t\t\t\t\t\t<span class=\"pull-right\">\n\t\t\t\t\t\t\t<%= _('-$(0)').translate(giftCertificate.get('giftcertificate').amountapplied_formatted) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span title=\"<%- giftCertificate.get('giftcertificate').code %>\">\n\t\t\t\t\t\t\tGift Card: <%= SC.macros.formatPaymentMethod(giftCertificate) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% }); %>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<% } %>\n<\/div>\n\n\n\t\t<div class=\"checkout-cart-summary-macro-total\" style=\"color: rgb(184, 180, 180); margin:0;\">\n\t\t\t<p class=\"strong\" style=\"margin-left: -9px;\">\n\t\t\t\t<span class=\"pull-right cart-summary-total-formatted\">\n\t\t\t\t\t<%= summary.total_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Total').translate() %>\n\t\t\t<\/p>\n\t\t<\/div>\n\n\n<\/div>\n\n<\/div>\n\n<\/div>\n<\/section>","wizard_tmpl":"<% if(!view.wizard.getCurrentStep().hideBreadcrumb){ %>\n\t<header class=\"order-wizard-layout-header\">\n\t<%= wizadStepNavigation(view.wizard.stepGroups) %>\n\t<\/header>\n<%}%>\n<div id=\"wizard-content\" class=\"wizard-content\"><\/div>","wizard_module_tmpl":"<h2>Module Name<\/h2>","order_wizard_cardmessage_module_tmpl":"<%\/\/if(view.options.step.wizard.currentStep != \"review\"){%>\n<div id=\"cardmessage_module\" style=\"width:280px;\">\n<% if (view.getTitle()) { %>\n\t<h3 class=\"section-header\" style=\"padding:0; margin:9px 0 0 0;line-height: 30px;\">\n\t\t<%= view.getTitle() %>\n\t<\/h3>\n<% } %>\n<form class=\"delivery-options\" action=\"\">\n\t<fieldset>\n\t\t<%console.log(\"CARD MESSGE INIT\"); console.log(jQuery('#cardmessagetoggle'))%>\n\t\t<input id=\"cardmessagetoggle\" type=\"checkbox\" name=\"orderisgift\" style=\"margin: 0 3px 2px 0;\"><span style=\"font-size: 14px;\">Yes, this order is a gift!<\/span>\n\t\t<div id=\"cardmessageblock\" style=\"display:none\">\n\t\t\t<p style=\"margin-top:9px;font-size: 14px;\">\n\t\t\t\tNeed some help deciding what to say?<br\/>\n\t\t\t\tUse one of our messages to get you started:\n\t\t\t<\/p>\n\t\t\t<select id=\"cardmessage-options\">\n\t\t\t\t<option selected disabled><\/option>\n\t\t\t\t<% view.cardmessages.forEach(function(cardmessage) { %>\n\t\t\t\t\t<option value=\"<%- cardmessage.id %>\" <%= cardmessage.occasion == view.wizard.options.model.get(\"options\").custbody_cardocation ? \"selected\" : \"\" %> >\n\t\t\t\t\t\t<%= cardmessage.occasion %>\n\t\t\t\t\t<\/option>\n\t\t\t\t<% }); %>\n\t\t\t<\/select>\n\t\t\t<textarea id=\"cardmessagetext\" maxlength=\"250\" style=\"height: 130px;\">\n\t\t\t<\/textarea>\n\t\t\t<div id=\"textcounterblock\" style=\"color: #6f6c6b\">Remaining characters: <span id=\"textcounter\">250<\/span><\/div>\n\t\t<\/div>\n\t<\/fieldset>\n\t\n<\/div>\n<%\/\/}%>","shopping_cart_tmpl":"<%\n\tvar lines = view.model.get('lines')\n\t,\trelated_items = view.model.getRelatedItems()\n\t,\thas_related_items = related_items && related_items.length\n\t,\tapplication = view.options.application\n\t,\tcontinueURL = application.getConfig('siteSettings.sitetype') === 'ADVANCED' ?  _(application.getConfig('defaultSearchUrl')).fixUrl() : ''\n\t,\tcrumbTrail = [\n\t\t\t{href: '\/', text: _('Home').translate(), 'data-touchpoint': 'home'}\n\t\t,\t{href: '\/cart', text: _('Shopping Cart').translate()}\n\t\t];\n%>\n\n<% if (lines && lines.length) { %>\n\t<div class=\"view-header\">\n\t\t<%= breadcrumb(crumbTrail) %>\n\t\t<header class=\"shopping-cart-header\">\n\t\t\t<a class=\"pull-right btn continue-shopping\" href=\"#\" data-touchpoint=\"home\" data-hashtag=\"#<%= continueURL %>\">\n\t\t\t\t<%= _('Continue Shopping').translate() %>\n\t\t\t<\/a>\n\t\t\t<h1 class=\"no-margin-top\"><%= view.page_header %><\/h1>\n\t\t<\/header>\n\t<\/div>\n\t<div class=\"row-fluid view-body\">\n\t\t<section class=\"span8\">\n\t\t\t<div class=\"shopping-cart\">\n\t\t\t\t<header class=\"shopping-cart-heading\">\n\t\t\t\t\t<div class=\"row-fluid\">\n\t\t\t\t\t\t<div class=\"span3 strong\"><%= _('Items').translate() %><\/div>\n\t\t\t\t\t\t<div class=\"span9\">\n\t\t\t\t\t\t\t<div class=\"span3 offset6 strong\"><%= _('Qty').translate() %><\/div>\n\t\t\t\t\t\t\t<div class=\"span3 strong\"><%= _('Subtotal').translate() %><\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/header>\n\t\t\t\t<% lines.each(function (lines, index) { %>\n\t\t\t\t\t<%= shoppingCartItem(lines, view) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/div>\n\t\t<\/section>\n\t\t<section class=\"span4\">\n\t\t\t<%= shoppingCartSummary(view.model, application.getConfig('siteSettings'), {\n\t\t\t\tcheckout: application.getConfig('siteSettings.checkout')\n\t\t\t,\tcontinueURL: continueURL\n\t\t\t,\tshowActions: true\n\t\t\t}) %>\n\t\t<\/section>\n\t<\/div>\n\t<div class=\"view-footer\">\n\t\t<%\n\t\t\tvar relatedWrap = function relatedWrap (item) {\n\t\t\t\treturn SC.macros.relatedItem(item, application);\n\t\t\t};\n\t\t%>\n\t\t<% if (has_related_items) { %>\n\t\t<aside class=\"shopping-cart-related-items\">\n\t\t\t<h3><%= _('You may also like').translate() %><\/h3>\n\t\t\t<div class=\"row-fluid\">\n\t\t\t\t<%= displayInRows(_.first(related_items, 6), relatedWrap, 6) %>\n\t\t\t<\/div>\n\t\t<\/aside>\n\t\t<% } %>\n\t\t<div class=\"row-fluid\" data-type=\"recently-viewed-placeholder\" data-macro=\"recentlyViewed\"><\/div>\n\t<\/div>\n\n<% } else { %>\n\t<div class=\"view-header\">\n\t\t<%= breadcrumb(crumbTrail) %>\n\t<\/div>\n\t<section class=\"view-body empty-cart\">\n\t\t<h2 class=\"no-margin-top\"><%= _('Your Shopping Cart is empty').translate() %><\/h2>\n\t\t<p class=\"no-margin-bottom\">\n\t\t\t<%= _('Continue Shopping on our $(0)').translate('<a href=\"\/\" data-touchpoint=\"home\">' + _('Home Page').translate() + '<\/a>') %>\n\t\t<\/p>\n\t<\/section>\n<% } %>","layout_tmpl":"<div id=\"layout\" class=\"layout\">\n<% var url =  view.application.getUser().get(\"paypalUrl\");%>\n\t<% if (view.application.getConfig('siteSettings.sitetype') === 'ADVANCED') { %>\n\t\t<%= header(view) %>\n\t<% } %>\n      <h1 style=\"color: rgb(243, 122, 49); font-family: 'OmnesLightRegular'; font-size: 38px; font-weight: 400; width: 965px; margin-left: 24px;\" class=\"checkout-header\">Checkout\n             <input type=\"image\" src=\"img\/paypal_button.jpg\" \n\t\tonclick=\"window.location.href= '<%=url%>'\" class=\"nlbutton\" style=\"background: #FFF;border: 0px solid #fff; margin-left: 35px; <%= Backbone.history.fragment.indexOf('review')>-1 ? \"display: none;\" : \"\" %>\" id=\"paypal_button\"><\/h1>\n\t<!-- Main Content Area -->\n\t<div id=\"content\" class=\"container content checkout-content\"><\/div>\n\t<!-- \/ Main Content Area -->\n\t<div id=\"marketing-footer\" class=\"container content\"><\/div>\n\t<%= footer(view) %>\n<\/div>","login_register_tmpl":"<header class=\"page-header login-header\">\n\t<h3><%= _('Sign In').translate() %><\/h3>\n<\/header>\n\n<div class=\"row login-body\">\n\t<div class=\"span6\" data-placeholder=\"Login\"><\/div>\n\n\t<div class=\"span6\">\n\t\t<% if (view.enableRegister) { %>\n\t\t\t<div class=\"new-customer\">\n\t\t\t\t<h3><%= _('New customer').translate() %><\/h3>\n\n\t\t\t\t<% if (view.enableCheckoutAsGuest) { %>\n\t\t\t\t\t<div class=\"\" data-placeholder=\"CheckoutAsGuest\"><\/div>\n\t\t\t\t<% } %>\n\n\t\t\t\t<div class=\"<% if (view.enableCheckoutAsGuest) { %>collapse <% } %>register\" data-placeholder=\"Register\"><\/div>\n\t\t\t<\/div>\n\t\t<% } %>\n\t<\/div>\n<\/div>","order_wizard_paymentmethod_giftcertificates_module_tmpl":"<% if (view.getTitle()) { %>\n\t<h3 class=\"section-header\">\n\t\t<%= view.getTitle() %>\n\t<\/h3>\n<% } %>\n<!-- <p class=\"collapsible collapsed section-header\"  data-toggle=\"collapse\" data-target=\"#gift-certificate-form\" style=\"padding-bottom: 10px;margin: 3px;\"> -->\n<p class=\"section-header\" style=\"padding-bottom: 10px;margin: 3px;\">\n\t\n\t\t<p class=\"checkout-cart-summary-macro-promo-title\">\n\t\t\t<%=_('Use a gift card or a gift certificate').translate() %>\n\t\t<\/p>\n\t\t<!-- \n\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t-->\n\t\n<\/p>\n<% if (!view.giftCertificates) { %>\n<form id=\"gift-certificate-form\" class=\"gift-certificate-form\">\n<div style=\"width:100%;border-top-width: 1px;border-top-style: dotted;height: auto;\"><\/div>\n\t<fieldset>\n\t\t<div class=\"control-group\">\n\t\t\t<label class=\"strong\" style=\"width:100%; font-size:14px; font-weight:normal\">\n\t\t\t\t<%= _('Enter your promotional code or coupon code below. Limit one per order please.').translate() %>\n\t\t\t<\/label>\n\t\t\t<div class=\"controls\">\n\t\t\t\t<input type=\"text\" class=\"input-medium\" name=\"code\" style=\"width:145px;\">\n\n\t\t\t\t<button type=\"submit\" class=\"btn\" style=\"background: #35c6f5;\n\t\t\t\t\tborder-color: #35c6f5;\n\t\t\t\t\tborder-radius: 18.5px;\n\t\t\t\t\tborder-style: solid;\n\t\t\t\t\tborder-width: 1px;\n\t\t\t\t\tcolor: rgb(255, 255, 255);\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\twidth: 70px;\n\t\t\t\t\ttext-transform: uppercase;\">\n\t\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t\t<\/button>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n<% } %>\n<div data-type=\"alert-placeholder-gif-certificate\"><\/div>\n\n<% if (view.giftCertificates && view.giftCertificates.length) { %>\n\n<table class=\"table\" style=\"font-size: 11px; color: grey;\">\n<%  _.each(view.giftCertificates, function (giftCertificate) { %>\n\t<% var giftcertificate = giftCertificate.get('giftcertificate') %>\n\t\n\t\t<button data-action=\"remove\" data-id=\"<%- giftcertificate.code %>\" class=\"btn\" style=\"background: #35c6f5;\n\t\t\tdisplay:none;\n\t\t\tborder-color: #35c6f5;\n\t\t\tborder-radius: 18.5px;\n\t\t\tborder-style: solid;\n\t\t\tborder-width: 1px;\n\t\t\tcolor: rgb(255, 255, 255);\n\t\t\tcursor: pointer;\n\t\t\twidth: 70px;\n\t\t\ttext-transform: uppercase;\">\n\t\t\t<%= _('Remove').translate() %>\n\t\t<\/button>\n\t<tr>\n\t\t<td>\n\t\t\t<b><%= _('Gift Certicficate number').translate() %><\/b>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<b><%= _('Amount applied').translate() %><\/b>\n\t\t<\/td>\t\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<b><%= _('Remaining balance').translate() %><\/b>\n\t\t<\/td>\t\n\t\t<td>\n\t\t\t&nbsp;\n\t\t<\/td>\n\t<\/tr>\n\t\n\t\n\t\n\t<tr>\n\t\t<td>\n\t\t\t<%= SC.macros.formatPaymentMethod(giftCertificate) %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<%= _('$(0)').translate(giftcertificate.amountapplied_formatted) %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<%= _('$(0)').translate(giftcertificate.amountremaining_formatted) %>\n\t\t<\/td>\t\t\n\t\t<td class=\"right-aligned\">\n\t\t\t<a href=\"#\" data-action=\"remove\" data-id=\"<%- giftcertificate.code %>\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/a>\n\t\t<\/td>\n\t<\/tr>\n<% }) %>\n<\/table>\n<% } else{%>\n\n<form id=\"gift-certificate-form\" class=\"gift-certificate-form\">\n<div style=\"width:100%;border-top-width: 1px;border-top-style: dotted;height: auto;\"><\/div>\n\t<fieldset>\n\t\t<div class=\"control-group\">\n\t\t\t<label class=\"strong\" style=\"width:100%; font-size:14px; font-weight:normal\">\n\t\t\t\t<%= _('Enter your promotional code or coupon code below. Limit one per order please.').translate() %>\n\t\t\t<\/label>\n\t\t\t<div class=\"controls\">\n\t\t\t\t<input type=\"text\" class=\"input-medium\" name=\"code\" style=\"width:145px;\">\n\n\t\t\t\t<button type=\"submit\" class=\"btn\" style=\"background: #35c6f5;\n\t\t\t\t\tborder-color: #35c6f5;\n\t\t\t\t\tborder-radius: 18.5px;\n\t\t\t\t\tborder-style: solid;\n\t\t\t\t\tborder-width: 1px;\n\t\t\t\t\tcolor: rgb(255, 255, 255);\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\twidth: 70px;\n\t\t\t\t\ttext-transform: uppercase;\">\n\t\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t\t<\/button>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n\n<% } %>","checkout_as_guest_tmpl":"<p>\n\t<%= _('Checkout as a guest and you will have an opportunity to create an account when you are finished.').translate() %>\n<\/p>\n\n<form class=\"register-guest-form\">\n\t<fieldset>\n\t\t<div class=\"form-actions register-guest-actions\">\n\t\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t\t<%= _('Checkout as a guest').translate() %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n\n<div class=\"collapse in register\">\n\t<%= _('Want to create an Account first?').translate() %>\n\t<a href=\"#\" class=\"btn-link\" data-toggle=\"collapse\" data-target=\".register\">\n\t\t<%= _('Register Now').translate() %>\n\t<\/a>\n<\/div>","order_wizard_paymentandbilling_module_tmpl":"<style type=\"text\/css\">\n\n.review-layover{\n\tposition:absolute;\n\tmargin-left: 50px;\n\tmargin-top: -170px;\n\twidth: 500px;\n\theight: 400px;\n\tbackground: white;\n\t-webkit-box-shadow: 10px 10px 10px #9E9E9E;\n    -moz-box-shadow:    10px 10px 10px #9E9E9E;\n    box-shadow:         10px 10px 10px #9E9E9E;\n    z-index:999;\n    overflow:scroll;\n    height:\n}\n#cardmessage_module{\n\tborder\n}\n<\/style>\n\n<% console.log('tuta'); console.log(view.profile.get(\"creditcards\")); var paymentmethods = view.profile.get(\"creditcards\").models;  %>\n<% _.each(paymentmethods, function (paymentmethod) { console.log(paymentmethod); %>\n<div class=\"row-fluid\">\n\t<div style=\"width: 605px; height: 160px; border-width:2px; border-color: #e2e2e2; border-style: solid; display: inline-flex;\">\n\t<div class=\"span6 wizard-showpayments-billing-payment-method\" style=\"width: 220px; height: 140px; margin-left: 20px; font-size: 15px;\">\n\t\t<% if (paymentmethods.length || !view.wizard.hidePayment()) {%>\n\t\t\t<h4 class=\"section-header\"  style=\"color: #f87c00; font-size: 17px; margin-bottom: 10px; margin-left: 7px;\">\n\t\t\t\t<%= _('BILLING DETAILS').translate() %>\n\t\t\t<\/h4>\n\n\t\t\t<div class=\"payment-methods-summary\" style=\"margin-bottom: 7px;\">\t\t\n\t\t\t<input type=\"radio\" checked style=\"margin-right: 5px; color: #f97d00; background-color: #f97d00\">\n\t\t\t\t\t<%= SC.macros.formatPaymentMethod(paymentmethod, view.wizard.application.getConfig('creditCardIcons')) %>\n\t\t\t\t<% if (view.profile.get('isGuest') === 'T') { %>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h5><%- view.profile.get('email') %><\/h5>\n\t\t\t\t\t<\/div>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t<% if (paymentmethods.length > 0){ %>\n\t\t\t<div style=\"padding-top: 30px;\">\n\t\t\t<a href=\"\/creditcards\/<%=paymentmethod.get('internalid') %>\" data-toggle=\"show-in-modal\" style=\" margin-left: 31px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t<%= _('edit').translate() %>\n\t\t\t<\/a>\n\t\t\t<% }%>\n\t\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/newc\" data-toggle=\"show-in-modal\" style=\" border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t\t<%= _('Add New Credit Card \/ Address').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/div>\n\t\t<% } %>\n\t<\/div>\n\t\t\n\t\t<div style=\"margin-top: 25px;\">\n\t\t<img src=\"img\/vertical_dottenline.png\" \/>\n\t\t<\/div>\n\t\t\n\t<div class=\"span6 wizard-showpayments-billing-address\" style=\"height: 140px; width: 335px; margin-left: 40px; margin-top: 33px;\">\n\t<%  var bypayment =  _.where(view.profile.get('addresses').models, {id: paymentmethod.get('addressid') }); console.log(bypayment)  %> \n\t\t<%= address(bypayment[0], {\n\t\t\thideActions: true\n\t\t,\thideDefaults: true\n\t\t,\tverifyReview: \"review\"\n\t\t}) %>\n\t<\/div>\n\t\n\t<\/div>\n\t\n\t<div class=\"review-layover\" id=\"change-payment\" style=\"display:none; padding: 40px;\">\n\t\t<button type=\"button\" class=\"close\" onclick=\"jQuery('#change-payment').hide()\">\u00d7<\/button>\n\t\t<!-- billing address here -->\n\t\t<%\n\t\t\t\/\/ Wrap the address address macro to pass options in\n\t\t\tvar addressWrap = function (address) {\n\t\t\t\treturn SC.macros['address'](address, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\thideDefaults: true\n\t\t\t\t,\tselectedAddress: view.model.get(\"billaddress\")\n\t\t\t\t,\tverifyAddress: \"billaddress\"\n\t\t\t\t});\n\t\t\t}\n\t\t%>\n\t\t<div style=\"width:200px; float:right\">\n\t\t<%= displayInRows(view.profile.get('addresses').models, addressWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>\n\t\t\t\t<%\n\t\t\tvar creditcardWrap = function (creditcard) {\n\t\t\t\treturn SC.macros.creditcard(creditcard, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tshowActions: true\n\t\t\t\t,\tshowDefaults: false\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\ticons: view.wizard.application.getConfig('creditCardIcons')\n\t\t\t\t,\tselectedCreditcard: paymentmethod.get('internalid')\n\t\t\t\t,\tshowSecurityCodeForm: true\n\t\t\t\t,\tstep: \"review\"\n\t\t\t\t});\n\t\t\t} \n\t\t%>\n\t\t<\/div>\n\t\t<div  style=\"width:200px; float:left\">\n\t\t<%= displayInRows(view.profile.get(\"creditcards\").models, creditcardWrap, view.wizard.application.getConfig('itemsPerRow', 1)) %>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% }); %>\n\n\n<div class=\"test\" id=\"showpaymentsandbillings-creditcard\"><\/div>","order_wizard_registeremail_module_tmpl":"<h3 class=\"section-header\">\n\t<%= _('Enter Email Address').translate() %>\n<\/h3>\n<div class=\"control-group\">\n\t<label class=\"control-label\">\n\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<input\n\t\ttype=\"email\"\n\t\tname=\"email\"\n\t\tid=\"email\"\n\t\tclass=\"input-large\"\n\t\tplaceholder=\"<%- _('your@email.com').translate() %>\"\n\t\tvalue=\"<%- view.profile.get('email') || '' %>\"\n\t>\n\t<p class=\"help-block\">\n\t\t<%= _('We need you email address to send you information about your order.').translate() %>\n\t<\/p>\n<\/div>\n<label class=\"checkbox\">\n\t<input\n\t\ttype=\"checkbox\"\n\t\tname=\"sign-up-newsletter\"\n\t\t<%= view.profile.get('emailsubscribe') === 'T' ? 'checked' : '' %>\n\t>\n\t<%= _('Sign up for our Newsletter to receive promotions').translate() %>\n<\/label>\n","order_wizard_showpaymentsandbillings_module_tmpl":"<style type=\"text\/css\">\n\n.review-layover{\n\tposition:absolute;\n\tmargin-left: 50px;\n\tmargin-top: -170px;\n\twidth: 500px;\n\theight: 400px;\n\tbackground: white;\n\t-webkit-box-shadow: 10px 10px 10px #9E9E9E;\n    -moz-box-shadow:    10px 10px 10px #9E9E9E;\n    box-shadow:         10px 10px 10px #9E9E9E;\n    z-index:999;\n    overflow:scroll;\n    height:\n}\n<\/style>\n\n<div class=\"row-fluid\">\n\t<h3 class=\"section-header car-background\">\n\t\t<%= _('SELECT YOUR PAYMENT METHOD').translate() %>\n\t<\/h3>\n\t<div style=\"padding-top: 30px;\">\n\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/new\" data-toggle=\"show-in-modal\" style=\" border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t<%= _('Add New Card').translate() %>\n\t\t<\/a>\n\t<\/div>\n\t<% var paymentmethods = view.getPaymentmethods();%>\n\t<div class=\"span6 wizard-showpayments-billing-payment-method\" style=\"width: 220px; height: 140px; margin-left: 20px; font-size: 15px;\">\n\t\t<div class=\"payment-methods-summary\" style=\"margin-bottom: 7px;\">\t\t\n\t\t\t<input type=\"radio\" checked style=\"margin-right: 5px; color: #f97d00; background-color: #f97d00\">\n\t\t\t\t<% console.log(paymentmethods); _.each(paymentmethods, function (paymentmethod) { %>\n\t\t\t\t\t<%= SC.macros.formatPaymentMethod(paymentmethod, view.wizard.application.getConfig('creditCardIcons')) %>\n\t\t\t\t<% }); %>\n\t\t\t\t<a href=\"\/creditcards\/<%=paymentmethods[0].get('creditcard').internalid%>\" data-toggle=\"show-in-modal\" style=\" margin-left: 31px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t<%= _('edit').translate() %>\n\t\t\t<\/a>\n\t\t<\/div>\n\t<\/div>\n\t\t\n\t<div style=\"margin-top: 25px;\">\n\t\t<img src=\"img\/vertical_dottenline.png\" \/>\n\t<\/div>\n\t\t\n\t<div class=\"span6 wizard-showpayments-billing-address\" style=\"height: 140px; width: 335px; margin-left: 40px; margin-top: 33px;\">\n\t<% console.log(\"TEMPLATE\" + view.profile.get('addresses').length); %>\n\t\t<%= address(view.getAddresses(), {\n\t\t\thideActions: true\n\t\t,\thideDefaults: true\n\t\t,\tverifyReview: \"review\"\n\t\t}) %>\n\t<\/div>\n<\/div>\n<div class=\"span6\">\n\t\t\t<%= SC.macros.creditcardSecurityNumberForm({\n\t\t\t\terror: undefined\n            ,   value:  \"\"\n            ,\thidehelp: true\n            ,\tstep: \"review\"\n\t\t\t}) %>\n\t\t<\/div>","order_wizard_confirmation_module_tmpl":"<div class=\"\" style=\"display:none;\">\n<!--alert alert-block alert-success fade in-->\n\t\n\t<div style=\"float: left; margin-left: 35px;\" >\n<div class=\"checker\" style=\"display:none;\"><\/div>\n\t<h4 class=\"thankyou-title\" style=\"color: rgb(254, 107, 56);\ndisplay: block;\nfont-size: 36px;\nline-height: 18px;\nmargin: 20px 0px 20px;\npadding-bottom: 0px;\nfont-family: OmnesRegularRegular,sans-serif;\"><%= _('Thank you for your order!').translate() %><\/h4>\n\t<%= _('Your confirmation number is <big><strong>#$(0)<\/strong><\/big>.').translate(view.confirmationNumber) %><br\/>\n<%= _('Keep your eyes peeled for an order confirmation email.').translate() %>\n\t<\/div>\n<div style=\"float: right; margin-top: 20px;\">\n<input onclick=\"location.href='<%= SC.ENVIRONMENT.siteSettings.touchpoints.home %>'\" class=\"bgbutton-checkout\" type=\"button\" data-touchpoint=\"home\" data-hashtag=\"#\/\" value=\"<%= _('Continue shopping').translate() %>\" alt=\"<%= _('Poppin.com').translate() %>\" style=\"display: block; font-weight: 400; border: 1px solid white;\"><\/input>\n\t<div class=\"social\" style=\"padding-left: 50px;\">\n\t  \t<p class=\"social-links\">\n\t  \t\t<a class=\"facebook\" href=\"https:\/\/www.facebook.com\/poppin\" title=\"Facebook\" target=\"_blank\">Facebook<\/a>\n\t  \t\t<a class=\"twitter\" href=\"http:\/\/twitter.com\/poppin\" title=\"Twitter\" target=\"_blank\">Twitter<\/a>\n\t  \t\t<a class=\"pinterest\" href=\"http:\/\/pinterest.com\/poppin\" title=\"Pinterest\" target=\"_blank\">Pinterest<\/a>\n\t  \t\t<a class=\"icon-print\" title=\"Print\" href=\"#\" onclick=\"window.print()\" style=\"width:30px; height: 22px;\">Print<\/a>\n\t  \t<\/p>\n\t<\/div>\n\t<\/div>\n\n\n\n\n\n\n\n\n\n\n    \n<\/div>","address_tmpl":"<% var model = view.model || new Backbone.Model(); %>\n<% if (!view.inModal) { %>\n\t<h1 class=\"\">\n\t\t<%= model.isNew() ? _('Add a new Address').translate() : _('Save').translate() %>\n\t<\/h1>\n\n\t<a href=\"\/\" class=\"back-btn\">\n\t\t<%= _('&lt; Back to Account').translate() %>\n\t<\/a>\n\n\t<hr class=\"divider-small\">\n\t<% if (!view.collection.length) { %>\n\t\t<p>\n\t\t\t<b><%= _('We have no address on file for this account.').translate() %><\/b><br>\n\t\t\t<%= _('For faster checkouts, please enter a shipping address bellow').translate() %>\n\t\t<\/p>\n\t\t<hr class=\"divider-small\">\n\t<% } %>\n<% } %>\n\n<form class=\"\" action=\"addressbook.ss\" method=\"POST\">\n<% if (view.inModal) { %>\n\t<div class=\"modal-body\" style=\"margin: 0 auto;width: 400px;\">\n<% } %>\n<%= addressFrom(model, {\n\tcountries: view.options.application.getConfig('siteSettings.countries')\n}) %>\n\n<% if (view.inModal) { %>\n\t<\/div>\n<% } %>\n\t<div class=\"<%- view.inModal ? 'modal-footer' : 'form-actions' %>\">\n\t\t<button type=\"submit\" class=\"btn btn-link\">\n\t\t\t<%= model.isNew() ? _('Save Address').translate() : _('Save').translate() %>\n\t\t<\/button>\n\n\t\t<% if (view.inModal || view.collection.length) { %>\n\t\t\t<a class=\"btn btn-link\" data-dismiss=\"modal\">\n\t\t\t\t<%= _('Cancel').translate() %>\n\t\t\t<\/a>\n\t\t<% } %>\n\n\t\t<% if (!view.inModal) { %>\n\t\t\t<button type=\"reset\" class=\"btn btn-link hide\" data-action=\"reset\">\n\t\t\t\t<%= _('Reset').translate() %>\n\t\t\t<\/button>\n\t\t<% } %>\n\t<\/div>\n<\/form>","product_details_tmpl":"<div class=\"view-header\">\n\t<%= breadcrumb(view.model.get('_breadcrumb')) %>\n\t<div id=\"banner-content-top\" class=\"content-banner banner-content-top\"><\/div>\n<\/div>\n<div itemscope itemtype=\"http:\/\/schema.org\/Product\" class=\"view-body\">\n\t<div id=\"banner-details-top\" class=\"content-banner banner-details-top\"><\/div>\n\t<div class=\"row-fluid item-detailed-page\">\n\t\t<div class=\"span7 item-detailed-image-container\">\n\t\t\t<div id=\"banner-image-top\" class=\"content-banner banner-image-top\"><\/div>\n\t\t\t<%= SC.macros[view.application.getConfig('macros.itemDetailsImage')](view.model.get('_images', true), view) %>\n\t\t\t<div id=\"banner-image-bottom\" class=\"content-banner banner-image-bottom\"><\/div>\n\t\t<\/div>\n\t\t<div class=\"span5\">\n\t\t\t<div class=\"well item-detailed-info\">\n\t\t\t\t<div class=\"well-header page-header\">\n\t\t\t\t\t<div id=\"banner-summary-bottom\" class=\"content-banner banner-summary-bottom\"><\/div>\n\t\t\t\t\t<h1 data-type=\"social-description\">\n\t\t\t\t\t\t<%= view.model.get('_pageHeader') %>\n\t\t\t\t\t<\/h1>\n\t\t\t\t\t<p itemprop=\"offers\" itemscope itemtype=\"http:\/\/schema.org\/Offer\" class=\"lead lead-small\">\n\t\t\t\t\t\t<%= showItemPrice(view.model) %>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<span class=\"pull-right\">\n\t\t\t\t\t\t<%= _('SKU: #$(0)').translate(view.model.get('_sku')) %>\n\t\t\t\t\t<\/span>\n\t\t\t\t\t<meta itemprop=\"sku\" content=\"<%= view.model.get('_sku')%>\" \/>\n\t\t\t\t\t<div itemprop=\"aggregateRating\" itemscope itemtype=\"http:\/\/schema.org\/AggregateRating\" class=\"item-rating\">\n\t\t\t\t\t\t<%= starRating({\n\t\t\t\t\t\t\tmax: view.options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\tvalue: view.model.get('_rating')\n\t\t\t\t\t\t,\tclassName: 'star pull-left'\n\t\t\t\t\t\t,\tfillRounded: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t\t<span class=\"review-total\">\n\t\t\t\t\t\t\t<%= _('($(0))').translate(view.model.get('_ratingsCount')) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<meta itemprop=\"reviewCount\" content=\"<%= view.model.get('_ratingsCount') %>\" \/>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"well-body\">\n\t\t\t\t\t<% if (!view.model.isProperlyConfigured()) { %>\n\t\t\t\t\t\t<div class=\"alert alert-error\">\n\t\t\t\t\t\t\t<%= _('<b>Warning<\/b>: This item is not properly configured, please contact your administrator.').translate() %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<% } else { \n\t\t\t\t\t\t\/*\n\t\t\t\t\t\tRender a single option placeholder:\n\t\t\t\t\t\t===================================\n\t\t\t\t\t\tAny HTML element that matches [data-type=option], if it's rendered by ItemDetails.View \n\t\t\t\t\t\twill be populated by the render of a single macro for a single option, especified by the attributes:\n\t\t\t\t\t\t\tdata-cart-option-id: the id of the cart opion\n\t\t\t\t\t\t\tdata-macro: the macro you want this option to be rendered with, if omited the default for the option will be used\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"options-container\" \n\t\t\t\t\t\t\tdata-type=\"option\" \n\t\t\t\t\t\t\tdata-cart-option-id=\"cart_option_id\" \n\t\t\t\t\t\t\tdata-macro=\"macroName\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\n\t\t\t\t\t\tRender all options placeholder:\n\t\t\t\t\t\t===============================\n\t\t\t\t\t\tAny HTML element that matches [data-type=all-options], if it's rendered by ItemDetails.View \n\t\t\t\t\t\twill be populated with the result of the execution of all the options with the macros, \n\t\t\t\t\t\teither the default one or the one configured in the itemOptions array.\n\t\t\t\t\t\tUse the data-exclude-options to select the options you dont want to be rendered here,\n\t\t\t\t\t\tthis is a coma separated list, for instace: cart_option_id1, cart_option_id2\n\t\t\t\t\t\t*\/\n\t\t\t\t\t%>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tid=\"default-options-container\" \n\t\t\t\t\t\t\tclass=\"options-container default-options-container\" \n\t\t\t\t\t\t\tdata-type=\"all-options\" \n\t\t\t\t\t\t\tdata-exclude-options=\"\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<form action=\"#\" class=\"form-inline add-to-cart-form\">\n\t\t\t\t\t\t\t<% if (view.model.get('_itemType') !== 'GiftCert'){ %>\n\t\t\t\t\t\t\t\t<label for=\"quantity\">\n\t\t\t\t\t\t\t\t\t<%= view.model.get('_minimumQuantity') !== 1 ? _('Quantity (Minimum of $(0) required)').translate(view.model.get('_minimumQuantity')) : _('Quantity').translate() %>\n\t\t\t\t\t\t\t\t<\/label>\n\t\t\t\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t\t\t\t<input type=\"number\" name=\"quantity\" id=\"quantity\" class=\"input-mini quantity\" value=\"<%= view.model.get('quantity') %>\" min=\"1\">\n\t\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity\" value=\"1\">\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t\t<%= itemDetailsStock(view.model.getStockInfo()) %>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div data-type=\"alert-placeholder\"><\/div>\n\t\t\t\t\t\t\t<button data-type=\"add-to-cart\" class=\"btn btn-primary btn-large add-to-cart-btn\"<% if (!view.model.isReadyForCart()) {%> disabled<%}%>>\n\t\t\t\t\t\t\t\t<i class=\"icon-shopping-cart icon-white\"><\/i>\n\t\t\t\t\t\t\t\t<%= _('Add to Cart').translate() %>\n\t\t\t\t\t\t\t<\/button>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"well-footer\">\n\t\t\t\t\t<div class=\"social-share-icons\" data-toggle=\"social-share-icons\"><\/div>\n\t\t\t\t\t<div id=\"banner-summary-bottom\" class=\"content-banner banner-summary-bottom\"><\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div id=\"banner-details-bottom\" class=\"content-banner banner-details-bottom\"><\/div>\n\t<\/div>\n\t\n\t<% if (view.details && view.details.length) { %>\n\t\t<div id=\"banner-content-top\" class=\"content-banner banner-content-top\"><\/div>\n\t\t<div class=\"accordion\">\n\t\t\t<% _.each(view.details, function (detail, index) { %>\n\t\t\t<div id=\"accordion-group-<%= index %>\" class=\"accordion-group accordion-group-<%= index %>\">\n\t\t\t\t<div class=\"accordion-heading\">\n\t\t\t\t\t<h4 class=\"accordion-toggle <%= !detail.opened ? 'collapsed' : '' %>\" data-toggle=\"collapse\" data-target=\"#collapsed-<%= index %>\">\n\t\t\t\t\t\t<%= detail.name %>\n\t\t\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t\t<\/h4>\n\t\t\t\t<\/div>\n\t\t\t\t<div id=\"collapsed-<%= index %>\" class=\"accordion-body collapse collapsed-<%= index %> <%= detail.opened ? 'in' : '' %>\">\n\t\t\t\t\t<div class=\"accordion-inner\">\n\t\t\t\t\t\t<%= detail.content %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\t\t\t\n\t\t\t<% }) %>\n\t\t<\/div>\n\t\t<div id=\"banner-content-bottom\" class=\"content-banner banner-content-bottom\"><\/div>\n\t<% } %>\n\t\n\t<div data-type=\"review-list-placeholder\" data-itemid=\"<%= view.model.get('_id') %>\" data-url=\"<%= view.model.get('urlcomponent') %>\" data-order=\"useful_count:desc\" data-title=\"<%= _('Ratings &amp; Reviews').translate() %>\" data-subtitle=\"<%= _('Most Helpful Reviews').translate() %>\"><\/div>\n\t<div id=\"banner-details-bottom\" class=\"content-banner banner-details-bottom\"><\/div>\n<\/div>","order_wizard_paymentmethod_paypal_module_tmpl":"<div class=\"row-fluid\">\n\t<div class=\"span4\">\n\t\t<img class=\"paypal-logo\" src=\"img\/paypal.png\" alt=\"PayPal\">\n\t<\/div>\n<\/div>","order_wizard_showpayments_module_tmpl":"<style type=\"text\/css\">\n\n.review-layover{\n\tposition:absolute;\n\tmargin-left: 50px;\n\tmargin-top: -170px;\n\twidth: 500px;\n\theight: 400px;\n\tbackground: white;\n\t-webkit-box-shadow: 10px 10px 10px #9E9E9E;\n    -moz-box-shadow:    10px 10px 10px #9E9E9E;\n    box-shadow:         10px 10px 10px #9E9E9E;\n    z-index:999;\n    overflow:scroll;\n    overflow-x: hidden;\n    overflow-y: auto;\n    display:none;\n    position: fixed;\n    height: auto;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-top-left-radius: 6px;\n    border-top-right-radius: 6px;\n    border-bottom-right-radius: 6px;\n    border-bottom-left-radius: 6px;\n}\n\n\n<\/style>\n<% \n\tvar cart = view.application.getCart();\n\tvar sum = 0;\n\tvar domainSum = 0;\n\tcart.get(\"lines\").each(function(line){\n\tsum += line.get('amount') - line.get('total');\n\tdomainSum += line.get('item').attributes.pricelevel1 * line.get('item').attributes.quantity - line.get('amount');\n\t});\n\tdomainSum += view.model.get('summary').discounttotal + sum;\n\tdomainSum = Math.round(domainSum*100)\/100;\n%>\n<script type=\"text\/javascript\" id=\"checkoutTagScript\">\nvar itemsCollection = [];\n<% var itemDiscount = 0 %>\n<% for( var i=0;i< view.model.get('lines').models.length;i++) {%>\n<% var price = view.model.get('lines').models[i].get('total') \/ view.model.get('lines').models[i].get('quantity') %>\n<% price = Math.round(price*100)\/100; %>\nitemsCollection.push({sku:'<%=view.model.get(\"lines\").models[i].get(\"item\").get(\"_sku\")%>', productId:'<%=view.model.get('lines').models[i].id%>',price:'<%=price %>',quantity:'<%=view.model.get('lines').models[i].get('quantity') %>'});\n<% itemDiscount += view.model.get('lines').models[i].get('discount') %>\n<% }%>\nwindow.forPixeldata = {\nuserId:'<%= view.wizard.options.profile.id %>'\n,total:'<%= view.model.get('summary').total %>'\n,transactionId:''\n,email:'<%= view.wizard.options.profile.get('email') %>'\n,name:'<%= view.wizard.options.profile.get('firstname') + ' ' + view.wizard.options.profile.get('lastname') %>'\n\/\/,orderCount: '<%= view.wizard.options.profile.get('ordercount') %>'\n,items:itemsCollection\n};\n<\/script>\n\n<script>\nvar orderID = \"\";\n\tvar orderTotal = \"<%=view.model.get('summary').total%>\";\n\tvar orderTax = \"<%=view.model.get('summary').taxtotal%>\";\n\tvar orderShipping = \"<%=view.model.get('summary').shippingcost%>\";\n\tvar orderPromoCode =\"<%=view.model.get('promocode') ==null ? '':view.model.get('promocode').code%>\";\n\tvar orderSubtotal = \"<%=view.model.get('summary').subtotal%>\";\n\tvar customerId ='<%= view.wizard.options.profile.id %>';\n\t<% var shipaddress = _.filter(view.model.get('addresses').models,function(model){ return model.id==view.model.get('shipaddress');})[0] %>\n\t<% var billaddress = _.filter(view.model.get('addresses').models,function(model){ return model.id==view.model.get('billaddress');})[0] %>\n\tvar customerCity = \"<%=billaddress ? billaddress.get('city') : ''%>\" || \"<%=shipaddress ? shipaddress.get('city') : ''%>\";\n\tvar customerState = \"<%=billaddress ? billaddress.get('state') : ''%>\" || \"<%=shipaddress ? shipaddress.get('state') : ''%>\";\n\tvar customerPostal = \"<%=billaddress ? billaddress.get('zip') : ''%>\" || \"<%=shipaddress ? shipaddress.get('zip') : ''%>\";\n\tvar customerCountry = \"<%=billaddress ? billaddress.get('country') : ''%>\" || \"<%=shipaddress ? shipaddress.get('country') : ''%>\";\n\t\/\/var orderCount = '<%= view.wizard.options.profile.get('ordercount') %>'; \n\tvar strpageDataVarURL = \"\/app\/site\/hosting\/scriptlet.nl?script=250&deploy=1&orderitems=\" + escape(itemsCollection) + \"&subtotal=\" + escape(orderSubtotal);\n\tvar discount = '<%= domainSum ? domainSum : itemDiscount ? itemDiscount : view.model.get('summary').discounttotal %>';\n\tvar pageData = {\n\t\t\"order\" : {\n\t\t\t\"id\" : orderID,\n\t\t\t\"total\" : orderTotal,\n\t\t\t\"tax\" : orderTax,\n\t\t\t\"shipping\" : orderShipping,\n\t\t\t\"discount\" : discount,\n\t\t\t\"promoCode\" : orderPromoCode,\n\t\t\t\"currencyCode\" : \"USD\"\n\t\t},\n\t\t\"customer\" : {\n\t\t\t\"id\" : customerId,\n\t\t\t\"city\" : customerCity,\n\t\t\t\"state\" : customerState,\n\t\t\t\"postal\" : customerPostal,\n\t\t\t\"country\" : customerCountry \/\/,\n\t\t\t\/\/\"ordercount\" : orderCount\n\t\t},\n\t\t\"navigation\" : {  pageName: \"Review\" },\n\t\t\"items\" : itemsCollection\n\t};\n$j(window).trigger('updateCheckoutJsonData',pageData);\n\t<\/script>\n<% console.log(\"view\"); console.log(view);\n\tvar is_active = false\n\t,\torder_delivery_method = view.model.get('shipmethod')\n\t,\tshipping_methods = view.model.get('shipmethods');\n\tshipping_methods.models.sort(function(obj1, obj2) {\n return obj1.get('rate') - obj2.get('rate');});\t\n%>\n\n<div class=\"row-fluid\">\n\t<div class=\"row-fluid shipments-shipping-details-body\" style=\"width: 625px; height: 240px; display: inline-flex;\">\n\t\t<div class=\"span6 shipments-shipping-method\" style=\"padding-left: 22px; width: 295px; height: 240px; margin-right: 24px; float: left; border-width:2px; border-color: #e2e2e2; border-style: solid;\">\n\t\t\t<h4 class=\"section-header\" style=\"color: #f87c00; font-size: 17px; margin-bottom: 10px;\">\n\t\t\t\t<%= _('DELIVERY DETAILS').translate() %>\n\t\t\t<\/h4>\n\t\t\t<% shipping_methods.each(function (shipmethod) { %>\n\t\t\t\t<% is_active = order_delivery_method === shipmethod.get('internalid') %>\n\t\t\t\t<label class=\"delivery-option <%= is_active ? 'active' : '' %>\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"delivery-options\"\n\t\t\t\t\t\tid=\"delivery-options-<%= shipmethod.get('internalid')%>\"\n\t\t\t\t\t\tvalue=\"<%- shipmethod.get('internalid')%>\" \n\t\t\t\t\t\t<%= is_active ? 'checked' : '' %>\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"delivery-option-label\">\n\t\t\t\t\t\t<b><%= shipmethod.get('name') %><\/b> - \n\t\t\t\t\t<\/span>\n\t\t\t\t\t<span class=\"delivery-option-rate\">\n\t\t\t\t\t\t<%= shipmethod.get('rate_formatted') %>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/label>\n\t\t\t<% }); %>\n\t\t<\/div>\n\t\t<% var paymentmethods = view.getPrimaryPaymentmethods(); console.log(\"paymentmethods.length\"); console.log(paymentmethods);%>\n\t<div class=\"span6 wizard-showpayments-billing-payment-method\" style=\"padding-left: 22px; width: 290px; height: 240px; float: left; margin-right: 16px; border-width:2px; border-style: solid;border-color:#8cd820\">\n\t\t<% if (paymentmethods.length || !view.wizard.hidePayment()) {%>\n\t\t\t<h4 class=\"section-header\"  style=\"color: #f87c00; font-size: 17px; margin-bottom: 10px; margin-left: 7px;\">\n\t\t\t\t<%= _('BILLING DETAILS').translate() %>\n\t\t\t<\/h4>\n\t\t\t<div class=\"payment-methods-summary\" style=\"margin-bottom: 0px;\">\t\t\n\t\t\t\t<input type=\"radio\" checked style=\"margin-right: 5px; color: #f97d00; background-color: #f97d00\">\n\t\t\t\t<% _.each(paymentmethods, function (paymentmethod) { %>\n\t\t\t\t\t<%= SC.macros.formatPaymentMethod(paymentmethod, view.wizard.application.getConfig('creditCardIcons')) %>\n\t\t\t\t<% }); %>\n\t\t\t\t<% if (view.profile.get('isGuest') === 'T') { %>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h5><%- view.profile.get('email') %><\/h5>\n\t\t\t\t\t<\/div>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\t\n\t\t\t<% if (paymentmethods.length > 0  && paymentmethods[0].attributes.creditcard){ %>\n\t\t\t<div class=\"span6\" style=\"margin-top: 10px;  margin-bottom: 30px;\">\n\t\t\t<%=!!(paymentmethods[0].get('creditcard').ccsecuritycode)?'':'<p style=\"height: 25px; font-weight:bold;color:rgb(31, 216, 31); width: 240px;font-size: 14px; margin-left: 5px; \">Please enter security code (CVC)<\/p>'%>\n\t\t\n\t\t\t<%= SC.macros.creditcardSecurityNumberForm({\n\t\t\t\terror    : undefined\n\t\t            ,   value    :  paymentmethods[0].get('creditcard').ccsecuritycode || jQuery('#ccsecuritycode').val()\n\t\t\t    ,\thidehelp : false\n\t\t\t    ,\tstep     : \"review\"\n\t\t\t    ,   hidden   : !!(paymentmethods[0].get('creditcard').ccsecuritycode)\n\t\t\t}) %>\n\t\t\t\t<div style=\"padding: 5px; border: 2px solid #e2e2e2; width:290px; font-size:14px; font-weight:normal; display: none;position: absolute;background: white;top: 205px;left: 579px;z-index: 1000;\" id=\"whatisthisinfo\">\n\t\t\t\t<img src=\"img\/explain_cvc.png\" alt=\"explain\"><br\/>\n\t\t\t\tFor security purposes, we require the Card Security Code on your credit card. \n\t\t\t\tFor most credit cards, enter the three-digit number that follows your account number on the back of your card. \n\t\t\t\tIf you have an American Express card, enter the four-digit number printed above your account number on the front of your card.\n\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<div>\n\t\t\t<!--<a href=\"\/creditcards\/<%=paymentmethods[0].get('creditcard').internalid%>\" data-toggle=\"show-in-modal\" style=\" margin-left: 31px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t<%= _('edit').translate() %>\n\t\t\t<\/a>--!>\n\t\t\t\n\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t\t<a href=\"\/creditcards\/new\" data-toggle=\"show-in-modal\" style=\"border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t<%= _('add new card').translate() %>\n\t\t\t<\/a>\n\t\t\t<% if (paymentmethods.length > 0){ %>\n\t\t\t\t<a href=\"#\" onclick=\"jQuery('#change-payment').show()\" style=\"margin-left: 20px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t\t<%= _('use another card').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<% } %>\n\t\t\t<% } %>\n\t<\/div>\n\t\t\n\n\t<\/div>\n\t<div class=\"row-fluid showpayments-billing-payment-method\" style=\"width: 625px; height: 240px; display: inline-flex;\">\n\t\t\n\t<div class=\"span6 shipments-shipping-address\" style=\"padding-left: 22px; width: 295px; height: 240px; margin-right: 24px; float: left; border-width:2px; border-color: #e2e2e2; border-style: solid;\" >\n\t\t\t<h4 class=\"section-header\" style=\"color: #f87c00; font-size: 17px; margin-bottom: 10px;\">\n\t\t\t\t<%= _('SHIPPING ADDRESS').translate() %>\n\t\t\t<\/h4>\n\t\t\t\n\t\t\t<%= address(view.profile.get('addresses').get(view.model.get('shipaddress')), {\n\t\t\t\thideActions: true\n\t\t\t,\thideDefaults: true\n\t\t\t,\tverifyReview: \"review\"\n\t\t\t}) %>\n\t\t\t\n\t\t\t<p style=\"margin: 3px 0px -1px -3px;\">\n\t\t\t\t<input type=\"radio\" checked style=\"margin-bottom: 7px;\">\n\t\t\t\t<span><b>Ship to this address<\/b><\/span>\n\t\t\t<\/p>\n\t\t\t<a class=\"btn-edit-address\" href=\"\/addressbook\/<%-view.model.get('shipaddress')%>\" data-toggle=\"show-in-modal\" style=\"border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t<%= _('edit').translate() %>\n\t\t\t<\/a>\n\t\t\t<%if(view.profile.get(\"addresses\").length > 1){%>\n\t\t\t\t<a href=\"#\" class=\"btn-edit-address\" data-action=\"changeaddress\" data-id=\"shipaddress\" style=\"margin-left: 20px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t<%= _('change').translate() %><\/a>\n\t\t\t<%}%>\n\t\t<\/div>\t\n\t\n\t\n\t<div class=\"span6 shipments-shipping-address\" style=\"padding-left: 22px; width: 290px; height: 240px; float: left; margin-right: 16px; border-width:2px; border-color: #e2e2e2; border-style: solid;\">\n\t\t\t<h4 class=\"section-header\" style=\"color: #f87c00; font-size: 17px; margin-bottom: 10px;\">\n\t\t\t\t<%= _('BILLING ADDRESS').translate() %>\n\t\t\t<\/h4>\n\t\t\t\n\t\t\t<%= address(view.profile.get('addresses').get(view.model.get('billaddress')), {\n\t\t\t\thideActions: true\n\t\t\t,\thideDefaults: true\n\t\t\t,\tverifyReview: \"review\"\n\t\t\t}) %>\n\t\t\t\n\t\t\t<p style=\"margin: 3px 0px -1px -3px;\">\n\t\t\t<input type=\"radio\" checked style=\"margin-bottom: 7px;\">\n\t\t\t<span><b>Use this address<\/b><\/span>\n\t\t\t<\/p>\n\t\t\t\t\t<a class=\"btn-edit-address\" href=\"\/addressbook\/<%-view.model.get('billaddress')%>\" data-toggle=\"show-in-modal\" style=\"border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t<%= _('edit').translate() %>\n\t\t<\/a>\n\t\t<%if(view.profile.get(\"addresses\").length > 1){%>\n\t\t<a href=\"#\" class=\"btn-edit-address\" data-action=\"changeaddress\" data-id=\"billaddress\" data-action style=\"margin-left: 20px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t<%= _('change').translate() %><\/a><%}%>\n\t\t<\/div>\n\t\n\t<\/div>\n\t\n\t\n\t<div class=\"review-layover\" id=\"edit-deliverymethod\" style=\"overflow: hidden; padding: 0px 0px 52px 0px; width: 260px; max-height: 160px; margin-top: -650px;  margin-left: 185px;\">\n\t\t\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" onclick=\"jQuery('#edit-deliverymethod').hide()\">&times;<\/button>\n\t\t\t\t<h3 class=\"modal-title\"> Delivery Method <\/h3>\n\t\t\t<\/div>\n\t\t\t<div style=\"padding: 10px 20px 0px 20px;\">\n\t\t\t<% shipping_methods.each(function (shipmethod) { %>\n\t\t\t\t<% is_active = order_delivery_method === shipmethod.get('internalid') %>\n\t\t\t\t<label class=\"delivery-option <%= is_active ? 'active' : '' %>\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"review-delivery-options\"\n\t\t\t\t\t\tid=\"delivery-options-<%= shipmethod.get('internalid')%>\"\n\t\t\t\t\t\tvalue=\"<%- shipmethod.get('internalid')%>\" \n\t\t\t\t\t\t<%= is_active ? 'checked' : '' %>\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"delivery-option-label\">\n\t\t\t\t\t\t<b><%= shipmethod.get('name') %><\/b> - \n\t\t\t\t\t<\/span>\n\t\t\t\t\t<span class=\"delivery-option-rate\">\n\t\t\t\t\t\t<%= shipmethod.get('rate_formatted') %>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/label>\n\t\t\t<% }); %>\n\t\t\t<\/div>\n\t\t\t<div style=\"margin-top: 70px; margin-left: 15px;\">\n\t\t\t\t\t<a href=\"#\" name=\"submit-shipping-method\" class=\"btn-edit-address\" style=\"margin-left: 66px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t\t\t<%= _('ok').translate() %><\/a>\n\t\t\t\t\t<a href=\"#\" class=\"btn-edit-address\" onclick=\"jQuery('#edit-deliverymethod').hide()\" style=\"margin-left: 26px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t\t\t<%= _('cancel').translate() %><\/a>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\n\t\t<div class=\"review-layover\" id=\"change-shipping\" style=\"width: 560px; padding: 10px 0px 0px 0px; margin-top: -710px; min-height: 383px; max-height: 383px;\">\n\t\t\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-action=\"canceladdressselection\">&times;<\/button>\n\t\t\t\t<h3 class=\"modal-title\"> Change Shipping Address <\/h3>\n\t\t\t<\/div>\n\t\t\t<p style=\"margin-top: 10px;\">\n\t\t\t<%\n\t\t\t\t\/\/ Wrap the address address macro to pass options in\n\t\t\t\tvar addressWrap = function (address) {\n\t\t\t\t\treturn SC.macros['address'](address, {\n\t\t\t\t\t\tshowSelect: true\n\t\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t\t,\thideDefaults: true\n\t\t\t\t\t,\tselectedAddress: view.model.get(\"shipaddress\")\n\t\t\t\t\t,\tstep: \"review\"\n\t\t\t\t\t,\tverifyAddress: \"shipaddress\"\n\t\t\t\t\t,   stopSelect: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t%>\n\t\t\t<\/p>\n\t\t\t\n\t\t\t<div style=\"float:left; padding: 0px 0px 20px 10px;\">\n\t\t\t\t<p>\n\t\t\t\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/new\" data-toggle=\"show-in-modal\" style=\" border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t\t\t<%= _('Add New Address').translate() %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/p>\n\t\t\t\t<%= displayInRows(view.profile.get('addresses').models, addressWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>\n\t\t\t<\/div>\n\t\t\t<div>\n\t\t \t\t<a href=\"#\" data-action=\"select\" class=\"btn-edit-address\" style=\"margin-left: 230px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t\t<%= _('ok').translate() %><\/a>\n\t\t\t\t<a href=\"#\" class=\"btn-edit-address\" data-action=\"canceladdressselection\" style=\"margin-left: 20px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t\t<%= _('cancel').translate() %><\/a>\n\t\t\t<\/div>\n\t\t\t<div style=\"height: 25px;\">\n\t\t\t<\/div>\n\t\t<\/div>\n\t\n\t<div class=\"review-layover\" id=\"change-payment\" style=\"max-height: 300px; width: 400px; margin-left: 110px; margin-top: -650px; padding: 10px 0px 0px 0px;\">\n\t\t\n\t\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t<button type=\"button\" class=\"close\" onclick=\"jQuery('#change-payment').hide()\">&times;<\/button>\n\t\t\t<h3 class=\"modal-title\"> Change Credit Card <\/h3>\n\t\t<\/div>\n\t\t<div style=\"width:200px; float:right\">\n\t\t\t\t<%\n\t\t    var selectedCreditcardId = (view.model.get(\"paymentmethods\").models[0].get(\"creditcard\") ? view.model.get(\"paymentmethods\").models[0].get(\"creditcard\").internalid : null);\n\t\t\tconsole.log(selectedCreditcardId);\n\t\t\tvar creditcardWrap = function (creditcard) {\n\t\t\t\treturn SC.macros.creditcard(creditcard, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tshowActions: true\n\t\t\t\t,\tshowDefaults: false\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\ticons: view.wizard.application.getConfig('creditCardIcons')\n\t\t\t\t,\tselectedCreditcard: selectedCreditcardId\n\t\t\t\t,\tshowSecurityCodeForm: true\n\t\t\t\t,\tstep: \"review\"\n\t\t\t\t,   stopSelect: true\n\t\t\t\t});\n\t\t\t} \n\t\t%>\n\t\t<\/div>\t\t\n\t\t<div style=\"width:400px; float:left; padding: 20px 0px 15px 20px;\">\n\t\t<!--<p>\n\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/new\" data-toggle=\"show-in-modal\" style=\" border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t<%= _('Add a New Card').translate() %>\n\t\t\t<\/a>\n\t\t<\/p>-->\n\t\t<%= displayInRows(view.profile.get(\"creditcards\").models, creditcardWrap, view.wizard.application.getConfig('itemsPerRow', 1)) %>\n\t\t<\/div>\n\n\t\t<div>\n\t\t\t<a href=\"#\" data-action=\"select-creditcard\" class=\"btn-edit-address\" style=\"margin-left: 150px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t<%= _('ok').translate() %><\/a>\n\t\t\n\t\t\t<a href=\"#\" id=\"changecreditcard\"class=\"btn-edit-address\" onclick=\"jQuery('#change-payment').hide()\" style=\"margin-left: 20px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t<%= _('cancel').translate() %><\/a>\n\t\t<\/div>\n\t\t<div style=\"height: 25px;\">\n\t\t<\/div>\n\t<\/div>\n\t\n\t<div class=\"review-layover\" id=\"change-billing\" style=\"width: 560px; padding: 10px 0px 0px 0px; margin-top: -710px; min-height: 383px; max-height: 383px;\">\n\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t<button type=\"button\" class=\"close\" data-action=\"canceladdressselection\">&times;<\/button>\n\t\t\t<h3 class=\"modal-title\"> Change Billing Address <\/h3>\n\t\t<\/div>\n\t\t<p style=\"margin-top: 10px;\">\n\t\t<%\n\t\t\t\/\/ Wrap the address address macro to pass options in\n\t\t\tvar addressWrap = function (address) {\n\t\t\t\treturn SC.macros['address'](address, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\thideDefaults: true\n\t\t\t\t,\tselectedAddress: view.model.get(\"billaddress\")\n\t\t\t\t,\tverifyAddress: \"billaddress\"\n\t\t\t\t,\tstep: \"review\"\n\t\t\t\t,   stopSelect: true\n\t\t\t\t});\n\t\t\t}\n\t\t%>\n\t\t<\/p>\n\t\t<div style=\"float:left; padding: 0px 0px 20px 10px;\">\n\t\t<p>\n\t\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/new\" data-toggle=\"show-in-modal\" style=\" border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t\t<%= _('Add New Address').translate() %>\n\t\t\t<\/a>\n\t\t<\/p>\n\t\t<%= displayInRows(view.profile.get('addresses').models, addressWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>\n\t\t<\/div>\n\t\t<div>\n\t\t\t<a href=\"#\" data-action=\"select\" class=\"btn-edit-address\" style=\"margin-left: 230px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t<%= _('ok').translate() %><\/a>\n\t\t\n\t\t\t<a href=\"#\" class=\"btn-edit-address\" data-action=\"canceladdressselection\" style=\"margin-left: 20px; border-bottom: 1px dotted; text-decoration: none; color: #79ccf0;\">\n\t\t\t<%= _('cancel').translate() %><\/a>\n\t\t<\/div>\n\t\t<div style=\"height: 25px;\">\n\t\t<\/div>\n\t<\/div>\n\t\n\t\n\t\n<!-- gift certificate -->\n<div  style=\"width: 586px;  margin-top: 15px; padding-left: 20px; padding-bottom: 20px; border-width:2px; border-color: #e2e2e2; border-style: solid;\">\n<h3 class=\"section-header\" style=\"padding:0; margin:15px 0 6px 0; font-size: 17px; color: #f87c00;\">\n\t\t<%=_('IS THIS ORDER A GIFT?').translate()%>\n\t<\/h3>\n<div id=\"cardmessage-container\">\n<!--<form class=\"delivery-options\" action=\"\">\n\t<fieldset>\n\t\t<input id=\"cardmessagetoggle\" type=\"checkbox\" name=\"orderisgift\" style=\"margin: 0 3px 2px 0;\">Yes, this order is a gift!\n\t\t<div id=\"cardmessageblock\" style=\"display:none\">\n\t\t\t<p style=\"margin-top:9px;\">\n\t\t\t\tNeed some help deciding what to say?<br\/>\n\t\t\t\tUse one of our messages to get you started:\n\t\t\t<\/p>\n\t\t\t<select id=\"cardmessage-options\"><\/select>\n\t\t\t<textarea id=\"cardmessagetext\" maxlength=\"500\" style=\"height: 130px;\"><\/textarea>\n\t\t<\/div>\n\t<\/fieldset>\n\t<\/form>-->\n<\/div>\n<\/div>\n\n\n\n<div class=\"shipments-cart-details-header\" style=\"width: 640px;\">\n\t<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\"  style=\"float: left; background: white; border: 10px solid white; font-size: 13px; font-weight: bold;\">\n\t<tr style=\"height: 40px; font-weight: 500; font-size: 13px; color: #aaaaaa\">\n\t<th align=\"left\" colspan=\"2\" width=\"345px\"><img src=\"img\/cart_icon.png\" style=\"margin-right: 6px;\">SHOPPING CART<\/th>\n\t<th align=\"center\" width=\"100px\">PRICE<\/th>\n\t<th align=\"center\" width=\"100px\">QTY<\/th>\n\t<th align=\"center\" width=\"100px\">TOTAL<\/th>\n\t<\/tr>\n\t\n\t<% view.model.get('lines').each(function (lines, index) { %>\n\t\t\t\t<%= shoppingCartItem(lines, view, {\n\t\t\t\t\tshowActions:false\n\t\t\t\t}) %>\n\t\t\t<% }) %>\n\t<\/table>\n<\/div>\n<span>\n<a href=\"#\" onclick=\"jQuery('.cart-layover').show()\" style=\" margin-left: 568px;\">edit<\/a>\n<\/span>\n<\/div>","iframe_tmpl":"<iframe src=\"<%- view.src %>\"><\/iframe>","order_wizard_paymentmethod_creditcard_module_tmpl":"<% var view_credit_card = view.creditcard %>\n\n<% if (view.creditcards.length == 0) { %>\n\t<%\tvar name = \"cvc\",\n\t\tvalue = \"\",\n\t\tdays = -1;\n\n            var date = new Date();\n            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n            var expires = \"; expires=\" + date.toGMTString();\n\n\n        document.cookie = name + \"=\" + value + expires + \"; path=\/\";\n        %>\n<% } %>\n\n<% if (view_credit_card && !view_credit_card.isNew()) { %>\n\t<div id=\"creditcard-module-list-placeholder\" class=\"creditcard-module-list-placeholder\">\n\n\t\t<%\n\t\t\tvar creditcardWrap = function (creditcard) {\n\t\t\t\treturn SC.macros.creditcard(creditcard, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tshowActions: true\n\t\t\t\t,\tcvcvalue: view.paymentMethod.get('creditcard') ? view.paymentMethod.get('creditcard').ccsecuritycode : ''\n\t\t\t\t,\tshowDefaults: false\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\ticons: view.wizard.application.getConfig('creditCardIcons')\n\t\t\t\t,\tselectedCreditcard: view.paymentMethod.get('creditcard') != undefined ? view.paymentMethod.get('creditcard').internalid : undefined\n\t\t\t\t,\tshowSecurityCodeForm: view.requireccsecuritycode\n\t\t\t\t});\n\t\t\t} \n\t\t%>\n\t\t<%= displayInRows(view.creditcards.models, creditcardWrap, view.wizard.application.getConfig('itemsPerRow', 1)) %>\n\n\t<\/div>\n<% } %>\n\n<% if (view.creditcards.length >= 1 && !view_credit_card) { %>\n\t<div id=\"creditcard-module-list-placeholder\" class=\"creditcard-module-list-placeholder\">\n\n\t\t<%\n\t\t\tvar creditcardWrap = function (creditcard) {\n\t\t\t\treturn SC.macros.creditcard(creditcard, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tshowActions: true\n\t\t\t\t,\tcvcvalue: view.paymentMethod.get('creditcard') ? view.paymentMethod.get('creditcard').ccsecuritycode : ''\n\t\t\t\t,\tshowDefaults: false\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\ticons: view.wizard.application.getConfig('creditCardIcons')\n\t\t\t\t,\tselectedCreditcard: view.paymentMethod.get('creditcard') != undefined ? view.paymentMethod.get('creditcard').internalid : undefined\n\t\t\t\t,\tshowSecurityCodeForm: view.requireccsecuritycode\n\t\t\t\t});\n\t\t\t} \n\t\t%>\n\t\t<%= displayInRows(view.creditcards.models, creditcardWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>\n\t\n\t<\/div>\n<% } else if (view.creditcards.length === 0) { %>\n\t<div class=\"test\" id=\"showpaymentsandbillings-billingaddress\"><\/div>\n\t<div id=\"creditcard-module-form-placeholder\">\n\t\t<form>\n\t\t\t<% var date = new Date(); %>\n\t\t\t<%= creditcardForm(view_credit_card, {\n\t\t\t\tapplication: view.wizard.application\n\t\t\t,\tmonths: _.range(1, 13)\n\t\t\t,\tyears: _.range(date.getFullYear(), date.getFullYear() + 25)\n\t\t\t,   currentMonth: date.getMonth() + 1\n\t\t\t,\tshowDefaults: false\n\t\t\t,\tshowSecurityCodeForm: view.requireccsecuritycode\n\t\t\t}) %>\n\t\t<\/form>\n\t<\/div>\n<% } %>\n<%if(view.paymentMethod.get('creditcard')!=undefined){ console.log(\"777\");console.log(view);%>\n\t<div class=\"span6\">\n<!-- cvc form was here -->\n\t<\/div>\n\t<% } %>\n\t<!--<div id=\"cvc-error\" style=\"margin-top: 33px; margin-left: 7px;\"><\/div>-->\n\t<% if (view.creditcards.length > 0) { %>\n\t\t\t<p>\n\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/new\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Add a New Card').translate() %>\n\t\t\t<\/a>\n\t\t<\/p>\n\t\t<% } %>\n\t\t\t\t\t","page_not_found_tmpl":"<div class=\"view-header\">\n\t<% if (view.page_header) { %>\n\t<h1><%= view.page_header %><\/h1>\n\t<% } %>\n\t<div id=\"main-banner\" class=\"main-banner\"><\/div>\n<\/div>\n<div id=\"page-not-found-content\" class=\"view-body page-not-found-content\">\n\t<%= _('Sorry, we could not load the content you requested.').translate() %>\n<\/div>","forgot_password_tmpl":"<header class=\"page-header login-header\">\n\t<h3>\n\t\t<%= _('Sign In').translate() %>\n\t<\/h3>\n<\/header>\n\n<div class=\"row-fluid\">\n\t<div class=\"offset2 span10\">\n\t\t<h3>\n\t\t\t<%= _('Reset Password').translate() %>\n\t\t<\/h3>\n\n\t\t<form class=\"forgot-password-form\">\n\t\t\t<p>\n\t\t\t\t<%= _('Enter your email below and we\\'ll send you a link to reset your password.').translate() %>\n\t\t\t<\/p>\n\n\t\t\t<fieldset>\n\t\t\t\t<div data-type=\"alert-placeholder\"><\/div>\n\n\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t<label class=\"control-label\" for=\"email\">\n\t\t\t\t\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t\t\t\t\t<\/label>\n\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t<input type=\"text\" name=\"email\" id=\"email\" class=\"input-xlarge\" placeholder=\"<%- _('your@email.com').translate() %>\">\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t\t\t<%=_('Send Email').translate()%>\n\t\t\t\t<\/button>\n\t\t\t<\/fieldset>\n\t\t<\/form>\n\n\t\t<a href=\"\/login-register\" class=\"btn btn-link\" data-target=\".register\">\n\t\t\t<%= _('Sign In Now >').translate()%>\n\t\t<\/a>\n\t<\/div>\n<\/div>"};