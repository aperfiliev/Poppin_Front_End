<!doctype html>
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<html>
<head>
<%= getPageFullHead() %>
<!-- <script src="js/jquery-1.10.2.min.js"></script>
<script src="<%=poppinservres.url.jsjqueryui%>"></script>
<link href="<%=poppinservres.url.cssjqueryui%>" rel="stylesheet" type="text/css" />
 -->
<script type="text/javascript" src="BuildCart.js"></script>
<script type="text/javascript" src="ViewCart.js"></script>

<script>
var set='';
function setGARedirectUrl(url) {
	   var redir_elem = url;

	   _gaq.push(function() {
	    var tracker = _gaq._getAsyncTracker();
	    redir_elem = tracker._getLinkerUrl(url);
	   });
	   window.location = redir_elem;
	   return false;
	  }
jQuery(document).ready(
		function(){
			jQuery(window).scroll(function () {
				if(jQuery(window).scrollTop() + jQuery(window).height() > jQuery(document).height() - 300 ) {
					//do nothing
				} else if(jQuery(window).scrollTop()<300){
					jQuery('#floatingTotal').animate({top:0},{duration:1000,queue:false});
				} else if(jQuery(window).scrollTop()%200==0){
					//do nothing
				} else{
					set = jQuery(document).scrollTop()-200+"px";
					jQuery('#floatingTotal').animate({top:set},{duration:1000,queue:false});
				}
			});
		});
	
</script>

<style>
#floatingTotal{
text-align:left;
}
#floatingTotal .bgbutton{
font-family: 'OmnesBoldRegular';
background: #f47a20;
border: 1px solid #f47a20;
border-radius: 20px;
color: #fff;
cursor: pointer;
padding: 6px 16px;
text-transform: uppercase;
font-size: 14px;
letter-spacing: 1px;
width: 140px;
margin-left: 2px;
}
.orderSummary{
font-family: 'OmnesRegularRegular';
font-size:12px;
color:gray;
margin:10px 20px 10px 20px;
width:210px;
}
.orderSummary td{
padding:4px;
}
.orderSummary td.right{
text-align: right;
}
.input-red{
border: 2px solid red;
display: block;
margin: 0 auto;
text-align: center;
width: 40px;
}

.orderSummary h3{
font-size:14px;
font-family: 'OmnesMediumRegular';
font-weight: bold;
text-transform: uppercase;
}
.summaryLabels{
text-align:left;
}
.summaryValues{
text-align:right;
}
.orderSummary .totalRow td{
border-top:1px solid gray;
border-spacing:1px;
font-weight:bold;
padding-top:10px;
}
.promoCode{
background:rgb(245,245,245);
border-radius:10px;
padding:15px 30px;
font-size:14px;
}
.promoCode h3{
font-size:14px;
font-family: 'OmnesMediumRegular';
font-weight: bold;
text-transform:capitalize;
}
.promoLink{
color: #f37a31;
text-decoration: underline;
font-size: 11px;
font-family: Arial,Helvetica,sans-serif;
cursor: pointer;
}
.promoDescription{
padding: 10px 0 10px 0;
color: #28B9F0;
font-weight: bold;
font-family: Arial,Helvetica,sans-serif;
font-size: 13px;
}
.checkoutDiv{
text-align:left;
margin: 10px;
}
.checkoutDiv span{
display:block;
}
.titleDiv{
color: #f37a31;
}
.titleDiv h2{
background: url(images/cart.png) no-repeat;
padding-left: 48px;
margin-top: 10px;
font-size: 38px;
font-family: 'OmnesLightRegular';
font-weight: normal;
}
.continueDiv{
float:right;padding-top: 20px;
}
.continueDiv a{
color: #969696;
background: url(images/arrow.png) no-repeat;
padding-left: 14px;
}
.updateLink{
color: #969696;
background: url(images/update.png) no-repeat;
padding-left: 18px;
}
.removeLink{
color: #969696;
background: url(images/remove.png) no-repeat;
padding-left: 18px;
}
.helpLink{
padding-bottom: 20px;
}
.helpLink a{
text-transform: uppercase;
font-weight: bold;
color: #f37a31;
}
#carttable #carttableheader td{
background: #fff;
}
#carttable thead tr{
border-top: 1px solid gray;
}
#carttable #carttableheader td .listheadernosort{
color: #000;
font-family: Arial, Helvetica, sans-serif;
font-size: 14px;
font-weight: bold;
}
.listheadercustom{
color: #969696;
padding: 20px 0px 10px 0px;
}
.titlelink{
color: black;
font-weight: bold;
font-size: 12px;
font-family: Arial, Helvetica, sans-serif;
}
.titlespan{
font-size: 12px;
font-family: Arial, Helvetica, sans-serif;
}
.promoInput{
width:100px;
}
.promoInput-red{
border: 2px solid red;
width:110px;
}
.promoApply{
font-family: 'OmnesMediumRegular';
background: rgb(40, 185, 240);
border: 1px solid rgb(40, 185, 240);
border-radius: 15px;
color: #fff;
cursor: pointer;
text-transform: uppercase;
font-size: 14px;
padding: 2px 10px;
}
.promoRemove{
font-family: 'OmnesMediumRegular';
background: rgb(217, 217, 217);
border: 1px solid rgb(200, 200, 200);
border-radius: 15px;
color: #fff;
cursor: pointer;
text-transform: uppercase;
font-size: 14px;
padding: 2px 10px;
}

/* Configure powerTip */

div[id^="powerTip"] {
	background-color:#fff;
	border-radius:8px;
	-moz-border-radius:8px;
	-webkit-border-radius:8px;
	color:#000;
	display: none;
	padding: 0px 20px 0px 20px;
	position: absolute;
	white-space: nowrap;
	z-index:90;
	text-align:left;
	border:2px solid red;
	min-width:50px;
	max-width:300px;
	line-height: 0px;
	font-size: 14px;
}

div[id^="powerTip"]:before {
	content: "";
	position: absolute;
}

div[id^="powerTip"].n:before {
	margin-top:0px; /* approx. half the height to center it */
	margin-left:-5px;
	top:100%;
	left:20%;
	width:9px;
	height:7px;
	background:url(images/tip-yellowsimple_arrows.gif) no-repeat -18px 0;
}

#powerDiv {
	background-color:#fff;
	border-radius:8px;
	-moz-border-radius:8px;
	-webkit-border-radius:8px;
	color:#000;
	display: none;
	padding: 0px 20px 0px 20px;
	position: absolute;
	white-space: nowrap;
	z-index:90;
	text-align:left;
	border: 1px solid #ccc;
	min-width:50px;
	max-width:300px;
	line-height: 0px;
	font-size: 14px;
}

#div__help {
	display: none;
	top: 100px;
	left: 50%;
	margin-left: -300px;
	width: 520px;
	background: #fff no-repeat -200px -80px;
	position: absolute;
	z-index: 1001;
	padding: 30px 40px 34px;
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px;
	-moz-box-shadow: 0 0 10px rgba(0,0,0,.4);
	-webkit-box-shadow: 0 0 10px rgba(0,0,0,.4);
	-box-shadow: 0 0 10px rgba(0,0,0,.4);
	opacity: 1;
}

#div__help_bg {
	position: fixed;
	height: 100%;
	width: 100%;
	background: rgba(0,0,0,.6);
	z-index: 100;
	display: none;
	top: 0;
	left: 0;
}

#div__help .close-button {
	font-size: 22px;
	line-height: .5;
	position: absolute;
	top: 8px;
	right: 11px;
	color: #aaa;
	text-shadow: 0 -1px 1px rbga(0,0,0,.6);
	font-weight: bold;
	cursor: pointer;
}
.span-or-use {
padding: 10px 10px 10px 50px;
font-size: 10px;
color: grey;
}
</style>

</head>
<body id='viewcartbody'>
	<div id='outerwrapper' style='width: 968'>
		<div id='innerwrapper'>
			<div id='div__header' class='noprint' leftmargin='0' topmargin='0' marginwidth='1'>
				<div id='div__title' style='margin: 0px;'></div>
				<div id='div__label' class='scrollarea' style='margin: 0px; overflow: hidden;'></div>
				<table cellpadding="0" cellspacing="0" border="0" width="100%">
					<PP_CART_PAGETOP>
				</table>
				<div class="promo-banner" style="text-align: center;">
					<%=getRecordAttribute('199',2,'custrecord_bannerhtml')%>
				</div>
			</div>

			<div id='div__help' class="kbs_cnt">
				<table border="0" cellpadding="5" cellspacing="0" width="100%">
					<tbody id="helpBody"></tbody>
				</table>
				<a class="close-button" onclick="closeHelp();return false;">X</a>
			</div>

			<div id="div__help_bg"></div>
			<input type='hidden' name='redirect' value=''>
			<div id='div__body'>
				<table border="0" cellspacing="0" cellpadding="0" width="100%">
					<tbody>
						<tr>
							<td class="td-content-area">
								<table cellpadding="0" cellspacing="0" border="0" width="100%">
									<tbody>
										<tr>
											<td valign="top" style="padding: 5px 20px 5px 5px;" >
												<div class="cartNameRow">
													<div class="titleDiv">
														<h2>Shopping Cart</h2>
													</div>
												</div>
												<div class="listheadercustom" style="padding: 20px 0px 10px 0px;">ITEMS IN YOUR CART</div>
												<input type="hidden" id="checkoutUrl" value=""/>
												<input type="hidden" id="continueUrl" value=""/>
												<table id="carttable" width="100%" border="0" cellspacing="0" cellpadding="0" style="visibility: visible;">
													<tbody id="cartBody"></tbody>
												</table>
												<div class="helpLink">
													<a href="#" onclick="showHelp();">Need help placing your order? It's okay to ask for help!</a>
												</div>
												<div class="upsell_options" style="text-align: center;">
													<%=getRecordAttribute('199',3,'custrecord_bannerhtml')%>
												</div>
											</td>
											<td valign="top" style="padding: 5px 5px 5px 20px; border-left: 1px solid gray;width: 197px;" align="right">
											<div id="floatingTotal" style="position:relative;">
											<div class="checkoutDiv">
											<input type="submit" class="bgbutton" value="checkout" onclick="if(checkout()){setGARedirectUrl(checkoutUrl.value);};"/>
											</div>
												<table class="orderSummary" border="0" cellspacing="0" cellpadding="0">
												<col class="summaryLabels" />
												<col class="summaryValues"/>
													<tbody style="vertical-align:top;" id="actionbar" >
													</tbody>
												</table>
												<div class="promoCode" id="promoCodeDiv">
												</div>
												<div class="checkoutDiv">
												<input type="submit" class="bgbutton" value="checkout" onclick="if(checkout()){setGARedirectUrl(checkoutUrl.value);}"/>
												<span class="span-or-use">- Or use -</span>
													<%
														var checkoutSettings = nlapiGetWebContainer().getShoppingSession().getSiteSettings(['checkout']); 
														var paypalUrl = nlapiGetWebContainer().getShoppingSession().getAbsoluteUrl("checkout", "PaypalCheckout.ss");
														var paypalImageUrl = checkoutSettings.checkout.paypalexpress.imageurl;
														paypalImageUrl = (paypalImageUrl != undefined) ? paypalImageUrl : 'http://www.paypal.com/en_US/i/btn/btn_xpressCheckoutsm.gif';
													%>
												
													<input type='image' src='<%=paypalImageUrl%>' onclick='if(checkout()){setGARedirectUrl("<%=paypalUrl%>");}' class="nlbutton" style="background: #FFF;border: 0px solid #fff;"/>
												
												</div>
											</div>
											</td>
										</tr>
									</tbody>
								</table>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div id='div__footer' class='noprint' leftmargin='0' topmargin='0'
		marginwidth='1' marginheight='1'>
		<PP_FOOTER> <GA_FUNNELS> <SMARTYSTREETS>
		<CARD_SELECTOR_EMPTY>
	</div>

<script language="JavaScript">
	var order = <%=JSON.stringify(LoginLib.getOrder())%>;
	var help = <%=LoginLib.getHelp()%>;
	buildCartHeader();
	buildCartItems(order);
	buildHelp(help);
</script>

</body>
</html>