<% registerMacro('creditcard', function (creditcard, options) { %>
<%
	var payment_name = creditcard.get('paymentmethod').name
	,	expiration_month = creditcard.get('expmonth')
	,	icons = options.icons;
%>
</style>
<article class="creditcard">
	<% if (options.showSecurityCodeForm) { %>
	<div class="row-fluid">
		<div class="span6">
	<% } %>
			<div style="float:left;">
			<% if (payment_name in icons) { %>
				<img class="credit-card-icon" src="<%- icons[payment_name] %>" alt="<%- payment_name %>">
			<% } %>
			</div>
			<div style="float:left; padding-left: 10px;">
			<h4 class="summary-header">
				<%= payment_name %> ************<%= creditcard.get('ccnumber').replace(/\*/g, '')%>
			</h4>
			<p> 
				<%= (expiration_month < 10 ? '0' : '') + expiration_month + '/' + creditcard.get('expyear') %>
			</p>
			</div>
			<% if (options.showDefaults) { %>
			<p>
				<% if (creditcard.get('ccdefault') === 'T') { %>
					<i class="icon-star"></i>
					<%= _('Default Credit Card').translate() %>
				<% } %>
			</p>
			<% } %>
		<% if (options.showSecurityCodeForm) { %>
		</div>
		<div class="span6">
			<%= SC.macros.creditcardSecurityNumberForm({
				error: options.securityNumberError
            ,   value: options.ccsecuritycode
			}) %>
		</div>
	</div>
	<% } %>


	<% if (options.showActions) { %>
		<div style="clear: both;"></div>
		<p class="actions">
	<% if (options.showSelect) { %>

	<% } %>
			<a class="btn btn-link" href="/creditcards/<%= creditcard.get('internalid') %>" data-toggle="show-in-modal">
				<%= _('Edit').translate() %>
			</a>
			<btn class="btn btn-link" data-action="remove" data-id="<%- creditcard.get('internalid') %>">
				<%= _('Delete').translate() %>
			</btn>
			<a class="btn btn-link" href="/creditcards/new" data-toggle="show-in-modal">
				<%= _('Add New Credit Card').translate() %>
			</a>
		</p>
	<% } %>
</article>
<% }) %>