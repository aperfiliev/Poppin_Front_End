<style type="text/css">

.review-layover{
	position:absolute;
	margin-left: 50px;
	margin-top: -170px;
	width: 500px;
	height: 400px;
	background: white;
	-webkit-box-shadow: 10px 10px 10px #9E9E9E;
    -moz-box-shadow:    10px 10px 10px #9E9E9E;
    box-shadow:         10px 10px 10px #9E9E9E;
    z-index:999;
    overflow:scroll;
    height:
}
</style>
<% console.log(view);
	var is_active = false
	,	order_delivery_method = view.model.get('shipmethod')
	,	shipping_methods = view.model.get('shipmethods');
	shipping_methods.models.sort(function(obj1, obj2) {
 return obj1.get('rate') - obj2.get('rate');});	
%>
<div class="row-fluid">
<div class="row-fluid shipments-shipping-details-body" style="width: 648px; height: 250px; display: inline-flex;">
		<div class="span6 shipments-shipping-method" style="padding-left: 22px; width: 295px; height: 180px; margin-right: 24px; float: left; border-width:2px; border-color: #e2e2e2; border-style: solid;">
			<h4 class="section-header" style="color: #f87c00; font-size: 17px; margin-bottom: 17px;">
				<%= _('DELIVERY DETAILS').translate() %>
			</h4>
			<% shipping_methods.each(function (shipmethod) { %>
				<% is_active = order_delivery_method === shipmethod.get('internalid') %>

				<label class="delivery-option <%= is_active ? 'active' : '' %>">
					<input
						type="radio"
						name="delivery-options"
						id="delivery-options-<%= shipmethod.get('internalid')%>"
						value="<%- shipmethod.get('internalid')%>" 
						<%= is_active ? 'checked' : '' %>
					>
					<span class="delivery-option-label">
						<b><%= shipmethod.get('name') %></b> - 
					</span>
					<span class="delivery-option-rate">
						<%= shipmethod.get('rate_formatted') %>
					</span>
				</label>
			<% }); %>
		</div>
		
				<div class="span6 shipments-shipping-address" style="padding-left: 22px; padding-bottom: 10px; width: 290px; height: 250px; float: left; margin-right: 16px; border-width:2px; border-color: #e2e2e2; border-style: solid;">
			<h4 class="section-header" style="color: #f87c00; font-size: 17px; margin-bottom: 13px;">
				<%= _('SHIPPING DETAILS').translate() %>
			</h4>
			
			<%= address(view.profile.get('addresses').get(view.model.get('shipaddress')), {
				hideActions: true
			,	hideDefaults: true
			,	verifyReview: "review"
			}) %>
			
			<p style="margin-top: 12px;">
			<input type="radio" checked style="margin-bottom: 7px;">
			<span><b>Ship to this address</b></span>
			</p>
					<a class="btn-edit-address" href="/addressbook/<%-view.model.get('shipaddress')%>" data-toggle="show-in-modal" >
			<%= _('edit').translate() %>
		</a>
		<%if(view.profile.get("addresses").length > 1){%>
		<a href="#" class="btn-edit-address" onclick="jQuery('#change-shipping').show()" style="margin-left: 20px; ">
			<%= _('change').translate() %></a><%}%>
		</div>
	</div>
	
	<div class="review-layover" id="change-shipping" style="display:none; padding: 40px;">
	<input type="button" class="close" value="X" onclick="jQuery('#change-shipping').hide()">
		<p style="margin-top: 10px;">
		<%
			// Wrap the address address macro to pass options in
			var addressWrap = function (address) {
				return SC.macros['address'](address, {
					showSelect: true
				,	selectMessage: view.selectMessage
				,	hideDefaults: true
				,	selectedAddress: view.model.get("shipaddress")
				,	step: "review"
				,	verifyAddress: "shipaddress"
				});
			}
		%>
		</p>

		<%= displayInRows(view.profile.get('addresses').models, addressWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>
	</div>
	
	
	<div style="width: 605px; height: 186px; margin-top: 15px; border-width:2px; border-color: #e2e2e2; border-style: solid; display: inline-flex;">
		
		
	<% var giftcertificates = view.getGiftCertificates() %>
	<% var paymentmethods = view.getPaymentmethods();%>
	<div class="span6 wizard-showpayments-billing-payment-method" style="width: 220px; height: 140px; margin-left: 20px; font-size: 15px;">
		<% if (giftcertificates.length || paymentmethods.length || !view.wizard.hidePayment()) {%>
			<h4 class="section-header"  style="color: #f87c00; font-size: 17px; margin-bottom: 20px;">
				<%= _('BILLING DETAILS').translate() %>
			</h4>

			<div class="payment-methods-summary">		
			<input type="radio" checked style="margin-right: 5px; color: #f97d00; background-color: #f97d00">
				<% console.log(paymentmethods); _.each(paymentmethods, function (paymentmethod) { %>
					<%= SC.macros.formatPaymentMethod(paymentmethod, view.wizard.application.getConfig('creditCardIcons')) %>
				<% }); %>
					
				<% if (giftcertificates.length) { %>
					<br>
					<b><%= _('Gift Certificates').translate() %></b><br>
					<% _.each(giftcertificates, function (paymentmethod) { %>
						<%= SC.macros.formatPaymentMethod(paymentmethod) %>
						<br>
					<% }); %>
				<% } %>
				<% if (view.profile.get('isGuest') === 'T') { %>
					<div>
						<h5><%- view.profile.get('email') %></h5>
					</div>
				<% } %>
			</div>
			
			<a href="/creditcards/<%=paymentmethods[0].get('creditcard').internalid%>" data-toggle="show-in-modal" style=" margin-left: 20px;">
				<%= _('edit').translate() %>
			</a>

			<% if (view.profile.get("creditcards").length > 1){ %>
				<a href="#" onclick="jQuery('#change-payment').show()" style="margin-left: 20px;">
					<%= _('change').translate() %>
				</a>
			<% } %>
			<div class="span6">
			<%= SC.macros.creditcardSecurityNumberForm({
				error: undefined
            ,   value:  paymentmethods[0].get('creditcard').ccsecuritycode
            ,	hidehelp: true
			}) %>
	</div>
		<% } %>
	</div>
		
		<div style="margin-top: 25px;">
		<img src="img/vertical_dottenline.png" />
		</div>
		
	<div class="span6 wizard-showpayments-billing-address" style="height: 140px; width: 335px; margin-left: 40px; padding-top: 18px;">
		<%= address(view.profile.get('addresses').get(view.model.get('billaddress')), {
			hideActions: true
		,	hideDefaults: true
		,	verifyReview: "review"
		}) %>
	</div>
	
	</div>
	
	<div class="review-layover" id="change-payment" style="display:none; padding: 40px;">
		<button type="button" class="close" onclick="jQuery('#change-payment').hide()">Ã—</button>
		<!-- billing address here -->
		<%
			// Wrap the address address macro to pass options in
			var addressWrap = function (address) {
				return SC.macros['address'](address, {
					showSelect: true
				,	selectMessage: view.selectMessage
				,	hideDefaults: true
				,	selectedAddress: view.model.get("billaddress")
				,	verifyAddress: "billaddress"
				});
			}
		%>
		<div style="width:200px; float:right">
		<%= displayInRows(view.profile.get('addresses').models, addressWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>
				<%
			var creditcardWrap = function (creditcard) {
				return SC.macros.creditcard(creditcard, {
					showSelect: true
				,	showActions: true
				,	showDefaults: false
				,	selectMessage: view.selectMessage
				,	icons: view.wizard.application.getConfig('creditCardIcons')
				,	selectedCreditcard: view.model.get("paymentmethods").models[0].get("creditcard").internalid
				,	showSecurityCodeForm: true
				,	step: "review"
				});
			} 
		%>
		</div>
		<div  style="width:200px; float:left">
		<%= displayInRows(view.profile.get("creditcards").models, creditcardWrap, view.wizard.application.getConfig('itemsPerRow', 1)) %>
		</div>
	</div>
	
	
	
<!-- gift certificate -->
<div style="width: 586px; height: 80px; margin-top: 15px; padding-left: 20px; border-width:2px; border-color: #e2e2e2; border-style: solid;">
<h3 class="section-header" style="padding:0; margin:9px 0 0 0; font-size: 17px; color: #f87c00;">
		<%=_('IS THIS ORDER A GIFT?').translate()%>
	</h3>

<form class="delivery-options" action="">
	<fieldset>
		<input id="cardmessagetoggle" type="checkbox" name="orderisgift" style="margin: 0 3px 2px 0;">Yes, this order is a gift!
		<div id="cardmessageblock" style="display:none">
			<p style="margin-top:9px;">
				Need some help deciding what to say?<br/>
				Use one of our messages to get you started:
			</p></div>
	</fieldset>
	</form>
</div>



<div class="shipments-cart-details-header" style="width: 640px;">
	<table cellspacing="0" cellpadding="0" border="0"  style="float: left; background: white; border: 10px solid white; font-size: 13px; font-weight: bold;">
	<tr style="height: 40px; font-weight: 500; font-size: 13px; color: #aaaaaa">
	<th align="left" colspan="2" width="345px"><img src="img/cart_icon.png" style="margin-right: 6px;">SHOPPING CART</th>
	<th align="center" width="100px">PRICE</th>
	<th align="center" width="100px">QTY</th>
	<th align="center" width="100px">TOTAL</th>
	</tr>
	
	<% view.model.get('lines').each(function (lines, index) { %>
				<%= shoppingCartItem(lines, view, {
					showActions:false
				}) %>
			<% }) %>
	</table>
</div>
<span>
<a href="#" onclick="jQuery('.cart-layover').show()" style=" margin-left: 568px;">edit</a>
</span>
</div>